/*http://thinkpixellab.com/tilesjs | 2013-05-18*/
;var Tiles={};(function(b){var a=Tiles.Tile=function(d,c){this.id=d;this.top=0;this.left=0;this.width=0;this.height=0;this.$el=b(c||document.createElement("div"))};a.prototype.appendTo=function(f,c,d,e){this.$el.hide().appendTo(f);if(c){this.$el.delay(d).fadeIn(e)}else{this.$el.show()}};a.prototype.remove=function(c,d){if(c){this.$el.fadeOut({complete:function(){b(this).remove()}})}else{this.$el.remove()}};a.prototype.resize=function(k,g,e,h,f){var d={},i=false;if(this.left!==g.x){d.left=g.x;this.left=g.x;i=true}if(this.top!==g.y){d.top=g.y;this.top=g.y;i=true}if(this.width!==g.width){d.width=g.width;this.width=g.width;i=true}if(this.height!==g.height){d.height=g.height;this.height=g.height;i=true}var j=this,c=function(){var l=j.$el[0];if(j.left!==l.offsetLeft){j.$el.css("left",j.left)}if(j.top!==l.offsetTop){j.$el.css("top",j.top)}if(f){f()}};if(e&&i){this.$el.animate(d,{duration:h,easing:"swing",complete:c})}else{if(i){this.$el.css(d)}setTimeout(c,h)}}})(jQuery);(function(c){var d=function(i){var h=[],j=i.length,f,l,k,g,e;for(l=0;l<j;l++){k=i[l];h[l]=[];for(f=0,g=k.length;f<g;f++){e=k[f];if(e!==" "){h[l].push(e)}}}return h};function a(f,h,g,e){this.x=f;this.y=h;this.width=g;this.height=e}a.prototype.copy=function(){return new a(this.x,this.y,this.width,this.height)};Tiles.Rectangle=a;var b=function(o){var m=[],i=o.length,h=i===0?0:o[0].length,l,n,g,k,j,f,e;o=o.slice();for(j=0;j<i;j++){o[j]=o[j].slice()}for(j=0;j<i;j++){for(k=0;k<h;k++){l=o[j][k];if(l==null){continue}g=1;n=1;if(l!==Tiles.Template.SINGLE_CELL){while(g+k<h&&l===o[j][k+g]){g++}while(n+j<i&&l===o[j+n][k]){n++}}for(e=0;e<n;e++){for(f=0;f<g;f++){o[j+e][k+f]=null}}m.push(new a(k,j,g,n))}}return m};Tiles.Template=function(e,g,f){this.rects=e;this.numTiles=this.rects.length;this.numRows=f;this.numCols=g};Tiles.Template.prototype.copy=function(){var g=[],e,f;for(f=0,e=this.rects.length;f<e;f++){g.push(this.rects[f].copy())}return new Tiles.Template(g,this.numCols,this.numRows)};Tiles.Template.prototype.append=function(g){if(this.numCols!==g.numCols){throw"Appended templates must have the same number of columns"}var f=this.numRows,h,e,j;for(h=0,e=g.rects.length;h<e;h++){j=g.rects[h];this.rects.push(new a(j.x,f+j.y,j.width,j.height))}this.numRows+=g.numRows;this.numTiles+=g.numTiles};Tiles.Template.fromJSON=function(g){var f=d(g),e=b(f);return new Tiles.Template(e,f.length>0?f[0].length:0,f.length)};Tiles.Template.prototype.toJSON=function(){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=g.length,e=0,n=[],f,h,k,m,j,l;for(j=0;j<this.numRows;j++){n[j]=[];for(m=0;m<this.numCols;m++){n[j][m]=Tiles.Template.SINGLE_CELL}}for(f=0,h=this.rects.length;f<h;f++){k=this.rects[f];if(k.width>1||k.height>1){l=g[e];for(j=0;j<k.height;j++){for(m=0;m<k.width;m++){n[k.y+j][k.x+m]=l}}e=(e+1)%o}}for(j=0;j<this.numRows;j++){n[j]=n[j].join("")}return n};Tiles.Template.SINGLE_CELL="."})(jQuery);Tiles.UniformTemplates={get:function(e,b){var d=Math.ceil(b/e),c=[],a,f;for(f=0;f<d;f++){for(a=0;a<e;a++){c.push(new Tiles.Rectangle(a,f,1,1))}}return new Tiles.Template(c,e,d)}};(function(c){var a=Tiles.Grid=function(e){this.$el=c(e);this.animationDuration=300;this.cellSizeMin=150;this.templateFactory=Tiles.UniformTemplates;this.priorityPageSize=Number.MAX_VALUE;this.cellPadding=10;this.cellSize=0;this.numCols=1;this.template=null;this.isDirty=true;this.tiles=[];this.tilesAdded=[];this.tilesRemoved=[]};a.prototype.getContentWidth=function(){return this.$el.width()};a.prototype.resizeColumns=function(){var e=this.getContentWidth();return Math.max(1,Math.floor((e+this.cellPadding)/(this.cellSizeMin+this.cellPadding)))};a.prototype.resizeCellSize=function(){var e=this.getContentWidth();return Math.ceil((e+this.cellPadding)/this.numCols)-this.cellPadding};a.prototype.resize=function(){var f=this.resizeColumns();if(this.numCols!==f&&f>0){this.numCols=f;this.isDirty=true}var e=this.resizeCellSize();if(this.cellSize!==e&&e>0){this.cellSize=e;this.isDirty=true}};a.prototype.updateTiles=function(j){j=d(j);var h=j.length,f=[],g,k,l,e;for(g=this.tiles.length-1;g>=0;g--){k=this.tiles[g];e=c.inArray(k.id,j);if(e<0){this.tilesRemoved.push(k)}else{f[e]=k}}this.tiles=[];for(g=0;g<h;g++){k=f[g];if(!k){l=j[g];if(this.createTile){k=this.createTile(l);if(!k){continue}}else{k=new Tiles.Tile(l)}this.tilesAdded.push(k)}this.tiles.push(k)}};function d(e){var h=[],g=e?e.length:0,f,j;for(f=0;f<g;f++){j=e[f];if(c.inArray(j,h)===-1){h.push(j)}}return h}a.prototype.insertTiles=function(e){this.addTiles(e,true)};a.prototype.addTiles=function(h,e){if(!h||h.length===0){return}var j=[],g=this.tiles.length,f;for(f=0;f<g;f++){j.push(this.tiles[f].id)}var k=e?h.concat(j):j.concat(h);this.updateTiles(k)};a.prototype.removeTiles=function(g){if(!g||g.length===0){return}var j=[],f,e,h;for(f=0,e=this.tiles.length;f<e;f++){h=this.tiles[f].id;if(c.inArray(h,g)===-1){j.push(h)}}this.updateTiles(j)};a.prototype.createTemplate=function(g,e){g=Math.max(1,g);var f=this.templateFactory.get(g,e);if(!f){f=Tiles.UniformTemplates.get(g,e)}return f};a.prototype.ensureTemplate=function(f){if(!this.template||this.template.numCols!==this.numCols){this.template=this.createTemplate(this.numCols,f);this.isDirty=true}else{var e=f-this.template.rects.length;if(e>0){this.template.append(this.createTemplate(this.numCols,e));this.isDirty=true}}};function b(e,i,h){var f=e.y+e.height,g=e.x+e.width;if(i){if(!((i.top>f)||(i.top+i.height<e.y)||(i.left>g)||(i.left+i.width<e.x))){return true}}if(h){if(!((h.y>f)||(h.y+h.height<e.y)||(h.x>g)||(h.x+h.width<e.x))){return true}}return false}a.prototype.shouldRedraw=function(){if(this.cellSize<=0){this.resize()}this.ensureTemplate(this.tiles.length);var e=(this.isDirty||this.tilesAdded.length>0||this.tilesRemoved.length>0);return e};a.prototype.redraw=function(k,w,m){if(!this.shouldRedraw()){if(w){w(false,m)}return}var x=this.tiles.length,y=this.priorityPageSize,e=this.animationDuration,n=this.cellSize+this.cellPadding,r=0,g=0,s=new Tiles.Rectangle(this.$el.scrollLeft(),this.$el.scrollTop(),this.$el.width(),this.$el.height()),z,l,p,h,t,u,q,o,j,f,v;for(r=0;r<x;r+=y){p=this.template.rects.slice(r,r+y);h=this.tiles.slice(r,r+y);f=p.slice(0);v=h.slice(0);if(this.prioritizePage){this.prioritizePage(f,v)}for(t=0,u=v.length;t<u;t++){z=v[t];l=c.inArray(z,this.tilesAdded)>=0;q=f[t];o=new Tiles.Rectangle(q.x*n,q.y*n,(q.width*n)-this.cellPadding,(q.height*n)-this.cellPadding);z.resize(q,o,k&&!l&&b(s,z,o),e);if(l){j=k&&b(s,null,o);if(j&&this.getAppendDelay){g=this.getAppendDelay(q,p,f,z,h,v)}else{g=0}z.appendTo(this.$el,j,g,e)}}}for(t=0,u=this.tilesRemoved.length;t<u;t++){z=this.tilesRemoved[t];j=k&&b(s,z,null);z.remove(j,e)}this.tilesRemoved=[];this.tilesAdded=[];this.isDirty=false;if(w){setTimeout(function(){w(true,m)},e+10)}}})(jQuery);
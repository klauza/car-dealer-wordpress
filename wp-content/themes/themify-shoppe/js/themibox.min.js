var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var g=a[e];if(b.call(d,g,e,a))return{i:e,v:g}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");var Themibox={};
(function(a){Themibox={topOffset:"50%",init:function(b){this.lightboxOpen=this.isFrameLoading=!1;a("body").hasClass("iphone")&&window.addEventListener("orientationchange",this.doOnOrientationChange);this.config=b;this.bindEvents();this.setupLightbox()},doOnOrientationChange:function(){a("body").hasClass("post-lightbox")&&window.setTimeout(function(){Themibox.topOffset=a(window).scrollTop();a("#post-lightbox-wrap").animate({top:Themibox.topOffset},300)},300)},bindEvents:function(){var b=a("body");
b.on("click",".themify-lightbox",this.clickLightBox);b.on("click",".close-lightbox",this.closeLightBox);a(document).keyup(this.keyUp);a("<div/>",{id:"pattern"}).appendTo("body").on("click",this.closeLightBox)},setupLightbox:function(){a('<div id="post-lightbox-wrap">'+themifyShop.themibox.close+'<div id="post-lightbox-container"><div class="carousel"></div></div></div><a href="#" class="lightbox-direction-nav lightbox-prev">\u00bb</a><a href="#" class="lightbox-direction-nav lightbox-next">\u00ab</a>').hide().prependTo("body")},
clickLightBox:function(b){b.preventDefault();if(Themibox.isFrameLoading)return!1;var d=a(this).prop("href");b=a(this).closest(".product").find(".product-image img");var c=a("#post-lightbox-container"),e=a("#post-lightbox-wrap"),g=a("body"),f=a(this).closest(".post").find(".product-image");b=b.length?b.prop("src"):a(this).data("image");b="undefined"!==typeof b?b:themifyShop.placeholder;f=f.length?f:a(this).closest(".post");var h=180>f.outerWidth(!0)?f.outerWidth(!0):180;a(".themibox-clicked").removeClass("themibox-clicked");
a(this).addClass("themibox-clicked");Themibox.isFrameLoading=!0;g.addClass("post-lightbox");g.css("overflow-y","hidden");e.hide().removeClass("lightbox-message").addClass("post-lightbox-prepare");c.html('<div class="post-lightbox-iframe"><div class="post-lightbox-main-image"><img src="'+b+'"/></div></div>');e.css({width:f.outerWidth(!0),height:f.outerHeight(!0),top:f.offset().top-a(window).scrollTop()+f.outerHeight(!0)/2,left:f.offset().left-a(window).scrollLeft()+parseInt(f.outerWidth(!0)/2)}).fadeIn().animate({width:h,
top:"50%",left:"50%"},"fast",function(){a.ajax({url:d,beforeSend:function(){a("#pattern").hide().fadeIn(300);c.addClass("post-lightbox-flip-infinite")},success:function(b){var d=!0;a('<div class="post-lightbox-temp" id="post-lightbox-wrap"><div id="post-lightbox-container"><div class="post-lightbox-iframe">'+b+"</div></div></div>").prependTo("body").imagesLoaded().always(function(){var f=a("#post-lightbox-wrap.post-lightbox-temp").outerHeight(!0);a("#post-lightbox-wrap.post-lightbox-temp").remove();
c.children(".post-lightbox-iframe").append(b);c.one("animationiteration webkitAnimationIteration oanimationiteration MSAnimationIteration",function(){d&&(d=!1,a(this).removeClass("post-lightbox-flip-infinite"),e.addClass("animate_start").animate({width:960,height:f},"normal",function(){g.hasClass("iphone")&&(Themibox.topOffset=a(window).scrollTop()+10);a(".lightbox-direction-nav").show();var b=c.find(".post-nav .prev a"),d=c.find(".post-nav .next a");0===b.length&&a(".lightbox-prev").hide();0===d.length&&
a(".lightbox-next").hide();c.find("form").attr("target","_top");Themibox.isFrameLoading=!1;Themibox.lightboxOpen=!0;g.trigger("themiboxloaded");a(this).removeClass("post-lightbox-prepare animate_start")}))})})}})})},closeLightBox:function(b){b.preventDefault();Themibox.lightboxOpen&&a("#pattern").fadeOut(300,function(){var b=a("#post-lightbox-wrap");if(b.hasClass("lightbox-message"))b.animate({top:Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,
document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))},800,function(){a("body").removeClass("post-lightbox").css("overflow-y","visible");a(".post-lightbox-iframe").empty();a(window).resize();a("body").trigger("themiboxclosed");Themibox.lightboxOpen=!1});else{var c=a(".themibox-clicked").closest(".post").find(".product-image");a(".post-lightbox-main-image");c=c.length?c:a(".themibox-clicked").closest(".post");b.addClass("animate_start post-lightbox-prepare animate_closing").animate({width:c.outerWidth(!0),
height:c.outerHeight(!0)},"normal",function(){a(".lightbox-direction-nav").hide();a(this).find("#pagewrap").remove();a(this).removeClass("animate_start animate_closing").delay(100).animate({top:c.offset().top-a(window).scrollTop()+c.outerHeight(!0)/2,left:c.offset().left-a(window).scrollLeft()+parseInt(c.outerWidth(!0)/2)},"normal",function(){a(this).fadeOut();a(".post-lightbox-iframe").empty();a("body").removeClass("post-lightbox").css("overflow-y","visible");a(window).resize();a("body").trigger("themiboxclosed");
Themibox.lightboxOpen=!1})})}})},keyUp:function(b){Themibox.lightboxOpen&&27==b.keyCode&&a(".close-lightbox").trigger("click")}}})(jQuery);

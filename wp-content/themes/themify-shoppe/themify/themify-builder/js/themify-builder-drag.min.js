var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,l,e){a instanceof String&&(a=String(a));for(var k=a.length,g=0;g<k;g++){var t=a[g];if(l.call(e,t,g,a))return{i:g,v:t}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,e){a!=Array.prototype&&a!=Object.prototype&&(a[l]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,l,e,k){if(l){e=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var g=a[k];g in e||(e[g]={});e=e[g]}a=a[a.length-1];k=e[a];l=l(k);l!=k&&null!=l&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");
(function(a){function l(b,c){this.element=a(b);this.options=a.extend({},x,c);this.init()}var e="desktop",k,g=!1,t,u=!0,p=!1,h,d,v,w,r,m,n=a(window.top.document),q,x={append:!0,dropitems:null,elements:null,type:"",cancel:null,onDragStart:null,onDrag:null,onDragEnter:null,onDragLeave:null,onDragEnd:null,onDrop:null};l.prototype={init:function(){!1===p&&(r=a("<div/>",{id:"tb_placeholder_body","class":"tb_placeholder_helper"}),p=a("<div/>",{id:"tb_placeholder_iframe","class":"tb_placeholder_helper"}),
q=a("body"),q.prepend(p).on("themify_builder_change_mode",this.changeMode),v=a("#tb_toolbar",n),w=a("#tb_fixed_bottom_scroll",n),a("body",n).append(r));this.element.off("mousedown.tb_visual touchstart.tb_visual").on("mousedown.tb_visual touchstart.tb_visual",this.mouseDown.bind(this))},elpos:{},is_enter:!1,size:{w:"",h:""},mouseDown:function(b){if(1!==b.which||b.target.classList.contains("tb_favorite")||b.target.classList.contains("add_module_btn")||b.target.classList.contains("remove_item_btn"))h=
m=d=null;else{b.preventDefault();g=!1;h=this.element;this.elpos=h.offset();u=!1;this.setCurrentPlaceHolder(b);var c=h[0].outerHTML;p.removeClass("drop_animate").hide().html(c);r.removeClass("drop_animate").hide().html(c);m.show();this.size.w=m.outerWidth()/2;this.size.h=m.outerHeight();a(document).on("mousemove.tb_visual",this.mouseMove.bind(this)).on("mouseup.tb_visual",this.mouseUp.bind(this)).on("mouseenter.tb_visual",this.iframeEnter.bind(this)).on("mouseleave.tb_visual",this.iframeLeave.bind(this)).on("mouseenter.tb_visual",
this.options.dropitems,this.mouseEnter.bind(this)).on("mouseleave.tb_visual",this.options.dropitems,this.mouseLeave.bind(this));n.on("mousemove.tb_visual",this.mouseMove.bind(this)).on("mouseup.tb_visual",this.mouseUp.bind(this));w.on("mouseenter.tb_visual",this.scroll.bind(this)).on("mouseleave.tb_visual",this.scrollUp.bind(this));v.on("mouseenter.tb_visual",this.scroll.bind(this)).on("mouseleave.tb_visual",this.scrollUp.bind(this));this.mouseMove(b);c=a("body",n);c=c.add(a("body"));c.addClass("tb_drag_start tb_drag_"+
this.options.type);"row"===this.options.type&&themifybuilderapp.toolbar.$el.find('.tb_zoom[data-zoom="50"]').trigger("click");a.isFunction(this.options.onDragStart)&&this.options.onDragStart.call(this,b,h)}},mouseMove:function(b){b.stopPropagation();if(h&&m)if(g){var c=this;var f=q.add(q.closest("html"));f.stop().animate({scrollTop:g},{duration:800,step:function(e){g?(e="down"===k?w.offset().top-t:v.offset().top+t,m.css("top",e)):f.stop();a.isFunction(c.options.onDrag)&&c.options.onDrag.call(c,b,
h,d)},complete:function(){c.checkScrollEnd()||(f.stop(),g=k=!1,c.setPlaceHolder(b))}})}else{if(this.is_enter&&this.options.elements&&d){c=this;for(var e=this.is_enter.find(this.options.dropitems+","+this.options.elements).get().reverse(),l=0,p=e.length;l<p;++l){var n=a(e[l]);if(c.CheckIntersect(b,n)&&(!c.options.cancel||0===n.closest(c.options.cancel).length)){c.removeAttr();d=n;break}}}this.setPlaceHolder(b)}},SetSide:function(b){var a=d[0].getBoundingClientRect();b=.5<(b.clientY-a.top)/(a.bottom-
a.top-20)?"bottom":"top";"top"===b&&d[0].parentNode===this.is_enter[0]&&0===d.index()&&(d=this.is_enter);d[0].dataset.pos!==b&&d.attr("data-pos",b)},setCurrentPlaceHolder:function(){m=u?p:r},setPlaceHolder:function(b){m.css({top:b.originalEvent.pageY-this.size.h-12,left:b.originalEvent.pageX-this.size.w});d&&this.SetSide(b);a.isFunction(this.options.onDrag)&&this.options.onDrag.call(this,b,h,d)},removeAttr:function(){for(var b=document.querySelectorAll("[data-pos]"),a=0,d=b.length;a<d;++a)b[a].removeAttribute("data-pos")},
mouseUp:function(b){a(document).off("mousemove.tb_visual").off("mouseup.tb_visual").off("mouseenter.tb_visual").off("mouseleave.tb_visual");n.off("mousemove.tb_visual").off("mouseup.tb_visual");w.off("mouseenter.tb_visual").off("mouseleave.tb_visual");v.off("mouseenter.tb_visual").off("mouseleave.tb_visual");if(h&&m&&!b.isTrigger){b.stopPropagation();b={};var c=h.clone();d?(b.top=d.offset().top,b.left=d.offset().left,"bottom"===d[0].dataset.pos&&(b.top+=d.outerHeight())):(b.top=this.elpos.top,b.left=
this.elpos.left);this.is_enter=g=h=null;var f=this;m.addClass("drop_animate").css(b).one(themifybuilderapp.Utils.transitionPrefix(),function(b){var e=a("body",n),e=e.add("body");"row"===f.options.type&&setTimeout(function(){themifybuilderapp.toolbar.$el.find('.tb_zoom[data-zoom="100"]').trigger("click")},1E3);e.removeClass("tb_drag_start tb_drag_"+f.options.type);d&&d[0].dataset.pos?(c.hide(),"bottom"===d[0].dataset.pos?f.options.append&&!d[0].classList.contains(f.options.elements.replace(".",""))?
d.append(c):d.after(c):f.options.append&&!d[0].classList.contains(f.options.elements.replace(".",""))?d.prepend(c):d.before(c),f.removeAttr(),a.isFunction(f.options.onDrop)&&f.options.onDrop.call(f,b,c,d),d=null):a.isFunction(f.options.onDragEnd)&&f.options.onDragEnd.call(f,b,c);p.empty().removeAttr("style");r.empty().removeAttr("style")})}},mouseEnter:function(b){h&&m&&(b.stopPropagation(),a(document).trigger("mouseenter"),d=this.is_enter=a(b.currentTarget),this.removeAttr(),this.SetSide(b),a.isFunction(this.options.onDragEnter)&&
this.options.onDragEnter.call(this,b,h,d))},mouseLeave:function(b){var c=a(b.currentTarget);if(h&&d&&!this.CheckIntersect(b,c)){var f=c.parent().closest(this.options.dropitems);0<f.length&&this.CheckIntersect(b,f)?f.trigger("mouseenter.tb_visual"):(this.is_enter=null,this.removeAttr(),d=!1,a.isFunction(this.options.onDragLeave)&&this.options.onDragLeave.call(this,b,h,c))}},scroll:function(b){if(h&&m){var c=parseInt((q.height()-a(window.top).height())/5);b=a(b.currentTarget);"tb_fixed_bottom_scroll"===
b.prop("id")?(g="+="+c+"px",k="down"):(g="-="+c+"px",k="up");0<c?t=b.height():g=!1}},checkScrollEnd:function(){var b=q.scrollTop();return"up"===k&&0!==b||"down"===k&&a(window.top).height()+b!==q.height()},CheckIntersect:function(b,a){var c=a.offset();return b.pageX>=c.left&&b.pageX<=c.left+a.outerWidth()&&b.pageY>=c.top&&b.pageY<=c.top+a.outerHeight()},scrollUp:function(a){h&&m&&(g=k=!1,q.add(q.closest("html")).stop())},iframeEnter:function(a){h&&m&&(a.stopPropagation(),u=!0,r.hide(),p.show(),this.setCurrentPlaceHolder())},
iframeLeave:function(a){if(h&&m){a.stopPropagation();var b=this;setTimeout(function(){u=k?("desktop"===e||"block"===p.css("display"))&&b.checkScrollEnd():!1;u||(p.hide(),r.show(),b.setCurrentPlaceHolder())},5)}},changeMode:function(b,c,d){e=d;q="desktop"===e?a("body"):a("body",n)}};a.fn.ThemifyDraggable=function(b){return this.each(function(){a.data(this,"plugin_ThemifyDraggable")||a.data(this,"plugin_ThemifyDraggable",new l(this,b))})}})(jQuery);

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var e=a.length,c=0;c<e;c++){var g=a[c];if(b.call(d,g,c,a))return{i:c,v:g}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
(function(a){if(themifyBuilder.is_gutenberg_editor||0!==a("#page-builder.themify_write_panel").length){var b=themifybuilderapp,d=a("body"),e=!1;b.redirectFrontend=!1;b.toolbarCallback=function(){b.undoManager.btnUndo=b.toolbar.el.getElementsByClassName("tb_undo_btn")[0];b.undoManager.btnRedo=b.toolbar.el.getElementsByClassName("tb_redo_btn")[0];b.undoManager.compactBtn=b.toolbar.el.getElementsByClassName("tb_compact_undo")[0]};b.render=function(){if(!themifyBuilder.is_gutenberg_editor||document.getElementById("tb_canvas_block")){d[0].insertAdjacentHTML("afterbegin",
'<div class="tb_fixed_scroll" id="tb_fixed_bottom_scroll"></div>');d.append(a("<div/>",{id:"tb_alert"}));0===themifyBuilder.builder_data.length&&(themifyBuilder.builder_data={});if(themifyBuilder.is_gutenberg_editor){var c=wp.template("builder_admin_canvas_block");document.getElementById("tb_canvas_block").innerHTML=c()}this.toolbar=new b.Views.Toolbar({el:"#tb_toolbar"});this.toolbar.render();this.toolbarCallback();b.Instances.Builder[0]=new b.Views.Builder({el:"#tb_row_wrapper",collection:new b.Collections.Rows(themifyBuilder.builder_data)});
b.Instances.Builder[0].render();b.toolbar.pageBreakModule.countModules();a("input#publish,input#save-post").one("click",function(c){if(!e){var d=a(this);d.addClass("disabled");b.Utils.saveBuilder(function(){b.undoManager.reset();d.removeClass("disabled").trigger("click")});c.preventDefault()}});var c=a('<a href="#" id="tb_switch_frontend_button" class="button tb_switch_frontend">'+themifyBuilder.i18n.switchToFrontendLabel+"</a>"),g=a(".themify-wp-editor-holder");g.length?c=g.find("a"):c.appendTo("#postdivrich #wp-content-media-buttons");
c.on("click",function(b){b.preventDefault();a("#tb_switch_frontend").trigger("click")});a('input[name*="builder_switch_frontend"]').closest(".themify_field_row").remove();b.Views.bindEvents();b.Forms.bindEvents();b.vent.trigger("dom:builder:init",!0)}};b._backendSwitchFrontend=function(c){a("#builder_switch_frontend_noncename").val("ok");e=!0;"publish"===a("#original_post_status").val()?themifyBuilder.is_gutenberg_editor?(a(".editor-post-publish-button").length?a(".editor-post-publish-button").trigger("click"):
a(".editor-post-publish-panel__toggle").trigger("click"),b.redirectFrontend=c,a("#tb_switch_frontend").trigger("click.frontend-btn")):a("#publish").trigger("click"):themifyBuilder.is_gutenberg_editor?(a(".editor-post-save-draft").trigger("click"),b.redirectFrontend=c):a("#save-post").trigger("click")};b._backendBuilderFocus=function(){a("#page-buildert").trigger("click");a("html, body").animate({scrollTop:a("#tb_toolbar").offset().top-a("#wpadminbar").height()},2E3)};a(function(){if(d.hasClass("post-php")&&
a("#post-lock-dialog").length){if(!a("#post-lock-dialog").hasClass("hidden"))return;Themify.LoadAsync(themifyBuilder.builder_url+"/js/themify-ticks.js",function(){d.hasClass("tb_restriction")?TB_Ticks.init(themifyBuilder.ticks,window).show():TB_Ticks.init(themifyBuilder.ticks,window).ticks()},null,null,function(){return"undefined"!==typeof TB_Ticks})}if("function"===typeof window.icl_copy_from_original){var b=window.icl_copy_from_original;window.icl_copy_from_original=function(a,c){b(a,c);jQuery.ajax({url:ajaxurl,
type:"POST",data:{action:"themify_builder_icl_copy_from_original",source_page_id:c,source_page_lang:a},success:function(a){"-1"!=a&&jQuery("#page-builder .themify_builder.themify_builder_admin").empty().append(a).contents().unwrap()}})}}});a(window).load(function(){function c(){var b=r+a("#page-builder").height(),c=a(window).scrollTop();return c>n&&c<b}function d(){f.width(f.width());n=h.offset().top;p=h.offset().left;r=Math.round(a("#page-builder").offset().top);k.height(f.outerHeight(!0));a(window).scroll(function(){l&&
clearTimeout(l);l=setTimeout(e,15)}).resize(function(){n=h.offset().top;p=h.offset().left;q="fixed"===m.css("position")?m.outerHeight(!0):0;f.width(a("#page-builder .themify_builder_admin").width()).css("top",c()?q:"");k.height(f.outerHeight(!0))})}function e(){l=null;c()?(f.addClass("tb_toolbar_fixed").css({top:q,left:p}),k.css("display","block")):(f.removeClass("tb_toolbar_fixed").css({top:0,left:0}),k.css("display","none"))}b.render();var f=a("#tb_toolbar"),k=a("#tb_module_tmp"),h=a("#tb_scroll_anchor"),
n=0,p=0,l=null,r=0,m=a("#wpadminbar"),q="fixed"===m.css("position")?m.outerHeight(!0):0;if(0<f.length)if(f.is(":visible")&&!themifyBuilder.is_gutenberg_editor)d();else a(".themify-meta-box-tabs a").one("click",function(){"page-buildert"===a(this).attr("id")&&d()});sessionStorage.getItem("focusBackendEditor")&&(b._backendBuilderFocus(),sessionStorage.removeItem("focusBackendEditor"))})}})(jQuery);

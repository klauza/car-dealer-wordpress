var ytp=ytp||{};
(function(b,n){b.themify_ytb={version:"3.0.8",apiKey:"",defaults:{containment:"self",ratio:"auto",videoID:null,startAt:0,stopAt:0,fs:0,autoPlay:!0,vol:100,addRaster:!1,quality:"default",mute:!1,loop:!0,showYTLogo:!1,mobileFallbackImage:null,optimizeDisplay:!0,align:"center,center",onReady:function(a){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},loading:null,locationProtocol:location.protocol,onYouTubeIframeAPIReady:function(a,c,d){var e=b(a),f={modestbranding:1,
autoplay:1,controls:0,showinfo:0,rel:0,disablekb:"",fs:0,loop:a.opt.loop?1:0,enablejsapi:1,version:3,playerapiid:c,origin:"*",allowfullscreen:!1,wmode:"transparent",iv_load_policy:3,html5:1};a.opt.autoPlay="undefined"===typeof a.opt.autoPlay?!1:a.opt.autoPlay;a.opt.vol=a.opt.vol?a.opt.vol:100;b.themify_ytb.getDataFromAPI(a);e.on("YTPChanged",function(){a.isInit=!0;var g=b("<div>").get(0);d.append(g);if(ThemifyBuilderModuleJs._isMobile()&&a.canPlayOnMobile){if(a.opt.containment.outerWidth()>b(window).width()){a.opt.containment.css({maxWidth:"100%"});
var h=.563*a.opt.containment.outerWidth();a.opt.containment.css({maxHeight:h})}new YT.Player(g,{videoId:a.videoID.toString(),width:"100%",height:h,playerVars:f,events:{onReady:function(b){a.player=b.target}}})}else new YT.Player(g,{videoId:a.videoID.toString(),playerVars:f,events:{onReady:function(d){a.player=d.target;a.isReady=a.isPlayer&&!a.opt.autoPlay?!1:!0;a.playerEl=a.player.getIframe();b(a.playerEl).attr("unselectable","on");e.optimizeDisplay();b(window).off("tfsmartresize."+c).on("tfsmartresize.tfVideo tfsmartresize."+
c,function(){e.optimizeDisplay()});b.themify_ytb.checkForState(a)},onStateChange:function(c){if("function"===typeof c.target.getPlayerState)if(c=c.target.getPlayerState(),a.preventTrigger)a.preventTrigger=!1;else{a.state=c;switch(c){case -1:var d="YTPUnstarted";break;case 0:d="YTPEnd";a.opt.loop&&a.player.seekTo(0);break;case 1:case 2:d="YTPPause";break;case 3:a.player.setPlaybackQuality(a.opt.quality);d="YTPBuffering";break;case 5:d="YTPCued"}d=b.Event(d);d.time=a.currentTime;a.canTrigger&&b(a).trigger(d)}},
onPlaybackQualityChange:function(c){c=c.target.getPlaybackQuality();var d=b.Event("YTPQualityChange");d.quality=c;b(a).trigger(d)},onError:function(b){150==b.data&&console.log("Embedding this video is restricted by Youtube.");if("function"===typeof a.opt.onError)a.opt.onError(e,b)}}})})},buildPlayer:function(a){return this.each(function(){var c="themify_ytb_"+a.id,d=b(this);this.loop=0;this.opt={};this.state={};b.extend(this.opt,b.themify_ytb.defaults,a);this.hasChanged||(this.defaultOpt={},b.extend(this.defaultOpt,
b.themify_ytb.defaults,a));this.isRetina=window.retina||1<window.devicePixelRatio;this.isAlone=!1;this.hasFocus=!0;this.videoID=a.videoID;this.defaultOpt.containment=this.opt.containment="self"===this.opt.containment?b(this):b(this.opt.containment);var e=this.opt.containment.is(b(this));this.canPlayOnMobile=e&&0===b(this).children().length;this.isPlayer=!1;e?this.isPlayer=!0:d.hide();var e=b("<div/>").addClass("themify_ytb_wrapper big-video-wrap").attr("id","wrapper_"+c),f=b("<div/>").addClass("themify_ytb_playerbox").prop("id",
c);f.appendTo(e);this.opt.containment.prepend(e);this.wrapper=e;if(ThemifyBuilderModuleJs._isMobile()&&!this.canPlayOnMobile)this.opt.mobileFallbackImage&&this.opt.containment.css({backgroundImage:"url("+this.opt.mobileFallbackImage+")",backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}),d.remove(),b(document).trigger("YTPUnavailable");else b.themify_ytb.onYouTubeIframeAPIReady(this,c,f)})},getDataFromAPI:function(a){a.videoData=b(a.playerEl).data("YTPlayer_data_"+
a.videoID);b(a).off("YTPData.YTPlayer").on("YTPData.YTPlayer",function(){if(a.hasData&&a.isPlayer&&!a.opt.autoPlay){var b=a.videoData.thumb_max||a.videoData.thumb_high||a.videoData.thumb_medium;a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+b+") center center",backgroundSize:"cover"});a.opt.backgroundUrl=b}});if(a.videoData)setTimeout(function(){a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio;a.dataReceived=!0;b(a).trigger("YTPChanged");var c=b.Event("YTPData");c.prop={};for(var e in a.videoData)c.prop[e]=
a.videoData[e];b(a).trigger(c)},500),a.hasData=!0;else if(b.themify_ytb.apiKey)b.getJSON(b.themify_ytb.locationProtocol+"//www.googleapis.com/youtube/v3/videos?id="+a.videoID+"&key="+b.themify_ytb.apiKey+"&part=snippet",function(c){a.dataReceived=!0;b(a).trigger("YTPChanged");c=c.items[0].snippet;a.videoData={};a.videoData.id=a.videoID;a.videoData.channelTitle=c.channelTitle;a.videoData.title=c.title;a.videoData.description=400>c.description.length?c.description:c.description.substring(0,400)+" ...";
a.videoData.aspectratio="auto"==a.opt.ratio?"16/9":a.opt.ratio;a.opt.ratio=a.videoData.aspectratio;a.videoData.thumb_max=c.thumbnails.maxres?c.thumbnails.maxres.url:null;a.videoData.thumb_high=c.thumbnails.high?c.thumbnails.high.url:null;a.videoData.thumb_medium=c.thumbnails.medium?c.thumbnails.medium.url:null;b(a.playerEl).data("YTPlayer_data_"+a.videoID,a.videoData);a.hasData=!0;c=b.Event("YTPData");c.prop={};for(var d in a.videoData)c.prop[d]=a.videoData[d];b(a).trigger(c)});else{setTimeout(function(){b(a).trigger("YTPChanged")},
50);if(a.isPlayer&&!a.opt.autoPlay){var c=b.themify_ytb.locationProtocol+"//i.ytimg.com/vi/"+a.videoID+"/hqdefault.jpg";a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+c+") center center",backgroundSize:"cover"});a.opt.backgroundUrl=c}a.videoData=null;a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio}!a.isPlayer||a.opt.autoPlay||ThemifyBuilderModuleJs._isMobile()||(a.loading=b("<div/>").addClass("loading").html("Loading").hide(),b(a).append(a.loading),a.loading.fadeIn())},getVideoData:function(){return this.get(0).videoData},
getVideoID:function(){return this.get(0).videoID||!1},setVideoQuality:function(a){this.get(0).player.setPlaybackQuality(a)},changeMovie:function(a){var c=this.get(0);c.opt.startAt=0;c.opt.stopAt=0;c.opt.mute=!1;c.opt.loop=!0;c.hasData=!1;c.hasChanged=!0;c.player.loopTime=void 0;a&&b.extend(c.opt,a);c.videoID=a.videoID;a=b.Event("YTPChangeMovie");a.time=c.currentTime;a.videoId=c.videoID;b(c).trigger(a);b(c).ThemifyYTBGetPlayer().cueVideoByUrl(encodeURI(b.themify_ytb.locationProtocol+"//www.youtube.com/v/"+
c.videoID),1,c.opt.quality);b(c).optimizeDisplay();b.themify_ytb.checkForState(c);b.themify_ytb.getDataFromAPI(c)},getPlayer:function(){return b(this).get(0).player},playerDestroy:function(){var a=this.get(0);a.isInit=!1;a.videoID=null;a.wrapper.remove();return this},play:function(){var a=this.get(0);if(!a.isReady)return this;a.player.playVideo();a.state=1;b(a).css("background-image","none");return this},stop:function(){this.get(0).player.stopVideo();return this},pause:function(){var a=this.get(0);
a.player.pauseVideo();a.state=2;return this},seekTo:function(a){this.get(0).player.seekTo(a,!0);return this},setVolume:function(a){var b=this.get(0);b.opt.vol=a;b.player.setVolume(a);return this},mute:function(){var a=this.get(0);a.player.mute();a.player.setVolume(0);var c=b.Event("YTPMuted");c.time=a.currentTime;a.canTrigger&&b(a).trigger(c);return this},unmute:function(){var a=this.get(0);a.player.unMute();a.player.setVolume(a.opt.vol);var c=b.Event("YTPUnmuted");c.time=a.currentTime;a.canTrigger&&
b(a).trigger(c);return this},checkForState:function(a){b.contains(document,a)?(a.preventTrigger=!0,a.state=2,a.opt.mute&&b(a).ThemifyYTBMute(),a.player.seekTo(a.opt.startAt?a.opt.startAt:1,!0)):b(a).ThemifyYTBPlayerDestroy()},getTime:function(){return b.themify_ytb.formatTime(this.get(0).currentTime)},getTotalTime:function(){return b.themify_ytb.formatTime(this.get(0).totalTime)},setAlign:function(a){this.optimizeDisplay(a)},getAlign:function(){return this.get(0).opt.align},formatTime:function(a){var b=
Math.floor(a/60);a=Math.floor(a-60*b);return(9>=b?"0"+b:b)+" : "+(9>=a?"0"+a:a)}};b.fn.optimizeDisplay=function(a){var c=this.get(0);c.opt.align=a||c.opt.align;c.opt.align="undefined "!==typeof c.opt.align?c.opt.align:"center,center";a=c.opt.align.split(",");if(c.opt.optimizeDisplay){var d=c.wrapper;var e=d.outerWidth();var f=d.outerHeight();d=e+100;var g="16/9"===c.opt.ratio?Math.ceil(.5625*d):Math.ceil(.75*d);var h=-((g-f)/2);var k=0;var l=g<f;l&&(g=f,d="16/9"===c.opt.ratio?Math.floor(16/9*f):Math.floor(4/
3*f),h=0,k=-((d-e)/2));for(var m in a)switch(a[m].replace(/ /g,"")){case "top":h=l?-((g-f)/2):0;break;case "bottom":h=l?0:-(g-f);break;case "left":k=0;break;case "right":k=l?-(d-e):0}}else g=d="100%",k=h=0;b(c.playerEl).css({width:d,height:g,marginTop:h,marginLeft:k})};b.fn.ThemifyYTBPlayer=b.themify_ytb.buildPlayer;b.fn.ThemifyYTBGetPlayer=b.themify_ytb.getPlayer;b.fn.ThemifyYTBGetVideoID=b.themify_ytb.getVideoID;b.fn.ThemifyYTBChangeMovie=b.themify_ytb.changeMovie;b.fn.ThemifyYTBPlayerDestroy=b.themify_ytb.playerDestroy;
b.fn.ThemifyYTBPlay=b.themify_ytb.play;b.fn.ThemifyYTBStop=b.themify_ytb.stop;b.fn.ThemifyYTBPause=b.themify_ytb.pause;b.fn.ThemifyYTBSeekTo=b.themify_ytb.seekTo;b.fn.ThemifyYTBMute=b.themify_ytb.mute;b.fn.ThemifyYTBUnmute=b.themify_ytb.unmute;b.fn.ThemifyYTBSetVolume=b.themify_ytb.setVolume;b.fn.ThemifyYTBGetVideoData=b.themify_ytb.getVideoData;b.fn.ThemifyYTBSetVideoQuality=b.themify_ytb.setVideoQuality;b.fn.ThemifyYTBGetTime=b.themify_ytb.getTime;b.fn.ThemifyYTBGetTotalTime=b.themify_ytb.getTotalTime;
b.fn.ThemifyYTBSetAlign=b.themify_ytb.setAlign;b.fn.ThemifyYTBGetAlign=b.themify_ytb.getAlign})(jQuery,ytp);

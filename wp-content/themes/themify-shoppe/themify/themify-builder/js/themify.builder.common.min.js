var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,k,m){c instanceof String&&(c=String(c));for(var n=c.length,a=0;a<n;a++){var b=c[a];if(k.call(m,b,a,c))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,k,m){c!=Array.prototype&&c!=Object.prototype&&(c[k]=m.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,k,m,n){if(k){m=$jscomp.global;c=c.split(".");for(n=0;n<c.length-1;n++){var a=c[n];a in m||(m[a]={});m=m[a]}c=c[c.length-1];n=m[c];k=k(n);k!=n&&null!=k&&$jscomp.defineProperty(m,c,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,m){return $jscomp.findInternal(this,c,m).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var k=0;return $jscomp.iteratorPrototype(function(){return k<c.length?{done:!1,value:c[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,k){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var m=0,n={next:function(){if(m<c.length){var a=m++;return{value:k(a,c[a]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6-impl","es3");var ThemifyBuilderCommon;
window.top.document!==document?(window.wp.media=window.top.wp.media,MediaElementPlayer=window.top.MediaElementPlayer,jQuery.fn.mediaelementplayer=window.top.jQuery(window.top.document).mediaelementplayer,jQuery.ui=window.top.jQuery.ui,jQuery.fn.sortable=window.top.jQuery(window.top.document).sortable,window.wp.mediaelement=window.top.wp.mediaelement,window.tinyMCE=window.top.tinyMCE,window.tinyMCEPreInit=window.top.tinyMCEPreInit,window.tinymce=window.top.tinymce,window.switchEditors=window.top.switchEditors,
top_iframe=window.top.document,void 0===window.self.wp&&(window.self.wp=window.top.wp),void 0===window.self._&&(window.self._=window.top._)):top_iframe=document;
(function(c,k,m,n){ThemifyBuilderCommon={fonts:[],safe_fonts:{},google_fonts:{},loaded_fonts:[],google_fonts_variant:{},loader:null,showLoader:function(a){null===this.loader&&(this.loader=c("#tb_alert",top_iframe));"show"===a?this.loader.addClass("tb_busy").show():"spinhide"===a?this.loader.fadeOut(500,function(){c(this).removeClass("tb_busy")}):("error"!==a&&(a="done"),this.loader.removeClass("tb_busy").addClass("tb_"+a).delay(500).fadeOut(500,function(){c(this).removeClass("tb_"+a)}));themifyBuilder.fonts!=
n&&this.generateVariants(themifyBuilder.fonts.google)},clone:function(a){a=a[0].cloneNode(!0);if("visual"===themifybuilderapp.mode){var b=a.getElementsByTagName("video");if(0<b.length){for(var d=a.getElementsByClassName("big-video-wrap"),e=0,f=b.length;e<f;++e)b[e].pause();e=0;for(f=d.length;e<f;++e)d[e]&&d[e].parentNode.removeChild(d[e])}}return c(a)},generateVariants:function(a){for(var b=0,c=a.length;b<c&&""!=a[b]&&" "!=a[b];++b)this.google_fonts_variant[a[b].value]=a[b].variant},Clipboard:{key:"themify_builder_clipboard_",
is_available:null,storageAvailable:function(a){if(null===this.is_available)try{var b=k[a];b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");this.is_available=!0}catch(d){this.is_available=!1,alert(themifyBuilder.i18n.text_no_localStorage)}return this.is_available},set:function(a,b){if(this.storageAvailable("localStorage")){var c={};c[a]=b;localStorage.setItem(this.key+"content",JSON.stringify(c));return!0}return!1},get:function(a){if(this.storageAvailable("localStorage")){var b=
JSON.parse(localStorage.getItem(this.key+"content"));return b[a]!==n?b[a]:!1}return!1}},confirmDataPaste:function(){return confirm(themifyBuilder.i18n.text_confirm_data_paste)},alertWrongPaste:function(){alert(themifyBuilder.i18n.text_alert_wrong_paste)},detectBuilderComponent:function(a){return a.data("component")||a.attr("data-component")||!1},getCheckedRadioInGroup:function(a,b){"undefined"===typeof b&&(b=null);var d=a.prop("name");return c('input:radio[name="'+d+'"]:checked',b)},loadGoogleFonts:function(a,
b){b=b||!1;a=c.unique(a.split("|"));for(var d=[],e=this,f=0,h=a.length;f<h;++f)if(a[f]&&-1===this.loaded_fonts.indexOf(a[f])&&-1===d.indexOf(a[f])){var g=a[f].split(":"),l=parseInt(g[1])||"regular"===g[1]||"italic"===g[1]?g[1]:"400,700";d.push(g[0].split(" ").join("+")+":"+l+":latin,latin-ext")}0<d.length&&(a=null,d={google:{families:d},fontloading:function(a,b){-1===e.loaded_fonts.indexOf(a)&&e.loaded_fonts.push(a)},fontinactive:function(a,b){-1===e.loaded_fonts.indexOf(a)&&e.loaded_fonts.push(a)}},
WebFont.load(d),b&&(d.context=b,WebFont.load(d)))},autoComplete:function(a){var b=c(".themify_tax_autocomplete",a);if(0<b.length){var d=[];b.each(function(){var a=c(this),b=a.closest(".tb_input").find("input.query_category_multiple"),h=b.val();c(this).autocomplete({minLength:2,source:function(b,d){var e=c.trim(b.term);c.getJSON(themifyBuilder.ajaxurl,{term:c.trim(e),tax:a.data("tax"),action:a.data("action")},function(a,b,c){d(a)})},select:function(a,c){b.val(c.item.value);this.value=c.item.label;
return!1}}).focus(function(){c(this).autocomplete("search");return!1});if(h&&"undefined"!==h){var g={};g[a.data("tax")]=h;d.push(g)}else b.val("")});0<d.length&&c.ajax({url:themifyBuilder.ajaxurl,type:"POST",dataType:"json",data:{data:d,action:"themify_builder_get_tax_data"},success:function(b){if(b)for(var d in b)c("#themify_search_cat_"+b[d].tax,a).val(b[d].val)}})}},updateFontVariant:function(a,b){if(a in ThemifyBuilderCommon.google_fonts_variant&&n!=b&&b.length){var c=ThemifyBuilderCommon.google_fonts_variant[a],
e="",f=b[0].querySelector("select").getAttribute("data_value");null===f&&(f="regular");for(var h=0,g=c.length;h<g;++h){var l="normal";if("regular"===c[h])var k=400;else"italic"===c[h]?(k=400,l="italic"):-1!==c[h].indexOf("italic")?(l="italic",k=parseInt(c[h].replace("italic",""))):k=parseInt(c[h]);e+="<option data-font-style='"+l+"'data-font-weight ='"+k+"'value='"+c[h]+"'"+(c[h]==f?"selected":"")+" >"+c[h]+"</option>"}b[0].classList.remove("disable-font-weight");b[0].querySelector("select").innerHTML=
e}else b.length&&b[0].classList.add("disable-font-weight")},fontPreview:function(a){function b(a){var b=a.comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div");b.on("comboselect:close",function(){c(".tb_font_preview",top_iframe).hide()}).on("click.item",
".themify-combo-item",function(b){var d=c(this).data("value");d&&-1===c.inArray(d,e.loaded_fonts)&&"webfont"!==a.find('option[value="'+d+'"]').data("type")&&WebFont.load({classes:!1,google:{families:[d]},fontloading:function(a,b){e.loaded_fonts.push(d)},fontinactive:function(a,b){e.loaded_fonts.push(d)}})}).trigger("focusin");c(".themify-combo-item",b).unbind("hover").hover(function(){var f=c(this).data("value");if(f&&c(this).is(":visible")){var g=b.next(".tb_font_preview");"default"===f&&(f="inherit");
g.css({top:c(this).position().top+30,"font-family":f,display:"block"});if("inherit"!==f&&!c(this).hasClass("tb_font_loaded")){var h=c(this),l=h.index();h.addClass("tb_font_loaded");g=g.children("span");-1===c.inArray(f,e.fonts)&&(g.addClass("themify_show_wait"),"webfont"!==a.find('option[value="'+f+'"]').data("type")?WebFont.load({classes:!1,context:k.top,google:{families:[f]},fontloading:function(a,b){e.fonts.push(f);g.removeClass("themify_show_wait")},fontinactive:function(a,b){e.fonts.push(f);
g.removeClass("themify_show_wait")}}):(e.fonts.push(f),g.removeClass("themify_show_wait")));d(l,f,g)}}})}function d(a,b){c(".themify-combo-dropdown",top_iframe).find("li:eq("+a+")").addClass("tb_font_loaded").css("font-family",b)}var e=ThemifyBuilderCommon;setTimeout(function(){e.autoComplete(a)},100);var f="",h="";if(0===Object.keys(e.safe_fonts).length){for(var g=themifyBuilder.fonts.safe,l=0,m=g.length;l<m;++l)""!==g[l].value&&"default"!==g[l].value&&(e.safe_fonts[g[l].value]=g[l].name);g=themifyBuilder.fonts.google;
l=0;for(m=g.length;l<m;++l)""!==g[l].value&&"default"!==g[l].value&&(e.google_fonts[g[l].value]=g[l].name);delete themifyBuilder.fonts}a.find(".font-family-select").each(function(){var a=c(this).data("selected"),d=c(this).find("optgroup");c(this).parent(".tb_font_preview_wrapper").one("focusin",function(){if(!f){for(var g in e.safe_fonts){var l=a===g?'selected="selected"':"";f+="<option "+l+' data-type="webfont" value="'+g+'">'+e.safe_fonts[g]+"</option>"}for(g in e.google_fonts)l=a===g?'selected="selected"':
"",h+="<option "+l+' value="'+g+'">'+e.google_fonts[g]+"</option>"}d[0].insertAdjacentHTML("beforeend",f);d.last()[0].insertAdjacentHTML("beforeend",h);b(c(this).children("select"));themifybuilderapp.hasChanged=!0});c(this).on("change.select",function(){ThemifyBuilderCommon.updateFontVariant(c(this).val(),c(this).closest(".tb_field").next(".tb_field:has(.font-weight-select)"))});a&&(e.safe_fonts[a]?d[0].insertAdjacentHTML("beforeend",'<option selected="selected" data-type="webfont" value="'+a+'">'+
e.safe_fonts[a]+"</option>"):e.google_fonts[a]&&d.last()[0].insertAdjacentHTML("beforeend",'<option selected="selected" value="'+a+'">'+e.google_fonts[a]+"</option>"));ThemifyBuilderCommon.updateFontVariant(a,c(this).closest(".tb_field").next(".tb_field:has(.font-weight-select)"))});if(0<e.fonts.length){var g=c(".themify-combo-dropdown").first(),n;for(n in e.fonts)l=g.find('[data-value="'+e.fonts[n]+'"]').index(),d(l,e.fonts[n])}c(".themify-combo-arrow",top_iframe).unbind("click").click(function(){c(".tb_font_preview",
top_iframe).hide()})},Lightbox:{$lightbox:null,rememberedRow:null,rememberedCid:null,setup:function(){var a="true"===themifyBuilder.isThemifyTheme?"is-themify-theme":"is-not-themify-theme",a=wp.template("builder_lightbox")({is_themify_theme:a});top_iframe.body.insertAdjacentHTML("beforeend",a);this.$lightbox=c("#tb_lightbox_parent",top_iframe);this.bindEvents()},bindEvents:function(){var a=ThemifyBuilderCommon.Lightbox,b="true"===themifyBuilder.isTouch?"touchend":"click";SimpleBar.removeObserver();
a.$lightbox.on(b,".tb_options_tab li,.tb_tabs>ul li",a.switchTabs).on(b,".tb_close_lightbox",a.cancel).on(b,".reset-styling",a.resetStyling).on("change",".tb_option_radio_enable input",a.clickRadioOption).on("change",".tb_option_checkbox_enable input",a.clickCheckboxOption).on("change",".border_style",a.hideShowBorder).on(b,".tb_icon_radio label",a.bindStylingToggles).on(b,".tb_style_toggle",a.bindStylingRows).one("themify_opened_lightbox",a.resizable.init.bind(a.resizable));themifyBuilder.disableShortcuts||
a.controlByKeyInput();if("visual"===themifybuilderapp.mode)a.$lightbox.on(b,".builder_cancel_docked_mode",function(b){b.preventDefault();b.stopPropagation();a.dockMode.close(!0);c(m).trigger("mouseup")});a.responsiveTabs()},adjustHeight:function(a){this.$lightbox.find("#tb_lightbox_container").css("height",a-55)},getLightboxStorageKey:function(){return"visual"===themifybuilderapp.mode?"themify_builder_lightbox_frontend_pos_size":"themify_builder_lightbox_backend_pos_size"},getLightboxStorage:function(){var a=
localStorage.getItem(this.getLightboxStorageKey())||"{}";return JSON.parse(a)},updateLightboxStorage:function(a){var b=this.getLightboxStorage(),c;(c=_.extend(b,a))&&localStorage.setItem(this.getLightboxStorageKey(),JSON.stringify(c))},resizable:{$el:"",w:"",h:"",x:"",y:"",axis:"",overlay:!1,minWidth:500,maxWidth:880,minHeight:320,maxHeight:800,init:function(){var a=this,b=ThemifyBuilderCommon.Lightbox,d=c("body",top_iframe),e=function(e,f){if(f!==n&&e&&e.target.classList.contains("builder-lightbox"))switch(e.type){case "dragstart":d.addClass("themify_lightbox_drag");
b.fixContainment();break;case "dragstop":d.removeClass("themify_lightbox_drag"),b.fixContainment(),"visual"===themifybuilderapp.mode&&c(m).trigger("mouseup"),a.remember();case "drag":b.dockMode.drag(e)}};this.$el=b.$lightbox;a.$el.draggable({handle:a.$el.find(".tb_lightbox_top_bar"),scroll:!1,start:e,drag:e,stop:e});"visual"===themifybuilderapp.mode&&(this.tb_resizable_overlay=this.$el.prev(".tb_resizable_overlay"));for(var e=this.$el[0].getElementsByClassName("tb_resizable"),f=0,h=e.length;f<h;++f)e[f].addEventListener("mousedown",
function(b){1===b.which&&(b.preventDefault(),a.x=b.clientX,a.y=b.clientY,a.w=parseInt(a.$el.outerWidth(),10),a.h=parseInt(a.$el.outerHeight(),10),a.axis=this.classList.contains("tb_resizable-se")?"both":this.classList.contains("tb_resizable-s")?"y":this.classList.contains("tb_resizable-w")?"w":"x",a.tb_resizable_overlay&&a.tb_resizable_overlay.show(),a.$el.addClass("tb_resizing"),top_iframe.addEventListener("mousemove",a.resize,!1),top_iframe.addEventListener("mouseup",a.stop,!1),"w"===a.axis&&(d.addClass("tb_start_animate"),
Themify.body.addClass("tb_start_animate")))},!1);Themify.body.on("editing_module_option",a.setupLightboxSizeClass)},remember:function(){var a=ThemifyBuilderCommon.Lightbox.resizable,b=a.$el.position(),d=ThemifyBuilderCommon.Lightbox.dockMode.get(),e=ThemifyBuilderCommon.Lightbox.getLightboxStorage(),b={top:b.top,left:b.left,width:d&&e?e.width:a.$el.outerWidth(),height:d&&e?e.height:a.$el.outerHeight()};d&&(b.dockedWidth=a.$el.outerWidth());ThemifyBuilderCommon.Lightbox.updateLightboxStorage(b);c("body").trigger("themify_builder_resize_lightbox")},
setupLightboxSizeClass:function(){var a=ThemifyBuilderCommon.Lightbox.resizable;a.$el.toggleClass("larger-lightbox",750<parseInt(a.$el.width()))},resize:function(a){var b=ThemifyBuilderCommon.Lightbox.resizable,d=b.w+a.clientX-b.x,e=b.h+a.clientY-b.y;"w"===b.axis?(d=b.x+b.w-a.clientX,300<=d&&d<=b.maxWidth&&(b.$el.width(d),b.setupLightboxSizeClass(),ThemifyBuilderCommon.Lightbox.dockMode.resize(a))):(("both"===b.axis||"x"===b.axis)&&d>=b.minWidth&&d<=b.maxWidth&&(b.$el.width(d),b.setupLightboxSizeClass()),
("both"===b.axis||"y"===b.axis)&&e>=b.minHeight&&e<=b.maxHeight&&(b.$el.height(e),ThemifyBuilderCommon.Lightbox.adjustHeight(b.$el.height())));c("body").trigger("themify_builder_resize_lightbox")},stop:function(a){a=ThemifyBuilderCommon.Lightbox;var b=a.resizable;b.tb_resizable_overlay&&b.tb_resizable_overlay.hide();b.$el.removeClass("tb_resizing");top_iframe.removeEventListener("mousemove",b.resize,!1);top_iframe.removeEventListener("mouseup",b.stop,!1);a.fixContainment();b.remember();a.dockMode.resize("stop");
Themify.body.trigger("themify_builder_lightbox_resize");"w"===b.axis&&(a=c("body",top_iframe),a=a.add("body"),a.removeClass("tb_start_animate"))}},fixContainment:function(){var a=ThemifyBuilderCommon.Lightbox,b=a.$lightbox.outerWidth(),d=c(k.top).width(),e=c(k.top).height(),b=[-b+20,0,d-20,e-30],d=a.$lightbox.position(),e={};d.left<b[0]&&(e.left=b[0]);0>d.top&&(e.top=0);d.left>b[2]&&(e.left=b[2]);d.top>b[3]&&(e.top=b[3]);a.$lightbox.css(e)},open:function(a,b,d){var e=ThemifyBuilderCommon.Lightbox,
f=c("#tb_lightbox_container",e.$lightbox);c("#tb_overlay").show();ThemifyBuilderCommon.showLoader("show");"inline"===a.loadMethod?(a=ThemifyBuilderCommon.templateCache.get("tmpl-"+a.templateID),e.openCallback(a,f,b,d)):"html"===a.loadMethod?e.openCallback(a.data,f,b,d):(a.data=_.extend(a.data||{},{nonce:themifyBuilder.tb_load_nonce}),a=_.defaults(a||{},{type:"POST",url:themifyBuilder.ajaxurl}),c.ajax(a).done(function(a){e.openCallback(a,f,b,d);a=c(f).find(".tb_options_tab_wrapper");0<a.length&&new SimpleBar(a[0])}))},
openCallback:function(a,b,d,e){themifybuilderapp.undoManager.disable();var f=ThemifyBuilderCommon.Lightbox,h={top:100,left:Math.max(0,c(k.top).width()/2-300),width:600,height:500};_.extend(h,f.getLightboxStorage());a=c(a);var g=a.find("#tb_lightbox_options_tab_items");0<g.length&&(f.$lightbox[0].getElementsByClassName("tb_options_tab")[0].innerHTML=g[0].innerHTML,g.remove());g=a.find("#tb_lightbox_actions_items");0<g.length?(f.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0].innerHTML=
g[0].innerHTML,g.remove()):f.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0].innerHTML="";"function"===typeof d&&d.call(f,a[0]);b.html(a[0]);"function"===typeof e&&e.call(f,a[0]);f.$lightbox.addClass("tb_show_start").show().css(h);f.dockMode.setDoc();f.fixContainment();ThemifyBuilderCommon.showLoader("spinhide");if(!themifyBuilder.disableShortcuts)c(m).off("keyup",f.cancelKeyListener).on("keyup",f.cancelKeyListener);f.adjustHeight(h.height);f.$lightbox.removeClass("tb_show_start").trigger("themify_opened_lightbox")},
close:function(a){function b(){a||(d._cleanLightBoxContent(),c(this).removeClass("animated fadeOut"),d.$lightbox.hide(),themifybuilderapp.toolbar.Panel.resetPanel());themifybuilderapp.activeModel&&(themifybuilderapp.activeModel.unset("styleClicked",{silent:!0}),themifybuilderapp.activeModel.unset("visibileClicked",{silent:!0}));a||themifybuilderapp.undoManager.updateUndoBtns();Themify.body.trigger("themify_builder_lightbox_close");"visual"===themifybuilderapp.mode&&k.top.jQuery("body").trigger("themify_builder_lightbox_close");
a||(d.dockMode.close(!1,!0),themifybuilderapp.autoSaveCid=null)}var d=ThemifyBuilderCommon.Lightbox;a?b():(Themify.body.trigger("themify_builder_lightbox_before_close"),d.$lightbox.fadeOut(b))},dockMode:{key:"themify_builder_docked",workspace:c(".tb_workspace_container",top_iframe.body),isDocked:null,defaultWidth:380,dockOut:0,checkIsVisual:function(){return"visual"===themifybuilderapp.mode},set:function(a,b){!b&&localStorage.setItem(this.key,a);this.isDocked=a;Themify.body.trigger("themify_builder_resize_lightbox")},
get:function(){return this.isDocked||"true"===localStorage.getItem(this.key)},setStyleRowToggle:function(){var a=ThemifyBuilderCommon.Lightbox;var b=themifybuilderapp.activeModel?themifybuilderapp.activeModel.get("elType"):!1;var c="module"===b?a.$lightbox[0].getElementsByClassName("tb_tab"):!1;if("module"===b&&0<c.length)for(var e=0,f=c.length;e<f;++e){if(b=c[e].getElementsByClassName("tb_style_toggle"),2<b.length){for(var a=0,h=b.length;a<h;++a)b[a].classList.add("tb_closed");b=c[e].getElementsByClassName("tb_field");
a=0;for(h=b.length;a<h;++a)b[a].classList.add("tb_field_expanded")}}else if(b){b=a.$lightbox[0].getElementsByClassName("tb_style_toggle");e=0;for(f=b.length;e<f;++e)b[e].classList.add("tb_closed");b=a.$lightbox.find("#tb_options_styling")[0].getElementsByClassName("tb_field");e=0;for(f=b.length;e<f;++e)b[e].getAttribute("id"),b[e].classList.contains("custom_css_column")||b[e].classList.contains("custom_css_subrow")||b[e].classList.contains("reset-styling")||b[e].classList.add("tb_field_expanded")}},
setDoc:function(){this.checkIsVisual()&&this.get()&&(top_iframe.body.classList.add("tb_module_panel_docked"),this.setDefaultWidth(),this.setWidth(),this.onResize(),c(k.top).off("tfsmartresize.docked").on("tfsmartresize.docked",function(){this.resize();this.onResize()}.bind(this)),Themify.body.off("themify_builder_change_mode.docked").on("themify_builder_change_mode.docked",function(a,b,c){this.setWidth();"desktop"!==c&&"desktop"===b&&setTimeout(function(){themifybuilderapp.toolbar.$el.width()!==top_iframe.documentElement.clientWidth&&
(this.setWidth(),this.onResize())}.bind(this),500)}.bind(this)),Themify.body.trigger("themify_builder_resize_lightbox"));this.setStyleRowToggle()},setDefaultWidth:function(){var a=ThemifyBuilderCommon.Lightbox,b=a.getLightboxStorage(),c=this.defaultWidth;b&&b.dockedWidth&&(c=b.dockedWidth);a.$lightbox.css("width",c);Themify.body.trigger("themify_builder_resize_lightbox")},setWidth:function(){var a=(top_iframe.documentElement.clientWidth||top_iframe.body.clientWidth)-ThemifyBuilderCommon.Lightbox.$lightbox.css("height",
"").width();themifybuilderapp.toolbar.$el.css("width",a);this.workspace.css("width",a);"tablet_landscape"===themifybuilderapp.activeBreakPoint&&themifybuilderapp.Utils.getBPWidth(themifybuilderapp.activeBreakPoint)-1>a&&this.workspace.find(".tb_iframe").css("width",a)},resize:function(a){this.checkIsVisual()&&this.get()&&(this.setWidth(),"stop"===a&&this.onResize())},onResize:function(){themifybuilderapp.Utils._onResize(!0)},drag:function(a){this.checkIsVisual()&&((top_iframe.body.classList.toggle("themify-dock-highlight",
"drag"===a.type&&a.pageX+20>=k.top.innerWidth),a.pageX+20>=k.top.innerWidth&&"dragstop"===a.type)?(this.set(!0),this.setDoc()):this.get()&&(this.dockOut?this.dockOut&&"dragstop"===a.type?this.dockOut=0:50<this.dockOut-a.clientX&&(this.close(),this.dockOut=0,c(m).trigger("mouseup")):this.dockOut=a.clientX))},close:function(a,b){if(this.checkIsVisual()&&this.get()){var d=ThemifyBuilderCommon.Lightbox,e=d.getLightboxStorage(),e={width:e.width?e.width:d.resizable.minWidth,height:e.height?e.height:d.resizable.minHeight};
a&&(e.top=k.top.innerHeight/2-d.$lightbox.innerHeight()/2,e.left=k.top.innerWidth/2-d.$lightbox.innerWidth()/2);d.$lightbox.css(e);this.set(!1,b);top_iframe.body.classList.remove("tb_module_panel_docked");themifybuilderapp.toolbar.$el.css("width","");this.workspace.css("width","");this.onResize();c(k.top).off("tfsmartresize.docked");Themify.body.off("themify_builder_change_mode.docked")}}},_cleanLightBoxContent:function(){this.forgetRow();this.$lightbox.find(".tb_options_tab").empty();this.$lightbox.find(".tb_lightbox_actions_wrap").empty()},
controlByKeyInput:function(){function a(a){83!==a.which||"INPUT"===m.activeElement.tagName||"TEXTAREA"===m.activeElement.tagName||!0!==a.ctrlKey&&!0!==a.metaKey||(a.preventDefault(),a.stopPropagation(),a=c(".builder_save_button",top_iframe),0<a.length?a.trigger("click"):themifybuilderapp.toolbar.$el.find(".tb_toolbar_save").trigger("click"))}c(m).on("keydown",a);if("visual"===themifybuilderapp.mode)c(top_iframe).on("keydown",a)},rememberRow:function(){this.rememberedRow=ThemifyBuilderCommon.clone(c(".tb_element_cid_"+
themifybuilderapp.activeModel.cid));this.rememberedCid=themifybuilderapp.activeModel.cid},revertToRememberedRow:function(){if(themifybuilderapp.hasChanged){var a=themifybuilderapp.Models.Registry.lookup(this.rememberedCid);if(a){var b=a.get("elType");"subrow"!==b&&"column"!==b&&a.trigger("custom:restorehtml",this.rememberedRow)}}this.forgetRow()},forgetRow:function(){this.rememberedRow=this.rememberedCid=null},clickRadioOption:function(a,b){b=b?b:c(this);for(var d=b[0].classList.contains("tb_radio_dnd")?
b.closest(".tb_repeatable_field_content"):ThemifyBuilderCommon.Lightbox.$lightbox,e=ThemifyBuilderCommon.getCheckedRadioInGroup(b,d),f=d[0].querySelectorAll('input[name="'+e.prop("name")+'"]'),e=e.data("selected"),h=0,g=f.length;h<g;++h){var l=d[0].getElementsByClassName("tb_group_element_"+f[h].value);for(var k=0,m=l.length;k<m;++k)l[k].style.display="none"}c("."+e,d).show();l=d[0].querySelectorAll("[data-binding]");h=0;for(g=l.length;h<g;++h)d=c(l[h]),d.is(":visible")&&themifybuilderapp.Mixins.Common.doTheBinding(d,
d.val())},clickCheckboxOption:function(a,b){b=b?b:c(this);for(var d=b[0].classList.contains("tb_radio_dnd")?b.closest(".tb_repeatable_field_content"):ThemifyBuilderCommon.Lightbox.$lightbox,e=d[0].getElementsByClassName("tb-checkbox_element"),f=0,h=e.length;f<h;++f)e[f].style.display="none";f=b.parent(".themify-checkbox");e=f[0].classList.contains("tb_option_checkbox_revert")?f.find("input:not(:checked)"):f.find("input:checked");f=null;e.each(function(){for(var a=d[0].getElementsByClassName(this.dataset.selected),
b=0,c=a.length;b<c;++b)a[b].style.display="inherit"})},bindStylingToggles:function(a){var b=c(this).prev("input"),d=!b.hasClass("no_togglable");b.is(":checked")&&d&&(a.stopPropagation(),a.preventDefault(),b.prop("checked",!1).trigger("change"));themifybuilderapp.hasChanged=!0},bindStylingRows:function(a){a.preventDefault();a=c(this).nextUntil(".tb_style_toggle");a=a.filter(function(){return!c(this).find(".reset-styling, #custom_css_column, #custom_css_subrow").length});this.classList.contains("tb_closed")?
(this.classList.remove("tb_closed"),a.removeClass("tb_field_expanded")):(this.classList.add("tb_closed"),a.addClass("tb_field_expanded"))},hideShowBorder:function(a,b){if(!a||!a.isTrigger){b||(b=c(this));var d=b.closest(".selectwrapper").siblings(".tb_border_wrapper");"none"===b.val()?d.css("display","none"):d.css("display","")}},cancelKeyListener:function(a){var b=ThemifyBuilderCommon.Lightbox;27===a.keyCode&&(a.preventDefault(),b.cancel(a))},cancel:function(a){a.preventDefault();a=ThemifyBuilderCommon.Lightbox;
null!==a.rememberedCid&&a.revertToRememberedRow();a.close()},resetStyling:function(a){a.preventDefault();a.stopPropagation();themifybuilderapp.hasChanged=!0;a=c("#tb_options_styling",ThemifyBuilderCommon.Lightbox.$lightbox);for(var b=a[0].querySelectorAll(".tb_lb_option:not(.exclude-from-reset-field)"),d=0,e=b.length;d<e;++d){var f=b[d].classList,h=c(b[d]),g=h.val();if("px"!==g&&"solid"!==g&&"default"!==g&&"linear"!==g&&"n"!==g)if(f.contains("tb_radio_input_container"))h=b[d].getAttribute("id"),f.contains("tb_icon_radio")?
a.find('[name="'+h+'"]:checked').next("label").trigger("click"):(f=a.find('[name="'+h+'"]').first(),f.is(":checked")||f.prop("checked",!0).trigger("change"));else if(f.contains("tb_uploader_input"))g&&h.val("").trigger("change").parent().find(".img-placeholder").empty();else if(f.contains("minicolors-input"))g&&(f=h.val("").attr("data-opacity","").data("opacity","").parent(".minicolors"),f.find(".minicolors-swatch-color").css({opacity:"",backgroundColor:""}),f.next(".color_opacity").val(""),"visual"===
themifybuilderapp.mode?Themify.body.trigger("themify_builder_color_picker_change",[h.prop("id"),h,""]):h.trigger("change")),h.siblings(".tb_clear_btn").hide();else if(g&&"SELECT"===b[d].tagName){if(f.contains("font-family-select"))h.val("default");else if(f.contains("tb_unit"))h.val("px");else{var l=h.prop("id");if("repeat"===g&&"background_repeat"===l||"scroll"===g&&"background_attachment"===l||"left top"===g&&"background_position"===l)continue;h.find("option").first().prop("selected",!0)}f.contains("themify-gradient-type")||
h.trigger("change")}else f.contains("themify-layout-icon")?(f=h.find(".tfl-icon").first(),f[0].classList.contains("selected")||f.trigger("click")):g&&(h.val(""),(!f.contains("themify-gradient")&&!f.contains("themify-gradient-angle")||h.closest(".themify-gradient-container").is(":visible"))&&h.trigger(f.contains("tb_range")?"keyup":"change"))}},switchTabs:function(a){var b=ThemifyBuilderCommon.Lightbox;a.preventDefault();a.stopPropagation();a=c(this).find("a").attr("href");b=b.$lightbox.find(a);b[0]!==
n&&(c(this).addClass("current").siblings().removeClass("current"),b[0].SimpleBar===n&&0<c(this).closest(".tb_options_tab").length&&new SimpleBar(b[0]),b.show().siblings(".tb_options_tab_wrapper,.tb_tab").hide(),Themify.body.trigger("themify_builder_tabsactive",[a,b]),"visual"===themifybuilderapp.mode&&c(m).trigger("mouseup"))},responsiveTabs:function(){var a,b,d,e,f,h=function(){a=a||c(".tb_tabs",d);if(a.length){if(!f){var b=a.find("> ul > li").last();f=b.offset().left+b.outerWidth()-a.offset().left;
c(".tb_ui_dropdown_label",a).text(a.find("li.current").text())}e=a.innerWidth()<=f;a.children("ul").toggleClass("tb_ui_dropdown_items",e);a.toggleClass("tb_compact_tabs",e)}};c("body").on("themify_builder_tabsactive themify_builder_resize_lightbox",function(e,f,k){b=b||f;d=d||k;"themify_builder_tabsactive"===e.type&&a&&/^#tb_module-styling_/.test(f)?c(".tb_ui_dropdown_label",a).text(c('[href="'+f+'"]',a).text()):d&&"#tb_options_styling"===b&&setTimeout(h,1)}).on("themify_builder_lightbox_close",function(){a=
b=d=e=f=null})}},LiteLightbox:{modal:new wp.media.view.Modal({controller:{trigger:function(){}}}),confirmView:Backbone.View.extend({template:wp.template("builder_lite_lightbox_confirm"),className:"tb_lite_lightbox_content",initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template({message:this.options.message,buttons:this.options.buttons}))},events:{"click button":"buttonClick"},buttonClick:function(a){a.preventDefault();a=c(a.currentTarget).data("type");this.trigger("litelightbox:confirm",
a)}}),promptView:Backbone.View.extend({template:wp.template("builder_lite_lightbox_prompt"),className:"tb_lite_lightbox_content",initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template(this.options))},events:{"click button":"buttonClick","keypress .tb_litelightbox_prompt_input":"keyPress"},buttonClick:function(a){a.preventDefault();a=c(a.currentTarget).data("type");var b=this.$el.find(".tb_litelightbox_prompt_input").val();this.trigger("litelightbox:prompt",a,b)},
keyPress:function(a){13===a.which&&(a=c(a.currentTarget).val(),this.trigger("litelightbox:prompt","ok",a))}}),confirm:function(a,b,d){d=_.defaults(d||{},{buttons:{no:{label:"No"},yes:{label:"Yes"}}});d.message=a;a=new ThemifyBuilderCommon.LiteLightbox.confirmView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();a.on("litelightbox:confirm",function(a){ThemifyBuilderCommon.LiteLightbox.modal.close();c.isFunction(b)&&b.call(this,a)})},prompt:function(a,
b,d){d=_.defaults(d||{},{buttons:{cancel:{label:"Cancel"},ok:{label:"OK"}}});d.message=a;a=new ThemifyBuilderCommon.LiteLightbox.promptView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();a.on("litelightbox:prompt",function(a,d){ThemifyBuilderCommon.LiteLightbox.modal.close();c.isFunction(b)&&b.call(this,"cancel"===a?null:d)})},alert:function(a){ThemifyBuilderCommon.LiteLightbox.confirm(a,null,{buttons:{yes:{label:"OK"}}})}},templateCache:{templates:[],
get:function(a){if(this.templates[a]===n){var b=m.getElementById(a);this.templates[a]=b.innerHTML;setTimeout(function(){b.parentNode.removeChild(b)},6E3)}return this.templates[a]}},isImageUrl:function(a){if("undefined"===typeof a||""==a)return!1;a=a.split("?")[0];a=a.split(".");return-1!=="jpg jpeg tiff png gif bmp svg".split(" ").indexOf(a[a.length-1])?!0:!1}}})(jQuery,window,document);

!function(e,t){function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){for(var n,r=0;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);for(;"*"===l[0];)l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){for(var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("﻿ ")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=b(o);var _={};b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;!function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){for(var r;(r=b.inArray(t,u,r))>-1;)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,u,l,t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,a=0,s=b(this),u=t,l=e.match(w)||[];o=l[a++];)u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o);else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)):void 0}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;return e&&3!==u&&8!==u&&2!==u?typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)for(;n=o[i++];)r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)
}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){for(r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;l--;)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){for(t=(t||"").match(w)||[""],l=t.length;l--;)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(l=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=b.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;u--;)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=i.preFilter;s;){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r)for(l=mt(y,d),r(l,[],s,u),c=l.length;c--;)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}for(c=y.length;c--;)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r&&!i.relative[e[r].type];r++);return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){for(g=0;m=t[g++];)m(x,y,u,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}function xt(e,t,n){for(var r=0,i=t.length;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}for(o=U.needsContext.test(e)?0:a.length;o--&&(u=a[o],!i.relative[l=u.type]);)if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}return s(e,p)(r,t,d,n,V.test(e)),n}function Tt(){}var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[x]||(p[x]={}))[e]=[N,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){for(t||(t=ft(e)),n=t.length;n--;)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o},i.pseudos.nth=i.pseudos.eq,i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)
}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&b.cleanData(Ot(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,r=0,i=[],o=b(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody)for(o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(b.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={};u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||o.documentElement;e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position");)e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?(this._wrapped=obj,void 0):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.5.1";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)},_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0
}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.where=function(obj,attrs,first){return _.isEmpty(attrs)?first?void 0:[]:_[first?"find":"filter"](obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return!1;return!0})},_.findWhere=function(obj,attrs){return _.where(obj,attrs,!0)},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0,value:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0,value:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index<right.index?-1:1}),"value")};var group=function(behavior){return function(obj,value,context){var result={},iterator=null==value?_.identity:lookupIterator(value);return each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=null==iterator?_.identity:lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date;previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var result,timeout=null;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return function(){var args=[func];return push.apply(args,arguments),wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var Backbone,root=this,previousBackbone=root.Backbone,slice=Array.prototype.slice,splice=Array.prototype.splice;Backbone="undefined"!=typeof exports?exports:root.Backbone={},Backbone.VERSION="0.9.2";var _=root._;_||"undefined"==typeof require||(_=require("underscore"));var $=root.jQuery||root.Zepto||root.ender;Backbone.setDomLibrary=function(lib){$=lib},Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var eventSplitter=/\s+/,Events=Backbone.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback)return this;for(events=events.split(eventSplitter),calls=this._callbacks||(this._callbacks={});event=events.shift();)list=calls[event],node=list?list.tail:{},node.next=tail={},node.context=context,node.callback=callback,calls[event]={tail:tail,next:list?list.next:node};return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(calls=this._callbacks){if(!(events||callback||context))return delete this._callbacks,this;for(events=events?events.split(eventSplitter):_.keys(calls);event=events.shift();)if(node=calls[event],delete calls[event],node&&(callback||context))for(tail=node.tail;(node=node.next)!==tail;)cb=node.callback,ctx=node.context,(callback&&cb!==callback||context&&ctx!==context)&&this.on(event,cb,ctx);return this}},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks))return this;for(all=calls.all,events=events.split(eventSplitter),rest=slice.call(arguments,1);event=events.shift();){if(node=calls[event])for(tail=node.tail;(node=node.next)!==tail;)node.callback.apply(node.context||this,rest);if(node=all)for(tail=node.tail,args=[event].concat(rest);(node=node.next)!==tail;)node.callback.apply(node.context||this,args)}return this}};Events.bind=Events.on,Events.unbind=Events.off;var Model=Backbone.Model=function(attributes,options){var defaults;attributes||(attributes={}),options&&options.parse&&(attributes=this.parse(attributes)),(defaults=getValue(this,"defaults"))&&(attributes=_.extend({},defaults,attributes)),options&&options.collection&&(this.collection=options.collection),this.attributes={},this._escapedAttributes={},this.cid=_.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(attributes,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=_.clone(this.attributes),this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},get:function(attr){return this.attributes[attr]},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.get(attr);return this._escapedAttributes[attr]=_.escape(null==val?"":""+val)},has:function(attr){return null!=this.get(attr)},set:function(key,value,options){var attrs,attr,val;if(_.isObject(key)||null==key?(attrs=key,options=value):(attrs={},attrs[key]=value),options||(options={}),!attrs)return this;if(attrs instanceof Model&&(attrs=attrs.attributes),options.unset)for(attr in attrs)attrs[attr]=void 0;if(!this._validate(attrs,options))return!1;this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);var changes=options.changes={},now=this.attributes,escaped=this._escapedAttributes,prev=this._previousAttributes||{};for(attr in attrs)val=attrs[attr],(!_.isEqual(now[attr],val)||options.unset&&_.has(now,attr))&&(delete escaped[attr],(options.silent?this._silent:changes)[attr]=!0),options.unset?delete now[attr]:now[attr]=val,_.isEqual(prev[attr],val)&&_.has(now,attr)==_.has(prev,attr)?(delete this.changed[attr],delete this._pending[attr]):(this.changed[attr]=val,options.silent||(this._pending[attr]=!0));return options.silent||this.change(options),this},unset:function(attr,options){return(options||(options={})).unset=!0,this.set(attr,null,options)},clear:function(options){return(options||(options={})).unset=!0,this.set(_.clone(this.attributes),options)},fetch:function(options){options=options?_.clone(options):{};var model=this,success=options.success;return options.success=function(resp,status,xhr){return model.set(model.parse(resp,xhr),options)?(success&&success(model,resp),void 0):!1},options.error=Backbone.wrapError(options.error,model,options),(this.sync||Backbone.sync).call(this,"read",this,options)},save:function(key,value,options){var attrs,current;if(_.isObject(key)||null==key?(attrs=key,options=value):(attrs={},attrs[key]=value),options=options?_.clone(options):{},options.wait){if(!this._validate(attrs,options))return!1;current=_.clone(this.attributes)}var silentOptions=_.extend({},options,{silent:!0});if(attrs&&!this.set(attrs,options.wait?silentOptions:options))return!1;var model=this,success=options.success;options.success=function(resp,status,xhr){var serverAttrs=model.parse(resp,xhr);return options.wait&&(delete options.wait,serverAttrs=_.extend(attrs||{},serverAttrs)),model.set(serverAttrs,options)?(success?success(model,resp):model.trigger("sync",model,resp,options),void 0):!1},options.error=Backbone.wrapError(options.error,model,options);var method=this.isNew()?"create":"update",xhr=(this.sync||Backbone.sync).call(this,method,this,options);return options.wait&&this.set(current,silentOptions),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(this.isNew())return triggerDestroy(),!1;options.success=function(resp){options.wait&&triggerDestroy(),success?success(model,resp):model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var xhr=(this.sync||Backbone.sync).call(this,"delete",this,options);return options.wait||triggerDestroy(),xhr},url:function(){var base=getValue(this,"urlRoot")||getValue(this.collection,"url")||urlError();return this.isNew()?base:base+("/"==base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(options){options||(options={});var changing=this._changing;this._changing=!0;for(var attr in this._silent)this._pending[attr]=!0;var changes=_.extend({},options.changes,this._silent);this._silent={};for(var attr in changes)this.trigger("change:"+attr,this,this.get(attr),options);if(changing)return this;for(;!_.isEmpty(this._pending);){this._pending={},this.trigger("change",this,options);for(var attr in this.changed)this._pending[attr]||this._silent[attr]||delete this.changed[attr];this._previousAttributes=_.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(attr){return arguments.length?_.has(this.changed,attr):!_.isEmpty(this.changed)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._previousAttributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return arguments.length&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(attrs,options){if(options.silent||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);return error?(options&&options.error?options.error(this,error,options):this.trigger("error",this,error,options),!1):!0}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,{silent:!0,parse:options.parse})};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={},dups=[];for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,length=models.length;length>i;i++){if(!(model=models[i]=this._prepareModel(models[i],options)))throw new Error("Can't add an invalid model to a collection");cid=model.cid,id=model.id,cids[cid]||this._byCid[cid]||null!=id&&(ids[id]||this._byId[id])?dups.push(i):cids[cid]=ids[id]=model}for(i=dups.length;i--;)models.splice(dups[i],1);for(i=0,length=models.length;length>i;i++)(model=models[i]).on("all",this._onModelEvent,this),this._byCid[model.cid]=model,null!=model.id&&(this._byId[model.id]=model);if(this.length+=length,index=null!=options.at?options.at:this.models.length,splice.apply(this.models,[index,0].concat(models)),this.comparator&&this.sort({silent:!0}),options.silent)return this;for(i=0,length=this.models.length;length>i;i++)cids[(model=this.models[i]).cid]&&(options.index=i,model.trigger("add",model,this,options));return this},remove:function(models,options){var i,l,index,model;for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,l=models.length;l>i;i++)model=this.getByCid(models[i])||this.get(models[i]),model&&(delete this._byId[model.id],delete this._byCid[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,options),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},get:function(id){return null==id?void 0:this._byId[null!=id.id?id.id:id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},where:function(attrs){return _.isEmpty(attrs)?[]:this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},sort:function(options){if(options||(options={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var boundComparator=_.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(boundComparator):this.models.sort(boundComparator),options.silent||this.trigger("reset",this,options),this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){models||(models=[]),options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var collection=this,success=options.success;return options.success=function(resp,status,xhr){collection[options.add?"add":"reset"](collection.parse(resp,xhr),options),success&&success(collection,resp)},options.error=Backbone.wrapError(options.error,collection,options),(this.sync||Backbone.sync).call(this,"read",this,options)},create:function(model,options){var coll=this;if(options=options?_.clone(options):{},model=this._prepareModel(model,options),!model)return!1;options.wait||coll.add(model,options);var success=options.success;return options.success=function(nextModel,resp){options.wait&&coll.add(nextModel,options),success?success(nextModel,resp):nextModel.trigger("sync",model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},chain:function(){return _(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(model,options){if(options||(options={}),model instanceof Model)model.collection||(model.collection=this);else{var attrs=model;options.collection=this,model=new this.model(attrs,options),model._validate(model.attributes,options)||(model=!1)}return model},_removeReference:function(model){this==model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!=event&&"remove"!=event||collection==this)&&("destroy"==event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],this._byId[model.id]=model),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];_.each(methods,function(method){Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},namedParam=/:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){return Backbone.history||(Backbone.history=new History),_.isRegExp(route)||(route=this._routeToRegExp(route)),callback||(callback=this[name]),Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args),this.trigger.apply(this,["route:"+name].concat(args)),Backbone.history.trigger("route",this,name,args)},this)),this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options)},_bindRoutes:function(){if(this.routes){var routes=[];for(var route in this.routes)routes.unshift([route,this.routes[route]]);for(var i=0,l=routes.length;l>i;i++)this.route(routes[i][0],routes[i][1],this[routes[i][1]])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl")},routeStripper=/^[#\/]/,isExplorer=/msie [\w.]+/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location,match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;search&&(fragment+=search)}else fragment=this.getHash();return fragment.indexOf(this.options.root)||(fragment=fragment.substr(this.options.root.length)),fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);oldIE&&(this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;
var loc=window.location,atRoot=loc.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current==this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current==this.fragment?!1:(this.iframe&&this.navigate(current),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0});return matched},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:options});var frag=(fragment||"").replace(routeStripper,"");this.fragment!=frag&&(this._hasPushState?(0!=frag.indexOf(this.options.root)&&(frag=this.options.root+frag),this.fragment=frag,window.history[options.replace?"replaceState":"pushState"]({},document.title,frag)):this._wantsHashChange?(this.fragment=frag,this._updateHash(window.location,frag,options.replace),this.iframe&&frag!=this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,frag,options.replace))):window.location.assign(this.options.root+fragment),options.trigger&&this.loadUrl(fragment))},_updateHash:function(location,fragment,replace){replace?location.replace(location.toString().replace(/(javascript:|#).*$/,"")+"#"+fragment):location.hash=fragment}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(tagName,attributes,content){var el=document.createElement(tagName);return attributes&&$(el).attr(attributes),content&&$(el).html(content),el},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof $?element:$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(events||(events=getValue(this,"events"))){this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),!method)throw new Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.bind(eventName,method):this.$el.delegate(selector,eventName,method)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){this.options&&(options=_.extend({},this.options,options));for(var i=0,l=viewOptions.length;l>i;i++){var attr=viewOptions[i];options[attr]&&(this[attr]=options[attr])}this.options=options},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var attrs=getValue(this,"attributes")||{};this.id&&(attrs.id=this.id),this.className&&(attrs["class"]=this.className),this.setElement(this.make(this.tagName,attrs),!1)}}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);return child.extend=this.extend,child};Model.extend=Collection.extend=Router.extend=View.extend=extend;var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(method,model,options){var type=methodMap[method];options||(options={});var params={type:type,dataType:"json"};return options.url||(params.url=getValue(model,"url")||urlError()),options.data||!model||"create"!=method&&"update"!=method||(params.contentType="application/json",params.data=JSON.stringify(model.toJSON())),Backbone.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),Backbone.emulateHTTP&&("PUT"===type||"DELETE"===type)&&(Backbone.emulateJSON&&(params.data._method=type),params.type="POST",params.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type)}),"GET"===params.type||Backbone.emulateJSON||(params.processData=!1),$.ajax(_.extend(params,options))},Backbone.wrapError=function(onError,originalModel,options){return function(model,resp){resp=model===originalModel?resp:model,onError?onError(originalModel,resp,options):originalModel.trigger("error",originalModel,resp,options)}};var ctor=function(){},inherits=function(parent,protoProps,staticProps){var child;return child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){parent.apply(this,arguments)},_.extend(child,parent),ctor.prototype=parent.prototype,child.prototype=new ctor,protoProps&&_.extend(child.prototype,protoProps),staticProps&&_.extend(child,staticProps),child.prototype.constructor=child,child.__super__=parent.prototype,child},getValue=function(object,prop){return object&&object[prop]?_.isFunction(object[prop])?object[prop]():object[prop]:null},urlError=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(root,factory){if("object"==typeof exports&&exports)factory(exports);else{var mustache={};factory(mustache),"function"==typeof define&&define.amd?define(mustache):root.Mustache=mustache}}(this,function(mustache){function testRegExp(re,string){return RegExp_test.call(re,string)}function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parent){this.view=view||{},this.parent=parent,this._cache={}}function Writer(){this.clearCache()}function renderTokens(tokens,writer,context,template){for(var token,tokenValue,value,buffer="",i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],tokenValue=token[1],token[0]){case"#":if(value=context.lookup(tokenValue),"object"==typeof value)if(isArray(value))for(var j=0,jlen=value.length;jlen>j;++j)buffer+=renderTokens(token[4],writer,context.push(value[j]),template);else value&&(buffer+=renderTokens(token[4],writer,context.push(value),template));else if("function"==typeof value){var text=null==template?null:template.slice(token[3],token[5]);value=value.call(context.view,text,function(template){return writer.render(template,context)}),null!=value&&(buffer+=value)}else value&&(buffer+=renderTokens(token[4],writer,context,template));break;case"^":value=context.lookup(tokenValue),(!value||isArray(value)&&0===value.length)&&(buffer+=renderTokens(token[4],writer,context,template));break;case">":value=writer.getPartial(tokenValue),"function"==typeof value&&(buffer+=value(context));break;case"&":value=context.lookup(tokenValue),null!=value&&(buffer+=value);break;case"name":value=context.lookup(tokenValue),null!=value&&(buffer+=mustache.escape(value));break;case"text":buffer+=tokenValue}return buffer}function nestTokens(tokens){for(var token,tree=[],collector=tree,sections=[],i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],token[0]){case"#":case"^":sections.push(token),collector.push(token),collector=token[4]=[];break;case"/":var section=sections.pop();section[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:tree;break;default:collector.push(token)}return tree}function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,len=tokens.length;len>i;++i)token=tokens[i],token&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(lastToken=token,squashedTokens.push(token)));return squashedTokens}function escapeTags(tags){return[new RegExp(escapeRegExp(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRegExp(tags[1]))]}function parseTemplate(template,tags){function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}if(template=template||"",tags=tags||mustache.tags,"string"==typeof tags&&(tags=tags.split(spaceRe)),2!==tags.length)throw new Error("Invalid tags: "+tags.join(", "));for(var start,type,value,chr,token,tagRes=escapeTags(tags),scanner=new Scanner(template),sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1;!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(tagRes[0]))for(var i=0,len=value.length;len>i;++i)chr=value.charAt(i),isWhitespace(chr)?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"==chr&&stripSpace();if(!scanner.scan(tagRes[0]))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(eqRe),scanner.scan(eqRe),scanner.scanUntil(tagRes[1])):"{"===type?(value=scanner.scanUntil(new RegExp("\\s*"+escapeRegExp("}"+tags[1]))),scanner.scan(curlyRe),scanner.scanUntil(tagRes[1]),type="&"):value=scanner.scanUntil(tagRes[1]),!scanner.scan(tagRes[1]))throw new Error("Unclosed tag at "+scanner.pos);if(token=[type,value,start,scanner.pos],tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(0===sections.length)throw new Error('Unopened section "'+value+'" at '+start);var openSection=sections.pop();if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if("name"===type||"{"===type||"&"===type)nonSpace=!0;else if("="===type){if(tags=value.split(spaceRe),2!==tags.length)throw new Error("Invalid tags at "+start+": "+tags.join(", "));tagRes=escapeTags(tags)}}var openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return tokens=squashTokens(tokens),nestTokens(tokens)}var whiteRe=/\s*/,spaceRe=/\s+/,nonSpaceRe=/\S/,eqRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/,RegExp_test=RegExp.prototype.test,Object_toString=Object.prototype.toString,isArray=Array.isArray||function(obj){return"[object Array]"===Object_toString.call(obj)},entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(re){var match=this.tail.match(re);return match&&0===match.index?(this.tail=this.tail.substring(match[0].length),this.pos+=match[0].length,match[0]):""},Scanner.prototype.scanUntil=function(re){var match,pos=this.tail.search(re);switch(pos){case-1:match=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,pos),this.tail=this.tail.substring(pos),this.pos+=pos}return match},Context.make=function(view){return view instanceof Context?view:new Context(view)},Context.prototype.push=function(view){return new Context(view,this)},Context.prototype.lookup=function(name){var value=this._cache[name];if(!value){if("."==name)value=this.view;else for(var context=this;context;){if(name.indexOf(".")>0){value=context.view;for(var names=name.split("."),i=0;value&&i<names.length;)value=value[names[i++]]}else value=context.view[name];if(null!=value)break;context=context.parent}this._cache[name]=value}return"function"==typeof value&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function(){this._cache={},this._partialCache={}},Writer.prototype.compile=function(template,tags){var fn=this._cache[template];if(!fn){var tokens=mustache.parse(template,tags);fn=this._cache[template]=this.compileTokens(tokens,template)}return fn},Writer.prototype.compilePartial=function(name,template,tags){var fn=this.compile(template,tags);return this._partialCache[name]=fn,fn},Writer.prototype.getPartial=function(name){return name in this._partialCache||!this._loadPartial||this.compilePartial(name,this._loadPartial(name)),this._partialCache[name]},Writer.prototype.compileTokens=function(tokens,template){var self=this;return function(view,partials){if(partials)if("function"==typeof partials)self._loadPartial=partials;else for(var name in partials)self.compilePartial(name,partials[name]);return renderTokens(tokens,self,Context.make(view),template)}},Writer.prototype.render=function(template,view,partials){return this.compile(template)(view,partials)},mustache.name="mustache.js",mustache.version="0.7.2",mustache.tags=["{{","}}"],mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer,mustache.parse=parseTemplate,mustache.escape=escapeHtml;var defaultWriter=new Writer;mustache.clearCache=function(){return defaultWriter.clearCache()},mustache.compile=function(template,tags){return defaultWriter.compile(template,tags)},mustache.compilePartial=function(name,template,tags){return defaultWriter.compilePartial(name,template,tags)},mustache.compileTokens=function(tokens,template){return defaultWriter.compileTokens(tokens,template)},mustache.render=function(template,view,partials){return defaultWriter.render(template,view,partials)},mustache.to_html=function(template,view,partials,send){var result=mustache.render(template,view,partials);return"function"!=typeof send?result:(send(result),void 0)}}),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed.bs.alert").remove()}var c=a(this),d=c.attr("data-target");d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));var e=a(d);b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one(a.support.transition.end,f).emulateTransitionEnd(150):f())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var d,c=a(this),e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g=c.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=c.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){function e(d){a(b).remove(),a(c).each(function(){var b=f(a(this)),c={relatedTarget:this};b.hasClass("open")&&(b.trigger(d=a.Event("hide.bs.dropdown",c)),d.isDefaultPrevented()||b.removeClass("open").trigger("hidden.bs.dropdown",c))})}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var b=".dropdown-backdrop",c="[data-toggle=dropdown]",d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=f(c),g=d.hasClass("open");if(e(),!g){"ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",e);var h={relatedTarget:this};if(d.trigger(b=a.Event("show.bs.dropdown",h)),b.isDefaultPrevented())return;d.toggleClass("open").trigger("shown.bs.dropdown",h),c.focus()}return!1}},d.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=f(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(c).focus(),d.click();var h=" li:not(.divider):visible a",i=e.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c+", [role=menu], [role=listbox]",d.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]!==a.target&&!this.$element.has(a.target).length&&this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function e(){"in"!=b.hoverState&&c.detach(),b.$element.trigger("hidden.bs."+b.type)}var b=this,c=this.tip(),d=a.Event("hide.bs."+this.type);return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)
};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g).emulateTransitionEnd(150):g(),e.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":c.data(),i=c.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(c).addClass("collapsed"),c[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);if(f&&a<=d[0])return f!=(g=e[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),$(function(){if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){var adjustBackdrop=function(){setTimeout(function(){$(".modal-backdrop").css({position:"absolute",top:"0px",left:"0px",width:"100%",height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)+"px"})},0)};$(".modal input").on("focus",adjustBackdrop),$(".modal").on("show.bs.modal",function(){$(this).css({position:"absolute",marginTop:$(window).scrollTop()+"px",bottom:"auto"}),adjustBackdrop()})}}),!function(a){var b="0.9.3",c={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},bind:a.proxy,bindAll:function(b){var c;for(var d in b)a.isFunction(c=b[d])&&(b[d]=a.proxy(c,b))},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},each:a.each,map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},tokenizeQuery:function(b){return a.trim(b).toLowerCase().split(/[\s]+/)},tokenizeText:function(b){return a.trim(b).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},d=function(){var a=/\s+/;return{on:function(b,c){var d;if(!c)return this;for(this._callbacks=this._callbacks||{},b=b.split(a);d=b.shift();)this._callbacks[d]=this._callbacks[d]||[],this._callbacks[d].push(c);return this},trigger:function(b,c){var d,e;if(!this._callbacks)return this;for(b=b.split(a);d=b.shift();)if(e=this._callbacks[d])for(var f=0;f<e.length;f+=1)e[f].call(this,{type:d,data:c});return this}}}(),e=function(){function b(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d="typeahead:";return c.mixin(b.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger(d+a,b)}}),b}(),f=function(){function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function b(){return(new Date).getTime()}function d(a){return JSON.stringify(c.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return c.isNumber(g)?f.setItem(this._ttlKey(a),d(b()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return c.isNumber(d)&&b()>d?!0:!1}}:{get:c.noop,set:c.noop,remove:c.noop,clear:c.noop,isExpired:c.noop},c.mixin(a.prototype,g),a}(),g=function(){function a(a){c.bindAll(this),a=a||{},this.sizeLimit=a.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return c.mixin(a.prototype,{get:function(a){return this.cache[a]},set:function(a,b){var c;this.cachedKeysByAge.length===this.sizeLimit&&(c=this.cachedKeysByAge.shift(),delete this.cache[c]),this.cache[a]=b,this.cachedKeysByAge.push(a)}}),a}(),h=function(){function b(a){c.bindAll(this),a=c.isString(a)?{url:a}:a,i=i||new g,h=c.isNumber(a.maxParallelRequests)?a.maxParallelRequests:h||6,this.url=a.url,this.wildcard=a.wildcard||"%QUERY",this.filter=a.filter,this.replace=a.replace,this.ajaxSettings={type:"get",cache:a.cache,timeout:a.timeout,dataType:a.dataType||"json",beforeSend:a.beforeSend},this._get=(/^throttle$/i.test(a.rateLimitFn)?c.throttle:c.debounce)(this._get,a.rateLimitWait||300)}function d(){j++}function e(){j--}function f(){return h>j}var h,i,j=0,k={};return c.mixin(b.prototype,{_get:function(a,b){function c(c){var e=d.filter?d.filter(c):c;b&&b(e),i.set(a,c)}var d=this;f()?this._sendRequest(a).done(c):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(b){function c(){e(),k[b]=null,f.onDeckRequestArgs&&(f._get.apply(f,f.onDeckRequestArgs),f.onDeckRequestArgs=null)}var f=this,g=k[b];return g||(d(),g=k[b]=a.ajax(b,this.ajaxSettings).always(c)),g},get:function(a,b){var d,e,f=this,g=encodeURIComponent(a||"");return b=b||c.noop,d=this.replace?this.replace(this.url,g):this.url.replace(this.wildcard,g),(e=i.get(d))?c.defer(function(){b(f.filter?f.filter(e):e)}):this._get(d,b),!!e}}),b}(),i=function(){function d(b){c.bindAll(this),c.isString(b.template)&&!b.engine&&a.error("no template engine specified"),b.local||b.prefetch||b.remote||a.error("one of local, prefetch, or remote is required"),this.name=b.name||c.getUniqueId(),this.limit=b.limit||5,this.minLength=b.minLength||1,this.header=b.header,this.footer=b.footer,this.valueKey=b.valueKey||"value",this.template=e(b.template,b.engine,this.valueKey),this.local=b.local,this.prefetch=b.prefetch,this.remote=b.remote,this.itemHash={},this.adjacencyList={},this.storage=b.name?new f(b.name):null}function e(a,b,d){var e,f;return c.isFunction(a)?e=a:c.isString(a)?(f=b.compile(a),e=c.bind(f.render,f)):e=function(a){return"<p>"+a[d]+"</p>"},e}var g={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return c.mixin(d.prototype,{_processLocalData:function(a){this._mergeProcessedData(this._processData(a))},_loadPrefetchData:function(d){function e(a){var b=d.filter?d.filter(a):a,e=m._processData(b),f=e.itemHash,h=e.adjacencyList;m.storage&&(m.storage.set(g.itemHash,f,d.ttl),m.storage.set(g.adjacencyList,h,d.ttl),m.storage.set(g.thumbprint,n,d.ttl),m.storage.set(g.protocol,c.getProtocol(),d.ttl)),m._mergeProcessedData(e)}var f,h,i,j,k,l,m=this,n=b+(d.thumbprint||"");return this.storage&&(f=this.storage.get(g.thumbprint),h=this.storage.get(g.protocol),i=this.storage.get(g.itemHash),j=this.storage.get(g.adjacencyList)),k=f!==n||h!==c.getProtocol(),d=c.isString(d)?{url:d}:d,d.ttl=c.isNumber(d.ttl)?d.ttl:864e5,i&&j&&!k?(this._mergeProcessedData({itemHash:i,adjacencyList:j}),l=a.Deferred().resolve()):l=a.getJSON(d.url).done(e),l},_transformDatum:function(a){var b=c.isString(a)?a:a[this.valueKey],d=a.tokens||c.tokenizeText(b),e={value:b,tokens:d};return c.isString(a)?(e.datum={},e.datum[this.valueKey]=a):e.datum=a,e.tokens=c.filter(e.tokens,function(a){return!c.isBlankString(a)}),e.tokens=c.map(e.tokens,function(a){return a.toLowerCase()}),e},_processData:function(a){var b=this,d={},e={};return c.each(a,function(a,f){var g=b._transformDatum(f),h=c.getUniqueId(g.value);d[h]=g,c.each(g.tokens,function(a,b){var d=b.charAt(0),f=e[d]||(e[d]=[h]);!~c.indexOf(f,h)&&f.push(h)})}),{itemHash:d,adjacencyList:e}},_mergeProcessedData:function(a){var b=this;c.mixin(this.itemHash,a.itemHash),c.each(a.adjacencyList,function(a,c){var d=b.adjacencyList[a];b.adjacencyList[a]=d?d.concat(c):c})},_getLocalSuggestions:function(a){var b,d=this,e=[],f=[],g=[];return c.each(a,function(a,b){var d=b.charAt(0);!~c.indexOf(e,d)&&e.push(d)}),c.each(e,function(a,c){var e=d.adjacencyList[c];return e?(f.push(e),(!b||e.length<b.length)&&(b=e),void 0):!1}),f.length<e.length?[]:(c.each(b,function(b,e){var h,i,j=d.itemHash[e];h=c.every(f,function(a){return~c.indexOf(a,e)}),i=h&&c.every(a,function(a){return c.some(j.tokens,function(b){return 0===b.indexOf(a)})}),i&&g.push(j)}),g)},initialize:function(){var b;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new h(this.remote):null,b=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return b},b},getSuggestions:function(a,b){function d(a){f=f.slice(0),c.each(a,function(a,b){var d,e=g._transformDatum(b);return d=c.some(f,function(a){return e.value===a.value}),!d&&f.push(e),f.length<g.limit}),b&&b(f)}var e,f,g=this,h=!1;a.length<this.minLength||(e=c.tokenizeQuery(a),f=this._getLocalSuggestions(e).slice(0,this.limit),f.length<this.limit&&this.transport&&(h=this.transport.get(a,d)),!h&&b&&b(f))}}),d}(),j=function(){function b(b){var d=this;c.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=a(b.hint),this.$input=a(b.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),c.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){d.specialKeyCodeMap[a.which||a.keyCode]||c.defer(d._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=e(this.$input)}function e(b){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return a=(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),b=(b||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),a===b}return c.mixin(b.prototype,d,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(a){var b=this.specialKeyCodeMap[a.which||a.keyCode];b&&this.trigger(b+"Keyed",a)},_compareQueryToInputValue:function(){var a=this.getInputValue(),b=f(this.query,a),c=b?this.query.length!==a.length:!1;c?this.trigger("whitespaceChanged",{value:this.query}):b||this.trigger("queryChanged",{value:this.query=a})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a),!b&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var a,b=this.$input.val().length,d=this.$input[0].selectionStart;return c.isNumber(d)?d===b:document.selection?(a=document.selection.createRange(),a.moveStart("character",-b),b===a.text.length):!0}}),b}(),k=function(){function b(b){c.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=a(b.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function e(a){return a.data("suggestion")}var f={suggestionsList:'<span class="tt-suggestions"></span>'},g={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return c.mixin(b.prototype,d,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(b){var c=a(b.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),c.addClass("tt-is-under-cursor")},_handleSelection:function(b){var c=a(b.currentTarget);this.trigger("suggestionSelected",e(c))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(a){var b,c,d,f;if(this.isVisible()){if(b=this._getSuggestions(),c=b.filter(".tt-is-under-cursor"),c.removeClass("tt-is-under-cursor"),d=b.index(c)+a,d=(d+1)%(b.length+1)-1,-1===d)return this.trigger("cursorRemoved"),void 0;-1>d&&(d=b.length-1),f=b.eq(d).addClass("tt-is-under-cursor"),this._ensureVisibility(f),this.trigger("cursorMoved",e(f))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(a){var b=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),c=this.$menu.scrollTop(),d=a.position().top,e=d+a.outerHeight(!0);0>d?this.$menu.scrollTop(c+d):e>b&&this.$menu.scrollTop(c+(e-b))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){var b={left:"0",right:"auto"},c={left:"auto",right:" 0"};"ltr"===a?this.$menu.css(b):this.$menu.css(c)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var a=this._getSuggestions().filter(".tt-is-under-cursor").first();return a.length>0?e(a):null},getFirstSuggestion:function(){var a=this._getSuggestions().first();return a.length>0?e(a):null},renderSuggestions:function(b,d){var e,h,i,j,k,l="tt-dataset-"+b.name,m='<div class="tt-suggestion">%body</div>',n=this.$menu.find("."+l);0===n.length&&(h=a(f.suggestionsList).css(g.suggestionsList),n=a("<div></div>").addClass(l).append(b.header).append(h).append(b.footer).appendTo(this.$menu)),d.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),i=document.createElement("div"),j=document.createDocumentFragment(),c.each(d,function(c,d){d.dataset=b.name,e=b.template(d.datum),i.innerHTML=m.replace("%body",e),k=a(i.firstChild).css(g.suggestion).data("suggestion",d),k.children().each(function(){a(this).css(g.suggestionChild)}),j.appendChild(k[0])}),n.show().find(".tt-suggestions").html(j)):this.clearSuggestions(b.name),this.trigger("suggestionsRendered")},clearSuggestions:function(a){var b=a?this.$menu.find(".tt-dataset-"+a):this.$menu.find('[class^="tt-dataset-"]'),c=b.find(".tt-suggestions");b.hide(),c.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),b}(),l=function(){function b(a){var b,d,f;c.bindAll(this),this.$node=e(a.input),this.datasets=a.datasets,this.dir=null,this.eventBus=a.eventBus,b=this.$node.find(".tt-dropdown-menu"),d=this.$node.find(".tt-query"),f=this.$node.find(".tt-hint"),this.dropdownView=new k({menu:b}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new j({input:d,hint:f}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function e(b){var c=a(g.wrapper),d=a(g.dropdown),e=a(b),f=a(g.hint);c=c.css(h.wrapper),d=d.css(h.dropdown),f.css(h.hint).css({backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}),e.data("ttAttrs",{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(h.query);try{!e.attr("dir")&&e.attr("dir","auto")}catch(i){}return e.wrap(c).parent().prepend(f).append(d)}function f(a){var b=a.find(".tt-query");c.each(b.data("ttAttrs"),function(a,d){c.isUndefined(d)?b.removeAttr(a):b.attr(a,d)}),b.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(a),a.remove()}var g={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},h={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return c.isMsie()&&c.mixin(h.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),c.isMsie()&&c.isMsie()<=7&&(c.mixin(h.wrapper,{display:"inline",zoom:"1"}),c.mixin(h.query,{marginTop:"-1px"})),c.mixin(b.prototype,d,{_managePreventDefault:function(a){var b,c,d=a.data,e=!1;switch(a.type){case"tabKeyed":b=this.inputView.getHintValue(),c=this.inputView.getInputValue(),e=b&&b!==c;break;case"upKeyed":case"downKeyed":e=!d.shiftKey&&!d.ctrlKey&&!d.metaKey}e&&d.preventDefault()},_setLanguageDirection:function(){var a=this.inputView.getLanguageDirection();a!==this.dir&&(this.dir=a,this.$node.css("direction",a),this.dropdownView.setLanguageDirection(a))},_updateHint:function(){var a,b,d,e,f,g=this.dropdownView.getFirstSuggestion(),h=g?g.value:null,i=this.dropdownView.isVisible(),j=this.inputView.isOverflow();h&&i&&!j&&(a=this.inputView.getInputValue(),b=a.replace(/\s{2,}/g," ").replace(/^\s+/g,""),d=c.escapeRegExChars(b),e=new RegExp("^(?:"+d+")(.*$)","i"),f=e.exec(h),this.inputView.setHintValue(a+(f?f[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(a){var b=a.data;this.inputView.setInputValue(b.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(a){this.dropdownView["blured"===a.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(a){var b=a.data;b.shiftKey||b.ctrlKey||b.metaKey||this.dropdownView["upKeyed"===a.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(a){var b="suggestionSelected"===a.type,d=b?a.data:this.dropdownView.getSuggestionUnderCursor();d&&(this.inputView.setInputValue(d.value),b?this.inputView.focus():a.data.preventDefault(),b&&c.isMsie()?c.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",d.datum,d.dataset))},_getSuggestions:function(){var a=this,b=this.inputView.getQuery();c.isBlankString(b)||c.each(this.datasets,function(c,d){d.getSuggestions(b,function(c){b===a.inputView.getQuery()&&a.dropdownView.renderSuggestions(d,c)})})},_autocomplete:function(a){var b,c,d,e,f;("rightKeyed"!==a.type&&"leftKeyed"!==a.type||(b=this.inputView.isCursorAtEnd(),c="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===a.type:"rightKeyed"===a.type,b&&!c))&&(d=this.inputView.getQuery(),e=this.inputView.getHintValue(),""!==e&&d!==e&&(f=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(f.value),this.eventBus.trigger("autocompleted",f.datum,f.dataset)))},_propagateEvent:function(a){this.eventBus.trigger(a.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),f(this.$node),this.$node=null
},setQuery:function(a){this.inputView.setQuery(a),this.inputView.setInputValue(a),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),b}();!function(){var b,d={},f="ttView";b={initialize:function(b){function g(){var b,d=a(this),g=new e({el:d});b=c.map(h,function(a){return a.initialize()}),d.data(f,new l({input:d,eventBus:g=new e({el:d}),datasets:h})),a.when.apply(a,b).always(function(){c.defer(function(){g.trigger("initialized")})})}var h;return b=c.isArray(b)?b:[b],0===b.length&&a.error("no datasets provided"),h=c.map(b,function(a){var b=d[a.name]?d[a.name]:new i(a);return a.name&&(d[a.name]=b),b}),this.each(g)},destroy:function(){function b(){var b=a(this),c=b.data(f);c&&(c.destroy(),b.removeData(f))}return this.each(b)},setQuery:function(b){function c(){var c=a(this).data(f);c&&c.setQuery(b)}return this.each(c)}},jQuery.fn.typeahead=function(a){return b[a]?b[a].apply(this,[].slice.call(arguments,1)):b.initialize.apply(this,arguments)}}()}(window.jQuery);var GlobalNavView,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GlobalNavView=function(_super){function GlobalNavView(){return this.navMenuClickDisplay=__bind(this.navMenuClickDisplay,this),this.checkClick=__bind(this.checkClick,this),this.resetMenus=__bind(this.resetMenus,this),this.showSearchMenu=__bind(this.showSearchMenu,this),this.searchMenuState=__bind(this.searchMenuState,this),_ref=GlobalNavView.__super__.constructor.apply(this,arguments)}return __extends(GlobalNavView,_super),GlobalNavView.prototype.SPEED_OUT=50,GlobalNavView.prototype.SPEED_IN=150,GlobalNavView.prototype.initialize=function(){return jQuery("#signout-link").on("click",this.signOutUser),jQuery(".js-global-nav-btn-click").on("click",this.navMenuClickDisplay),jQuery(vent).on("globalNav:showLoginMenu",this.showLoginMenu)},GlobalNavView.prototype.searchMenuState=function(loc){return _.contains(["/photosearch","/mapsearch","/search"],loc.pathname)&&(MnpUtil.isTablet(window)||MnpUtil.isDesktop(window))},GlobalNavView.prototype.showSearchMenu=function(){return jQuery(".js-global-nav-btn-click[data-target='#search-filters']").addClass("active"),jQuery("#search-filters").show()},GlobalNavView.prototype.renderMenus=function(btnActive,btn,menu){var checkClickDelegate;return this.resetMenus(menu),this.searchMenuState(location)&&_.contains(["signup-menu","favorites-menu","signin-options-menu"],menu.attr("id"))&&btnActive?(this.showSearchMenu(),void 0):btnActive?(btn.removeClass("active"),menu.fadeOut(this.SPEED_OUT)):(btn.addClass("active"),menu.delay(this.SPEED_OUT).fadeIn(this.SPEED_IN).addClass("active"),checkClickDelegate=this.checkClick,setTimeout(function(){return jQuery(document).off("click.globalnav").on("click.globalnav",checkClickDelegate)},0))},GlobalNavView.prototype.resetMenus=function(){return jQuery(".js-global-nav-menu-click").fadeOut(this.SPEED_OUT).removeClass("active"),jQuery(".js-global-nav-menu").fadeOut(this.SPEED_IN).removeClass("active"),jQuery(".js-global-nav-btn").removeClass("active"),jQuery(".js-global-nav-btn-click").removeClass("active"),jQuery(document).off("click.globalnav")},GlobalNavView.prototype.checkClick=function(evt){var notOverNav,notOverTypeAhead,target;return target=evt.target||evt.srcElement,"null"!=typeof target.parentElement.className&&(notOverTypeAhead="tt-suggestion tt-is-under-cursor"!==target.parentElement.className),notOverNav=notOverTypeAhead?-1===jQuery(evt.target).parents().index(jQuery(".global-nav")):!1,notOverNav&&!this.searchMenuState(location)?this.resetMenus():void 0},GlobalNavView.prototype.navMenuClickDisplay=function(evt){var btn,btnActive,menu;return btn=jQuery(evt.currentTarget),btnActive=btn.hasClass("active"),menu=jQuery(btn.attr("data-target")),this.renderMenus(btnActive,btn,menu)},GlobalNavView.prototype.showMenu=function(btn){var menu,state;return btn=jQuery("."+btn+" .js-global-nav-btn-click"),menu=jQuery(btn.attr("data-target")),state=menu.hasClass("active"),this.renderMenus(state,btn,menu)},GlobalNavView.prototype.showLoginMenu=function(){var btn,menu;return btn=jQuery("#reg-signin-link"),menu=jQuery("#signup-menu"),menu.hasClass("active")?void 0:this.renderMenus(!1,btn,menu)},GlobalNavView.prototype.signInUser=function(name){return jQuery(".sign-in").hide(),jQuery("#js-user-welcome").removeClass("hidden").addClass("show"),jQuery("#js-user-name").text("Hi, "+name)},GlobalNavView.prototype.signOutUser=function(){var url;return jQuery(".user-welcome").hide(),jQuery(".sign-in").show(),url=-1!==window.location.href.indexOf("dev.mynewplace.com:8080")?"http://www.dev.mynewplace.com:9000/signout":"/signout",jQuery.ajax({type:"GET",url:url,async:!0,xhrFields:{withCredentials:!0},success:function(){return location.reload()}})},GlobalNavView}(Backbone.View);var HeaderModel,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};HeaderModel=function(_super){function HeaderModel(){return this.createLocationString=__bind(this.createLocationString,this),this.setQuerystringData=__bind(this.setQuerystringData,this),this.extractAmenitiesOrPtype=__bind(this.extractAmenitiesOrPtype,this),this.convertToQuerystring=__bind(this.convertToQuerystring,this),_ref=HeaderModel.__super__.constructor.apply(this,arguments)}return __extends(HeaderModel,_super),HeaderModel.prototype.convertToQuerystring=function(){var pairs,pairsMap,thisRef;return pairs=_.pairs(this.toJSON()),thisRef=this,pairsMap=_.map(pairs,function(item){return"amen"===item[0]?thisRef.extractAmenitiesOrPtype("amenity",item[1].split(",")):"pt"===item[0]?item[1]?thisRef.extractAmenitiesOrPtype("ptype",item[1].split(",")):"ptype=ah":item[0]+"="+item[1]}),pairsMap.join("&")},HeaderModel.prototype.extractAmenitiesOrPtype=function(type,coll){var returnStr;return returnStr="",_.each(coll,function(item){return returnStr+=type+"="+item+"&"}),returnStr},HeaderModel.prototype.setQuerystringData=function(qa){var cleanedLocation,mapA,match,photosearchRegEx,qsObj,zipMatch;if(""!==qa.toString())return mapA=_.map(qa,function(item){return item.split("=")}),qsObj=_.object(mapA),qsObj.q&&(cleanedLocation=qsObj.q.replace(/%2C/gi,",").replace(/\+/g," ").replace(/%20/gi," "),qsObj.q=this.createLocationString(cleanedLocation)),photosearchRegEx=/\/carsellers-for-rent-(.*)-([a-z]{2})-photos/,match=photosearchRegEx.exec(location.pathname),null!=match&&3===match.length?qsObj.q=this.createLocationString(match[1]+", "+match[2]):(photosearchRegEx=/\/carsellers-for-rent-(.*)-photos/,zipMatch=photosearchRegEx.exec(location.pathname),null!=zipMatch&&2===zipMatch.length&&(qsObj.q=this.createLocationString(zipMatch[1]))),this.set(qsObj)},HeaderModel.prototype.createLocationString=function(str){var hyphenedRegExMatch,locationArray,stateRegExMatch;return locationArray=str.split(","),2===locationArray.length?MnpUtil.uppercasedStateAndCapitalizedCity(locationArray):(stateRegExMatch=/(.*) ([a-zA-Z]{2})$/.exec(str),null!=stateRegExMatch&&3===stateRegExMatch.length?MnpUtil.uppercasedStateAndCapitalizedCity([stateRegExMatch[1],stateRegExMatch[2]]):(hyphenedRegExMatch=/(.*)-([a-zA-z]{2})$/.exec(str),null!=hyphenedRegExMatch&&3===hyphenedRegExMatch.length?MnpUtil.uppercasedStateAndCapitalizedCity([hyphenedRegExMatch[1],hyphenedRegExMatch[2]]):MnpUtil.uppercasedStateAndCapitalizedCity([str])))},HeaderModel}(Backbone.Model);var AmenityListCollection,AmenityListView,BlogCollection,BlogHeaderView,HeaderView,MnpUtil,MovingResourcesCollection,MovingResourcesView,SearchValidationView,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_.mixin({capitalize:function(string){return string.charAt(0).toUpperCase()+string.substring(1).toLowerCase()}}),MnpUtil=function(){function MnpUtil(){}return MnpUtil.COOKIE_NAME="mnpbiscotto",MnpUtil.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],MnpUtil.HEADER_HEIGHT=100,MnpUtil.REG_VALIDATION_OBJECT={rules:{firstName:"required",lastName:"required",emailAddress:{required:!0,email:!0},password:"required"},messages:{firstName:"First Name is required",lastName:"Last Name is required",emailAddress:{required:"Email Address is required",email:"Please enter a valid email address"},password:"Password is required"},errorPlacement:function($error,$element){var name;return name=$element.attr("name"),jQuery("."+name+"-error-msg").show(),jQuery("."+name+"-error-msg").html($error)},highlight:function(element){return jQuery("."+element.className.replace(/\s/g,".")).addClass("highlight-red")}},MnpUtil.SIGNIN_VALIDATION_OBJECT={rules:{emailAddress:{required:!0,email:!0}},messages:{emailAddress:{required:"Email Address is required",email:"Please enter a valid email address"}},highlight:function(element){return jQuery("."+element.className.replace(/\s/g,".")).removeClass("highlight-grey").addClass("highlight-red")}},MnpUtil.SEARCH_URL_PATTERN=/\/(photosearch|mapsearch|search)/,MnpUtil.NO_PHOTO="/assets-pl/images/common/image_not_available.jpeg",MnpUtil.SCREEN_WIDTH_SM=768,MnpUtil.SCREEN_WIDTH_XS=480,MnpUtil.getJsonFromCookieStr=function(cookieStr){var cookieArray,keysForObj,valuesForObj;return"undefined"==typeof cookieStr||null===cookieStr?{}:(cookieArray=cookieStr.split(":"),keysForObj=_.map(cookieArray,function(item){return item.substring(0,item.indexOf("="))}),valuesForObj=_.map(cookieArray,function(item){return item.substring(item.indexOf("=")+1)}),_.object(keysForObj,valuesForObj))},MnpUtil.saveAttrToCookie=function(cookieName,key,val,env){var cookieArray,cookieObject,cookieStr;return cookieStr=this.getCookie(cookieName),cookieObject=this.getJsonFromCookieStr(cookieStr),cookieObject.hasOwnProperty(key)?cookieArray=cookieStr.split(":"):(cookieStr=cookieStr.concat(":"+key+"="+val),this.createCookie(cookieName,cookieStr,env))},MnpUtil.createCookie=function(cookieName,cookieStr,env){var date;return date=new Date,date.setTime(date.getTime()+7776e6),jQuery.cookie(cookieName,cookieStr,{path:"/",expires:date,domain:env+".mynewplace.com"})},MnpUtil.removeAttrFromCookie=function(cookieName,keyToRemove,env){var cookieObject,cookieStr,dataArray,key;if(cookieStr=this.getCookie(cookieName),cookieObject=this.getJsonFromCookieStr(cookieStr),cookieObject.hasOwnProperty(keyToRemove)){delete cookieObject[keyToRemove],dataArray=[];for(key in cookieObject)dataArray.push(key+"="+cookieObject[key]);cookieStr=dataArray.toString().replace(/,/g,":"),this.createCookie(cookieName,cookieStr.substring(1,cookieStr.length-1).replace(/\\"/g,'"'),env)}},MnpUtil.cookieName=function(env){return"production"===env?MnpUtil.COOKIE_NAME:env+"."+MnpUtil.COOKIE_NAME},MnpUtil.uppercasedStateAndCapitalizedCity=function(arrayRef){var capitalizedCityArray,city,cityArray;return null!=arrayRef&&2===arrayRef.length?(city=arrayRef[0].replace("-"," "),cityArray=city.split(" "),cityArray.length>1?(capitalizedCityArray=_.map(cityArray,function(item){return _(item).capitalize()}),city=capitalizedCityArray.join(" ")):city=_(city).capitalize(),city+", "+arrayRef[1].toUpperCase().trim()):_(arrayRef.join(" ").replace("-"," ")).capitalize()},MnpUtil.ellip=function(str,length){return str.substring(0,length)+"..."},MnpUtil.getCookie=function(name){var allCookies,cookie,end,start;return allCookies=document.cookie,cookie=null,start=allCookies.indexOf(name+"="),-1!==start?(start=allCookies.indexOf("=",start)+1,end=allCookies.indexOf(";",start),-1===end&&(end=allCookies.length),unescape(allCookies.substring(start,end))):cookie},MnpUtil.getSuggestAPIUrl=function(hostname){var SUGGEST_PATH,domain;return SUGGEST_PATH="/svc/search/suggest.svc",domain=-1!==hostname.indexOf("dev")?"http://www.dev.mynewplace.com:8080":-1!==hostname.indexOf("qa")?"":-1!==hostname.indexOf("stg")?"http://pa.stg.mynewplace.com":"www.mynewplace.com"===hostname?"http://pa.mynewplace.com":"",""+domain+SUGGEST_PATH},MnpUtil.portraitOrientation=function(win){return win.innerHeight>win.innerWidth},MnpUtil.isSmallDevice=function(win){return $(win).width()<768},MnpUtil.searchPlaceholderText=function(win){return win.innerWidth<this.SCREEN_WIDTH_XS?"City, State or Zip":"Search nearby or enter any City, State or Zip"},MnpUtil.setSearchPlaceholders=function(opts){return _.each(jQuery(opts.node||"body").find(".js-location-search-field"),function(el){return jQuery(el).attr("placeholder",MnpUtil.searchPlaceholderText(window)).blur()})},MnpUtil.isTablet=function(win){var winWidth;return winWidth=jQuery(win).width(),winWidth>=768&&992>winWidth},MnpUtil.isDesktop=function(win){return jQuery(win).width()>=992},MnpUtil.isMobile=function(win){return jQuery(win).width()<=568},MnpUtil.headerScrollTop=function(height){return $("body, html").scrollTop(height-MnpUtil.HEADER_HEIGHT)},MnpUtil.getSmallSpinner=function(isLegacy){var src;return src=isLegacy?"/images/header/spinner_arrows_small.gif":"/assets-pl/images/header/spinner_arrows_small.gif","<img id='location-spinner' src='"+src+"'/>"},MnpUtil.trimString=function(longString,lengthToTrim){return longString.length>lengthToTrim?longString=longString.substring(0,lengthToTrim)+"...":longString},MnpUtil.movingDatesOptionsMarkup=function(dateStr){var DEFAULT_TEXT,DROPDOWN_TMPL,EARLY_PREFIX,LATE_PREFIX,currentMonth,currentYear,date,dateArray,dropDownMarkup,firstPossibleDate,inFirstPartOfMonth,oneBasedMonth,startAtMonth,startAtYear,zeroBasedMonth;return dateStr?(dateArray=dateStr.split(","),zeroBasedMonth=dateArray[1]-1,date=new Date(dateArray[0],zeroBasedMonth,dateArray[2])):date=new Date,DEFAULT_TEXT="When are you moving?",EARLY_PREFIX="Early ",LATE_PREFIX="Mid/Late ",DROPDOWN_TMPL='<option value="{{value}}">{{text}}</option>',inFirstPartOfMonth=date.getDate()<15,startAtMonth=inFirstPartOfMonth?date.getMonth():date.getMonth()+1,startAtYear=date.getFullYear(),12===startAtMonth&&(startAtMonth=0,startAtYear=++startAtYear),oneBasedMonth=startAtMonth+1,firstPossibleDate=inFirstPartOfMonth?oneBasedMonth+"/15/"+startAtYear:oneBasedMonth+"/1/"+startAtYear,dropDownMarkup=Mustache.to_html(DROPDOWN_TMPL,{value:firstPossibleDate,text:DEFAULT_TEXT}),dropDownMarkup+=inFirstPartOfMonth?Mustache.to_html(DROPDOWN_TMPL,{value:date.getMonth()+1+"/15/"+startAtYear,text:LATE_PREFIX+MnpUtil.MONTH_NAMES[date.getMonth()]}):"",currentMonth=startAtMonth,currentYear=startAtYear,_.each([0,1,2],function(item){return inFirstPartOfMonth&&0===item?(currentMonth++,void 0):(12===currentMonth&&(currentMonth=0,currentYear++),oneBasedMonth=currentMonth+1,dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:oneBasedMonth+"/1/"+currentYear,text:EARLY_PREFIX+MnpUtil.MONTH_NAMES[currentMonth]}),dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:oneBasedMonth+"/15/"+currentYear,text:LATE_PREFIX+MnpUtil.MONTH_NAMES[currentMonth]}),currentMonth++)}),dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:currentMonth+1+"/1/"+currentYear,text:"more than 3 months"})},MnpUtil}.call(this),HeaderView=function(_super){function HeaderView(){return this.getValidatedCookieString=__bind(this.getValidatedCookieString,this),this.inputValidation=__bind(this.inputValidation,this),this.createLoginModal=__bind(this.createLoginModal,this),this.getNameFromResponse=__bind(this.getNameFromResponse,this),this.hideAllError=__bind(this.hideAllError,this),this.displayErrorMessage=__bind(this.displayErrorMessage,this),this.submitsignupformcontainer=__bind(this.submitsignupformcontainer,this),this.signUpComplete=__bind(this.signUpComplete,this),this.submitLoginPasswordForm=__bind(this.submitLoginPasswordForm,this),this.signInComplete=__bind(this.signInComplete,this),this.toggleShowPassword=__bind(this.toggleShowPassword,this),this.submitloginform=__bind(this.submitloginform,this),this.toggleLoginPasswordMenu=__bind(this.toggleLoginPasswordMenu,this),this.updateConsumerId=__bind(this.updateConsumerId,this),this.toggleLoginSignupMenu=__bind(this.toggleLoginSignupMenu,this),this.getUserLocation=__bind(this.getUserLocation,this),this.proceedWithSearchRequest=__bind(this.proceedWithSearchRequest,this),this.searchSubmit=__bind(this.searchSubmit,this),this.checkForEnter=__bind(this.checkForEnter,this),this.extractJsonDataFromCookie=__bind(this.extractJsonDataFromCookie,this),this.setDataToCookie=__bind(this.setDataToCookie,this),this.onlyTypeNumbers=__bind(this.onlyTypeNumbers,this),this.clearDisplay=__bind(this.clearDisplay,this),this.getSearchUrlParams=__bind(this.getSearchUrlParams,this),this.getSearchViewLocation=__bind(this.getSearchViewLocation,this),this.viewSelect=__bind(this.viewSelect,this),this.amenityClicked=__bind(this.amenityClicked,this),this.totalSelectedAmenity=__bind(this.totalSelectedAmenity,this),this.setMinmaxrent=__bind(this.setMinmaxrent,this),this.selectFeature=__bind(this.selectFeature,this),this.selectFilterItem=__bind(this.selectFilterItem,this),this.hideMenus=__bind(this.hideMenus,this),this.setActiveTab=__bind(this.setActiveTab,this),this.hidePrevMenu=__bind(this.hidePrevMenu,this),this.showHideSubNav=__bind(this.showHideSubNav,this),this.makeDataGAAdjustments=__bind(this.makeDataGAAdjustments,this),this.updateGeoTerm=__bind(this.updateGeoTerm,this),this.initTypeAhead=__bind(this.initTypeAhead,this),this.initializeAmenitiesListUI=__bind(this.initializeAmenitiesListUI,this),this.removeAmenityfromHeader=__bind(this.removeAmenityfromHeader,this),this.initializeFilterUI=__bind(this.initializeFilterUI,this),this.setSearchTabs=__bind(this.setSearchTabs,this),this.setPageTypeFromLocation=__bind(this.setPageTypeFromLocation,this),this.triggerUpdate=__bind(this.triggerUpdate,this),this.initMovingResources=__bind(this.initMovingResources,this),this.initFavorites=__bind(this.initFavorites,this),this.initBlogs=__bind(this.initBlogs,this),this.initRegForm=__bind(this.initRegForm,this),this.backToResultsClicked=__bind(this.backToResultsClicked,this),this.initBackToResults=__bind(this.initBackToResults,this),this.favoriteAllHeartsAndChangeCount=__bind(this.favoriteAllHeartsAndChangeCount,this),_ref=HeaderView.__super__.constructor.apply(this,arguments)}return __extends(HeaderView,_super),HeaderView.prototype.DEFAULT_minrent=0,HeaderView.prototype.DEFAULT_maxrent=5e3,HeaderView.prototype.events={"click .search-submit-btn":"searchSubmit","click .get-location-btn":"getUserLocation","click .js-filter-option-click li":"selectFilterItem","click .features li":"selectFeature","click .filter-submenu-features input":"amenityClicked","focus .js-set-min-max-rent":"setMinmaxrent","blur .js-set-min-max-rent":"setMinmaxrent","click .view-option":"viewSelect","click .rent-display":"clearDisplay","keypress #globalNavSearchField":"checkForEnter","keypress .rent-display":"onlyTypeNumbers","click .toggle-login-signup":"toggleLoginSignupMenu","click .toggle-login-password":"toggleLoginPasswordMenu","click #toggle-show-password":"toggleShowPassword","click #signin-complete-btn":"signInComplete","click #signup-complete-btn":"signUpComplete"},HeaderView.prototype.initialize=function(opts){var date,dateArray,zeroBasedMonth;return this.vent=opts.vent,this.loginName=opts.loginName,this.isLoggedIn=opts.isLoggedIn,this.devServer=opts.devServer||"",this.env=opts.env||"dev",this.searchDomain="dev"===this.env?"http://www.dev.mynewplace.com:8080":"",this.typeAheadUrl=MnpUtil.getSuggestAPIUrl(location.hostname),this.isLegacyApp=opts.isLegacyApp,this.$=this.isLegacyApp?$j:$,this.model.on("change",this.setDataToCookie),this.model.on("change",this.triggerUpdate),this.model.set(this.extractJsonDataFromCookie(),{silent:!0}),this.vent.on("amenity:removed",this.removeAmenityfromHeader),this.vent.on("favorites:received",this.favoriteAllHeartsAndChangeCount),this.model.setQuerystringData(location.search.substring(1).split("&")),this.initializeFilterUI(),this.initializeAmenitiesListUI(),this.initTypeAhead(),this.initBlogs(),this.initFavorites(),this.initMovingResources(),(null!=opts?opts.date:void 0)?(dateArray=opts.date.split(","),zeroBasedMonth=dateArray[1]-1,date=new Date(dateArray[0],zeroBasedMonth,dateArray[2])):date=new Date,this.initRegForm(date),this.makeDataGAAdjustments(),this.initBackToResults(),this.globalNav=new GlobalNavView,this.isLoggedIn&&null!=this.loginName&&this.globalNav.signInUser(this.loginName),this.setPageTypeFromLocation(location),this.setSearchTabs(),this.searchBar=new SearchBarView({el:"#search-filters"})},HeaderView.prototype.favoriteAllHeartsAndChangeCount=function(pids){var allHeartsOnPage;return"undefined"==typeof pids?jQuery(".fav-num").html(""):pids.length>0?(jQuery(".fav-num").html(pids.length),jQuery("#mnp-navigation .main-nav li.favorites a").addClass("faved"),allHeartsOnPage=jQuery(".glyphicon-heart"),_.each(allHeartsOnPage,function(heart){var heartId;if(heartId=jQuery(heart).data("id"))if(_.contains(pids,heartId)){if(jQuery(heart).hasClass("js-heart-off"))return jQuery(heart).toggleClass("js-heart-off js-heart-on")}else if(jQuery(heart).hasClass("js-heart-on"))return jQuery(heart).toggleClass("js-heart-on js-heart-off")})):void 0},HeaderView.prototype.initBackToResults=function(){return this.$("a#return").on("click",this.backToResultsClicked),document.referrer&&MnpUtil.SEARCH_URL_PATTERN.exec(document.referrer)?jQuery.cookie("b2s",document.referrer):void 0},HeaderView.prototype.backToResultsClicked=function(eObj){var searchPage;return searchPage=document.referrer&&MnpUtil.SEARCH_URL_PATTERN.exec(document.referrer)?document.referrer:jQuery.cookie("b2s")?jQuery.cookie("b2s"):"/",jQuery(eObj.currentTarget).attr("href",searchPage),!0},HeaderView.prototype.initRegForm=function(date){var DATES_DROPDOWN,DEFAULT_TEXT,DROPDOWN_TMPL,EARLY_PREFIX,LATE_PREFIX,currentMonth,currentYear,dropDownMarkup,firstPossibleDate,inFirstPartOfMonth,oneBasedMonth,startAtMonth,startAtYear;return DEFAULT_TEXT="When are you moving?",EARLY_PREFIX="Early ",LATE_PREFIX="Mid/Late ",DATES_DROPDOWN=this.$("#moving-date"),DROPDOWN_TMPL='<option value="{{value}}">{{text}}</option>',inFirstPartOfMonth=date.getDate()<15,startAtMonth=inFirstPartOfMonth?date.getMonth():date.getMonth()+1,startAtYear=date.getFullYear(),12===startAtMonth&&(startAtMonth=0,startAtYear=++startAtYear),oneBasedMonth=startAtMonth+1,firstPossibleDate=inFirstPartOfMonth?oneBasedMonth+"/15/"+startAtYear:oneBasedMonth+"/1/"+startAtYear,dropDownMarkup=Mustache.to_html(DROPDOWN_TMPL,{value:firstPossibleDate,text:DEFAULT_TEXT}),dropDownMarkup+=inFirstPartOfMonth?Mustache.to_html(DROPDOWN_TMPL,{value:date.getMonth()+1+"/15/"+startAtYear,text:LATE_PREFIX+MnpUtil.MONTH_NAMES[date.getMonth()]}):"",currentMonth=startAtMonth,currentYear=startAtYear,_.each([0,1,2],function(item){return inFirstPartOfMonth&&0===item?(currentMonth++,void 0):(12===currentMonth&&(currentMonth=0,currentYear++),oneBasedMonth=currentMonth+1,dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:oneBasedMonth+"/1/"+currentYear,text:EARLY_PREFIX+MnpUtil.MONTH_NAMES[currentMonth]}),dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:oneBasedMonth+"/15/"+currentYear,text:LATE_PREFIX+MnpUtil.MONTH_NAMES[currentMonth]}),currentMonth++)}),dropDownMarkup+=Mustache.to_html(DROPDOWN_TMPL,{value:currentMonth+1+"/1/"+currentYear,text:"more than 3 months"}),DATES_DROPDOWN.html(dropDownMarkup)},HeaderView.prototype.initBlogs=function(){return this.blogs=new BlogCollection,this.blogView=new BlogHeaderView({collection:this.blogs,el:"#blog-menu",jqueryRef:this.$,devServer:this.devServer}),this.blogs.jsonpFetch()},HeaderView.prototype.initFavorites=function(){return this.favoriteCollection=new FavoriteCollection({jqueryRef:this.$,devServer:this.devServer,env:this.env}),this.favoriteView=new FavoriteHeaderView({el:"#favorites-menu",collection:this.favoriteCollection,jqueryRef:this.$,vent:this.vent}),this.favoriteCollection.jsonpFetch()},HeaderView.prototype.initMovingResources=function(){return this.movingResourcesCollection=new MovingResourcesCollection({}),this.movingResourcesView=new MovingResourcesView({collection:this.movingResourcesCollection,el:"#moving-menu tr",devServer:this.devServer}),this.movingResourcesCollection.parse()},HeaderView.prototype.triggerUpdate=function(){return this.vent.trigger("header:updated",this.model)},HeaderView.prototype.setPageTypeFromLocation=function(loc){return this.pageType="unknown",/carsellers-for-rent-.*-photos/.test(loc.pathname)||"/photosearch"===loc.pathname?this.pageType="photos":"/search"===loc.pathname||/^\/carsellers-(.*-\w{2}|\d{5})$/.test(loc.pathname)||/\/listmapsearch\/page/.test(location.pathname)?this.pageType="list":"/mapsearch"===loc.pathname?this.pageType="map":"/"===loc.pathname?this.pageType="home":loc.pathname.indexOf("/city/")>-1?this.pageType="clp":loc.pathname.indexOf("/all-cities/")>-1?this.pageType="acp":void 0},HeaderView.prototype.setSearchTabs=function(){return _.contains(["photos","list","map"],this.pageType)&&(jQuery("#search-filters ."+this.pageType).addClass("selected"),MnpUtil.isTablet(window)||MnpUtil.isDesktop(window))?this.globalNav.showMenu("search"):void 0},HeaderView.prototype.initializeFilterUI=function(){var amenArray,bathsDisplayText,bathsValue,bedsDisplayText,bedsValue,maxrent,minrent,petDisplayText,petValue,ptypeArray,searchInput,thisRef;return bedsValue=this.model.get("minbed")||"0",bedsDisplayText="0"===bedsValue?"studio":bedsValue+"+",this.$el.find("#bed-filter .current").text(bedsDisplayText),this.$el.find("#beds-select li").filter("[data-value='"+bedsValue+"']").addClass("selected"),bathsValue=this.model.get("minbath")||"1",bathsDisplayText=bathsValue+"+",this.$el.find("#bath-filter .current").text(bathsDisplayText),this.$el.find("#baths-select li").filter("[data-value='"+bathsValue+"']").addClass("selected"),petValue=this.model.get("pet")||"0",petDisplayText="no preference","allPets"===petValue?petDisplayText="yes":"noPets"===petValue&&(petDisplayText="none"),this.$el.find("#pet-filter .current").text(petDisplayText),this.$el.find("#pet-select li").filter("[data-value='"+petValue+"']").addClass("selected"),minrent=this.model.get("minrent")||"0",maxrent=this.model.get("maxrent")||"5000",this.$el.find("#price-filter .current").text("$"+minrent+" - $"+maxrent),this.$el.find("#searchMinRent").val(minrent),this.$el.find("#searchMaxRent").val(maxrent),this.$el.find("#features-filter").find("input[type=checkbox]").each(function(){return this.checked=!1}),thisRef=this,this.model.get("amen")&&(amenArray=this.model.get("amen").split(","),_.each(amenArray,function(amenKey){return thisRef.$el.find("#"+amenKey).prop("checked",!0).parent("li").addClass("selected")})),this.model.get("pt")&&("ah"===this.model.get("pt")?this.model.unset("pt",{silent:!0}):(ptypeArray=this.model.get("pt").split(","),_.each(ptypeArray,function(ptypeKey){return thisRef.$el.find("#ptype-"+ptypeKey).prop("checked",!0).parent("li").addClass("selected")}))),searchInput=jQuery(".js-location-search-field"),this.model.get("q")?searchInput.val(this.model.createLocationString(this.model.get("q"))):searchInput.attr("placeholder",MnpUtil.searchPlaceholderText(window))},HeaderView.prototype.removeAmenityfromHeader=function(amenityCode){var cArray,keyToFetch;return keyToFetch="a"===amenityCode||"h"===amenityCode?"pt":"amen",cArray=this.model.get(keyToFetch).split(","),cArray.splice(cArray.indexOf(amenityCode),1),this.model.set(keyToFetch,cArray.join(",")),"amen"===keyToFetch?this.$el.find("#"+amenityCode).prop("checked",!1).parent("li").removeClass("selected"):this.$el.find("#ptype-"+amenityCode).prop("checked",!1).parent("li").removeClass("selected")},HeaderView.prototype.initializeAmenitiesListUI=function(){return this.amenityListCollection=new AmenityListCollection({vent:this.vent}),this.amenityListView=new AmenityListView({el:"#selectedAmenityContainer",collection:this.amenityListCollection,jqueryRef:this.$,vent:this.vent}),this.amenityListCollection.updateCollection(this.model)},HeaderView.prototype.initTypeAhead=function(){return this.$(".js-location-search-field").typeahead({remote:{url:this.typeAheadUrl+"?data=true&q=%QUERY",filter:function(parsedResponse){return parsedResponse.r}}}).on("typeahead:selected",this.updateGeoTerm),this.searchValidationView=new SearchValidationView({el:".js-location-search-field",isLegacyApp:this.isLegacyApp,headerModel:this.model,headerView:this,directMatchCallback:this.proceedWithSearchRequest})},HeaderView.prototype.updateGeoTerm=function(val){return this.model.set("q",this.model.createLocationString(this.$(val.currentTarget).val()))},HeaderView.prototype.makeDataGAAdjustments=function(){var $,dataGaElements,pageType;return pageType=this.pageType,$=this.$,dataGaElements=this.$el.find("a[data-ga*='[page-type]:[url]']"),_.each(dataGaElements,function(item){var dataGa;return dataGa=$(item).attr("data-ga").replace("[page-type]:[url]",pageType+":"+location.pathname),$(item).attr("data-ga",dataGa)})},HeaderView.prototype.showHideSubNav=function(e){var isToggle;return this.hideAllError(),this.tab=this.$(e.currentTarget),this.isMainNav=this.tab.closest("ul").hasClass("main-nav"),this.menu=this.tab.attr("data-target"),this.subnav=this.isMainNav===!0?this.$(".subnav"):this.$(".filter-submenu"),isToggle=this.$(e.target).hasClass("toggle-subnav")||this.$(e.target).parent().hasClass("toggle-subnav"),isToggle&&("#login-menu"===this.prevSubMenu?(this.$("#login-menu").hide(),this.setActiveTab()):(this.$(this.menu).toggle(),this.hidePrevMenu(),this.setActiveTab())),"click"===e.type?!1:void 0},HeaderView.prototype.hidePrevMenu=function(){return this.isMainNav&&this.$(".filter-submenu").hide(),this.subnav.not(this.menu).hide()},HeaderView.prototype.setActiveTab=function(){return this.isMainNav?this.$(".main-nav .toggle-subnav").not(this.tab).removeClass("active"):this.$(".subnav .toggle-subnav").not(this.tab).removeClass("active"),this.tab.toggleClass("active")},HeaderView.prototype.hideMenus=function(e){var hovered,ieSelectCheck,tar;if(null==e.originalEvent&&typeof e.originalEvent!==!0||(ieSelectCheck=e.originalEvent.target.localName,"select"!==ieSelectCheck&&"option"!==ieSelectCheck))return this.$("#location-mb").remove(),"unknown"!==this.pageType||(tar=this.$(e.target),hovered=this.$(".main-nav:hover *").length>0||this.$(".subnav:hover *").length>0,hovered=hovered&&!tar.hasClass("main-nav"))?void 0:this.$(".filter-submenu").is(":visible")?this.$(".primary-filters li").removeClass("active").find(".filter-submenu").hide():(this.$(".main-nav").nextAll().hide(),this.$(".main-nav").find(".active").removeClass("active"))},HeaderView.prototype.setCurrentFilterItem=function(target,value){var filterBtn;return filterBtn=target.attr("data-target"),this.$("#"+filterBtn+" .current").text(value)},HeaderView.prototype.selectFilterItem=function(e){var changedId,className,filter,filterMenu,petsValue,value;return filter=this.$(e.currentTarget),className=filter.attr("class"),filterMenu=filter.parent(),filter.addClass("selected").siblings().removeClass("selected"),value=filter.attr("data-value"),changedId=filterMenu.attr("id"),-1!==changedId.indexOf("beds")&&(this.model.set("minbed",value),"0"===value?this.setCurrentFilterItem(filterMenu,"studio"):this.setCurrentFilterItem(filterMenu,value+"+"),mnpGA.analyticsEvent("engagement:global-nav","nav-strip:search","beds:"+value)),-1!==changedId.indexOf("baths")&&(this.model.set("minbath",value),this.setCurrentFilterItem(filterMenu,value+"+"),mnpGA.analyticsEvent("engagement:global-nav","nav-strip:search","baths:"+value)),-1!==changedId.indexOf("pet")&&(this.model.set("pet",value),petsValue="no preference","allPets"===value&&(petsValue="yes"),"noPets"===value&&(petsValue="none"),this.setCurrentFilterItem(filterMenu,petsValue),mnpGA.analyticsEvent("engagement:global-nav","nav-strip:search","pets:"+petsValue)),!1
},HeaderView.prototype.selectFeature=function(e){var checkbox,filter,fullVal;return filter=this.$(e.currentTarget),fullVal=this.$(e.currentTarget).find("input").parent().text(),filter.toggleClass("selected"),checkbox=filter.find("input[type='checkbox']"),checkbox.is(":checked")?checkbox.attr("checked",!1):(checkbox.attr("checked",!0),mnpGA.analyticsEvent("engagement:global-nav","nav-strip:search","other-features:"+fullVal)),!1},HeaderView.prototype.setMinmaxrent=function(e){var filterMenu,maxrent,minrent,runGA,text;return filterMenu=this.$("#price-select"),minrent=this.$("#searchMinRent").val(),maxrent=this.$("#searchMaxRent").val(),parseInt(minrent)>parseInt(maxrent)&&(minrent=this.DEFAULT_minrent,maxrent=this.DEFAULT_maxrent),""===minrent&&(minrent=this.DEFAULT_minrent),""===maxrent&&(maxrent=this.DEFAULT_maxrent),text="$"+minrent+" - $"+maxrent,this.$("#price-filter .current").text(text),this.$("#searchMinRent").val(minrent),this.$("#searchMaxRent").val(maxrent),this.model.set("minrent",minrent),this.model.set("maxrent",maxrent),runGA="undefined"!=typeof e?"focusin"===e.type:!1,runGA?mnpGA.analyticsEvent("engagement:global-nav","nav-strip:search","price-range:"+minrent+"-"+maxrent):void 0},HeaderView.prototype.totalSelectedAmenity=function(){var total;return total=this.$('.filter-submenu-features input[type="checkbox"]:checked').length,this.$("#features-filter .current").text(total)},HeaderView.prototype.amenityClicked=function(e){var cArray,curTarget,isPtype,keyToFetch,selected,val;return curTarget=this.$(e.currentTarget),val=curTarget.val(),selected=curTarget.prop("checked"),isPtype=curTarget.hasClass("ptype"),keyToFetch=isPtype?"pt":"amen",cArray=this.model.get(keyToFetch)?this.model.get(keyToFetch).split(","):[],selected?(cArray.push(val),cArray=_.uniq(cArray)):cArray=_.reject(cArray,function(item){return item===val}),this.model.set(keyToFetch,cArray.join(",")),this.totalSelectedAmenity()},HeaderView.prototype.viewSelect=function(e){var clickedView,filter;return filter=this.$(e.currentTarget),clickedView=filter.data("view"),clickedView===this.pageType?!0:this.searchValidationView.validate(clickedView)},HeaderView.prototype.getSearchViewLocation=function(clickedView){return"list"===clickedView?location.href=this.searchDomain+"/search?"+this.getSearchUrlParams():"map"===clickedView?location.href=this.searchDomain+"/mapsearch?"+this.getSearchUrlParams():"photos"===clickedView?location.href=this.searchDomain+"/photosearch?"+this.getSearchUrlParams():void 0},HeaderView.prototype.getSearchUrlParams=function(){var filterList,keyValString,_this=this;return filterList=["q","minbed","minbath","pet","minrent","maxrent"],keyValString=function(key){var str,val;return val=_this.model.get(key),str=val?key+"="+val:"","q"===key?str.toLowerCase().replace(" ","-").replace(",",""):str},_.chain(filterList).map(function(list){return keyValString(list)}).compact().join("&").value()},HeaderView.prototype.clearDisplay=function(e){return this.$(e.currentTarget).attr("placeholder","").val("")},HeaderView.prototype.onlyTypeNumbers=function(e){var charCode;return charCode=e.which?e.which:event.keyCode,charCode>47&&58>charCode?!0:!1},HeaderView.prototype.setDataToCookie=function(){var arrayOfEquals,arrayOfPairs,cookie,date,str;return arrayOfPairs=_.pairs(this.model.toJSON()),arrayOfEquals=_.map(arrayOfPairs,function(item){return item[0]+"="+item[1]}),cookie=this.$.cookie(MnpUtil.cookieName(this.env)),null!=cookie||typeof cookie===!0?(str=this.getValidatedCookieString(cookie,arrayOfEquals),date=new Date,date.setTime(date.getTime()+7776e6),this.$.cookie(MnpUtil.cookieName(this.env),str.substring(0,str.length-1),{path:"/",expires:date,domain:this.env+".mynewplace.com"})):void 0},HeaderView.prototype.extractJsonDataFromCookie=function(){var cookieStr;return cookieStr=this.$.cookie(MnpUtil.cookieName(this.env)),null!=cookieStr?MnpUtil.getJsonFromCookieStr(cookieStr):void 0},HeaderView.prototype.checkForEnter=function(e){var charCode;return charCode=e.which?e.which:event.keyCode,13===charCode?(this.$(".tt-dropdown-menu").hide(),this.searchSubmit(),!1):void 0},HeaderView.prototype.searchSubmit=function(){var done;return done=this.setMinmaxrent(),this.searchValidationView.validate()},HeaderView.prototype.proceedWithSearchRequest=function(){return _.contains(["photos","list","map"],this.pageType)?("map"===this.pageType&&(location.href=this.searchDomain+"/mapsearch?"+this.getSearchUrlParams()),location.href="list"===this.pageType?this.searchDomain+"/search?"+this.getSearchUrlParams():this.searchDomain+"/photosearch?"+this.getSearchUrlParams()):location.href=this.searchDomain+"/photosearch?"+this.getSearchUrlParams()},HeaderView.prototype.getUserLocation=function(){},HeaderView.prototype.toggleLoginSignupMenu=function(defaultState){return this.hideAllError(),"signup"===defaultState?(this.$("#login-menu").hide(),this.$("#signup-menu").show()):"hideall"===defaultState?(this.$("#login-menu").hide(),this.$("#signup-menu").hide()):(this.$("#login-menu").toggle(),this.$("#signup-menu").toggle()),this.$el.removeClass("max-height")},HeaderView.prototype.updateConsumerId=function(response){return this.model.set("u",response.id),this.favoriteCollection.consumerId=response.id,this.favoriteCollection.jsonpFetch()},HeaderView.prototype.toggleLoginPasswordMenu=function(){return this.inputValidation("login-form")},HeaderView.prototype.submitloginform=function(){var request,thisRef,url,_this=this;return request=this.$("#login-form").serialize(),url=-1!==window.location.href.indexOf("dev.mynewplace.com:8080")?"http://www.dev.mynewplace.com:9000/signin-account":"/signin-account",thisRef=this,this.$.ajax({type:"POST",url:url,data:request,async:!0,xhrFields:{withCredentials:!0},success:function(response){var emailEntered,forgortPasswordLink;return"string"==typeof response?-1!==response.indexOf("Password is required")?(_this.$("#login-menu").hide(),_this.$("#login-password-menu").show(),emailEntered=_this.$("#login-form .signin-email").val(),forgortPasswordLink=_this.$("#forgot-password-link").attr("href"),_this.$("#login-email-entered").text(emailEntered),_this.$("#forgot-password-link").attr("href",forgortPasswordLink+"?email="+emailEntered),_this.$("#password-label-msg").removeClass("label-error-highlight"),_this.$("#login-email").val(emailEntered)):_this.displayErrorMessage(response):(thisRef.updateConsumerId(response),_this.globalNav.signInUser(_this.getNameFromResponse(response)),_this.$("#login-menu").toggle(),MnpUtil.isMobile($(window))||_this.createLoginModal(response,"Thanks for logging in! As a reminder, you can check your credit score here if you have not already done so."),mnpGA.analyticsEvent("engagement:global-nav","signin",_this.pageType+":"+location.pathname))},error:function(){}})},HeaderView.prototype.toggleShowPassword=function(e){var $target,password;return $target=this.$(e.currentTarget),$target.parent().find("#login-password").toggle(),$target.hasClass("show-password")?(password=$target.parent().find("#login-password").val(),$target.parent().append('<input type="text" name="password-alt" id="login-password-alt" value="" placeholder="Password" />'),$target.parent().find("#login-password-alt").val(password),$target.removeClass("show-password").addClass("hide-password")):(password=$target.parent().find("#login-password-alt").val(),$target.parent().find("#login-password-alt").remove(),$target.parent().find("#login-password").val(password),$target.removeClass("hide-password").addClass("show-password"))},HeaderView.prototype.signInComplete=function(){return this.inputValidation("login-password-form")},HeaderView.prototype.submitLoginPasswordForm=function(){var $altPassword,$password,altPasswordVal,request,thisRef,url,_this=this;return $altPassword=this.$("#login-password-alt"),$password=this.$("#login-password"),$altPassword.length>0&&(altPasswordVal=$altPassword.val(),$password.val(altPasswordVal)),request=this.$("#login-password-form").serialize(),url=-1!==window.location.href.indexOf("dev.mynewplace.com:8080")?"http://www.dev.mynewplace.com:9000/signin-account":"/signin-account",thisRef=this,this.$.ajax({type:"POST",url:url,data:request,async:!0,xhrFields:{withCredentials:!0},success:function(response){return"string"==typeof response?_this.displayErrorMessage(response):(thisRef.updateConsumerId(response),_this.globalNav.signInUser(_this.getNameFromResponse(response)),MnpUtil.isMobile($(window))||_this.createLoginModal(response,"Thanks for logging in! As a reminder, you can check your credit score here if you have not already done so."),_this.$("#login-password-menu").hide(),mnpGA.analyticsEvent("engagement:global-nav","signin",_this.pageType+":"+location.pathname))},error:function(){}})},HeaderView.prototype.signUpComplete=function(){return this.inputValidation("signup-form-container")},HeaderView.prototype.submitsignupformcontainer=function(){var request,thisRef,url,_this=this;return request=this.$("#signup-form-container").serialize(),url=-1!==window.location.href.indexOf("dev.mynewplace.com:8080")?"http://www.dev.mynewplace.com:9000/register-account":"/register-account",thisRef=this,this.$.ajax({type:"POST",url:url,data:request,async:!0,xhrFields:{withCredentials:!0},success:function(response){return"string"==typeof response?_this.displayErrorMessage(response):(thisRef.updateConsumerId(response),_this.globalNav.signInUser(_this.getNameFromResponse(response)),_this.$("#signup-menu").toggle(),MnpUtil.isMobile($(window))||_this.createLoginModal(response,"Your account has been created, thanks for registering!"),mnpGA.analyticsEvent("engagement:global-nav","register",_this.pageType+":"+location.pathname))},error:function(){return _this.inputValidation("signup-form-container"),alert("There was an error signing in. Please try again.")}})},HeaderView.prototype.displayErrorMessage=function(response){var errorMsg;return errorMsg="<label class='error'>"+response.replace("400:","").replace("_"," ")+"</label>",-1!==response.indexOf("First Name")?(this.$(".firstName-error-msg").show(),this.$(".firstName-error-msg").html(errorMsg)):this.$(".firstName-error-msg").hide(),-1!==response.indexOf("Last Name")?(this.$(".lastName-error-msg").show(),this.$(".lastName-error-msg").html(errorMsg)):this.$(".lastName-error-msg").hide(),-1!==response.indexOf("email_address")?(this.$(".emailAddress-error-msg").show(),this.$(".emailAddress-error-msg").html(errorMsg)):this.$(".emailAddress-error-msg").hide(),-1!==response.indexOf("credentials")?(this.$(".password-error-msg").show(),this.$(".password-error-msg").html(errorMsg)):this.$(".password-error-msg").hide()},HeaderView.prototype.hideAllError=function(){return this.$("#first-name").css("border-color","#AAAAAA"),this.$("#last-name").css("border-color","#AAAAAA"),this.$("#signin-email").css("border-color","#AAAAAA"),this.$("#signup-email").css("border-color","#AAAAAA"),this.$(".firstName-error-msg").html(""),this.$(".lastName-error-msg").html(""),this.$(".emailAddress-error-msg").html("")},HeaderView.prototype.getNameFromResponse=function(response){var displayName,firstName,lastName;return firstName=null!=response?response.firstName:void 0,lastName=null!=response?response.lastName:void 0,displayName=firstName,null==firstName&&(displayName=lastName),displayName},HeaderView.prototype.createLoginModal=function(response,msg){var _this=this;return this.$.ajax({dataType:"jsonp",success:function(template){var signInHtml;return signInHtml="",signInHtml+=Mustache.render(template.cb,{msg:msg,fname:response.firstName,lname:response.lastName,email:response.email,cid:response.id}),_this.$("body").prepend(signInHtml),_this.$("#myModal").modal(),_this.$("#myModal").on("hidden, hidden.bs.modal",function(){return location.reload()})},url:this.devServer+"/pm/signInModal"})},HeaderView.prototype.inputValidation=function(elementId){var validationObject,_this=this;return validationObject=MnpUtil.REG_VALIDATION_OBJECT,validationObject.submitHandler=function(){return-1!==elementId.indexOf("login-pasword")?_this.submitLoginPasswordForm():-1!==elementId.indexOf("login")?_this.submitloginform():_this.submitsignupformcontainer()},this.$("#"+elementId).validate(validationObject)},HeaderView.prototype.getValidatedCookieString=function(cookieStr,headerModelArrayOfEquals){var a,attr,cookieHash,k,str,v,_i,_len;for(str="",cookieHash={},_.map(cookieStr.split(":"),function(attr){var a;return a=attr.split("="),cookieHash[a[0]]=a[1]}),_i=0,_len=headerModelArrayOfEquals.length;_len>_i;_i++)attr=headerModelArrayOfEquals[_i],-1===cookieStr.indexOf(attr)&&(a=attr.split("="),"cs"!==a[0]&&(cookieHash[a[0]]=a[1]));for(k in cookieHash)v=cookieHash[k],str+=k+"="+v+":";return str},HeaderView}(Backbone.View),AmenityListCollection=function(_super){function AmenityListCollection(){return this.extractCollectionFromHeaderModel=__bind(this.extractCollectionFromHeaderModel,this),this.updateCollection=__bind(this.updateCollection,this),_ref1=AmenityListCollection.__super__.constructor.apply(this,arguments)}return __extends(AmenityListCollection,_super),AmenityListCollection.AMENITY_MAP={da:"disability access",dw:"dishwasher",ac:"air conditioning",lf:"laundry",ef:"excercise facility",prk:"parking",pool:"pool",ca:"security",pat:"patio / balcony",yrd:"yard",fur:"furnished",afd:"affordable",stl:"short term",a:"carsellers and condos",h:"houses for rent"},AmenityListCollection.prototype.initialize=function(opts){return this.vent=opts.vent,this.vent.on("header:updated",this.updateCollection)},AmenityListCollection.prototype.updateCollection=function(headerModel){return this.reset(this.extractCollectionFromHeaderModel(headerModel))},AmenityListCollection.prototype.extractCollectionFromHeaderModel=function(headerModel){var amenArray,amenListModelArray,ptArray,ptListModelArray;return amenListModelArray=[],ptListModelArray=[],headerModel.get("amen")&&(amenArray=headerModel.get("amen").split(","),_.each(amenArray,function(amenKey){return amenListModelArray.push(new Backbone.Model({amenityName:AmenityListCollection.AMENITY_MAP[amenKey],amenityKey:amenKey}))})),headerModel.get("pt")&&(ptArray=headerModel.get("pt").split(","),_.each(ptArray,function(ptKey){return"ah"!==ptKey?ptListModelArray.push(new Backbone.Model({amenityName:AmenityListCollection.AMENITY_MAP[ptKey],amenityKey:ptKey})):void 0})),_.union(amenListModelArray,ptListModelArray)},AmenityListCollection}(Backbone.Collection),AmenityListView=function(_super){function AmenityListView(){return this.render=__bind(this.render,this),this.removeAmenityfromQuery=__bind(this.removeAmenityfromQuery,this),_ref2=AmenityListView.__super__.constructor.apply(this,arguments)}return __extends(AmenityListView,_super),AmenityListView.prototype.events={"click .removeAmenity":"removeAmenityfromQuery"},AmenityListView.TEMPLATE="<span class='amenityLabel'>{{name}}<span class='removeAmenity' id='{{key}}'>x</span></span>",AmenityListView.prototype.initialize=function(opts){return this.$=opts.jqueryRef,this.vent=opts.vent,this.collection.on("reset",this.render)},AmenityListView.prototype.removeAmenityfromQuery=function(e){var targetAmenity;return targetAmenity=this.$(e.currentTarget).attr("id"),this.vent.trigger("amenity:removed",targetAmenity)},AmenityListView.prototype.render=function(){var amenityHtml;return this.collection.length>0?(amenityHtml="",_.each(this.collection.models,function(item){return item.get("amenityKey")?amenityHtml+=Mustache.to_html(AmenityListView.TEMPLATE,{name:item.get("amenityName"),key:item.get("amenityKey")}):void 0}),this.$el.show(),this.$el.find("#selectedAmenityList").html(amenityHtml)):this.$el.hide()},AmenityListView}(Backbone.View),MovingResourcesCollection=function(_super){function MovingResourcesCollection(){return this.parse=__bind(this.parse,this),_ref3=MovingResourcesCollection.__super__.constructor.apply(this,arguments)}return __extends(MovingResourcesCollection,_super),MovingResourcesCollection.prototype.DATA=[{title:"FREE Quotes on Movers",text:"Compare and Save today!",imgKlass:"mover",url:"http://www.123movers.com/moving_estimates/cb.aspx?se=place",target:"_blank"},{title:"The Quiz!",text:"What kind of Roommate are you?",imgKlass:"quiz",url:"http://www.mynewplace.com/quiz/roommate-quiz",target:"_self"},{title:"FREE Credit Check",text:"Most Landlords require a Credit Score. Know yours?",imgKlass:"credit",url:"http://www.mynewplace.com/xtrack/moving_credit_button?lid=moving_credit_button",target:"_blank"},{title:"City Profiles",text:"Discover fun facts & local attractions",imgKlass:"city",url:"http://www.mynewplace.com/all-cities/carseller-city-list",target:"_self"},{title:"Tips and Tricks",text:"Advice to help with your move & carseller setup",imgKlass:"tip",url:"http://localtalk.mynewplace.com/category/carseller-guide/",target:"_blank"}],MovingResourcesCollection.prototype.url="#",MovingResourcesCollection.prototype.parse=function(){return this.reset(this.DATA)},MovingResourcesCollection}(Backbone.Collection),MovingResourcesView=function(_super){function MovingResourcesView(){return this.render=__bind(this.render,this),this.templateReceived=__bind(this.templateReceived,this),_ref4=MovingResourcesView.__super__.constructor.apply(this,arguments)}return __extends(MovingResourcesView,_super),MovingResourcesView.prototype.SPINNER='<td class="padding-10 moving-spinner"><img src="/assets-pl/images/common/updating_spinner.gif" /></td>',MovingResourcesView.prototype.initialize=function(opts){return this.devServer=opts.devServer||"",this.render()},MovingResourcesView.prototype.templateReceived=function(tmpl){return this.template=tmpl.cb,this.render()},MovingResourcesView.prototype.render=function(){var movingResourcesHtml,self;return null!=this.template?(movingResourcesHtml="",self=this,_.each(this.collection.models,function(item){return movingResourcesHtml+=Mustache.to_html(self.template,item.toJSON())}),this.$el.html(movingResourcesHtml)):(jQuery.ajax({dataType:"jsonp",success:this.templateReceived,url:this.devServer+"/pm/header_moving"}),this.$el.html(this.SPINNER))},MovingResourcesView}(Backbone.View),BlogCollection=function(_super){function BlogCollection(){return this.blogSuccess=__bind(this.blogSuccess,this),this.blogError=__bind(this.blogError,this),this.jsonpFetch=__bind(this.jsonpFetch,this),_ref5=BlogCollection.__super__.constructor.apply(this,arguments)}return __extends(BlogCollection,_super),BlogCollection.prototype.DEFAULT_DATA=[{title:"Recycling in Your carseller: Myths and Facts",thumbnail:"http://localtalk.mynewplace.com/wp-content/uploads/2012/08/recycle-myths-and-facts-bin-150x150.jpg"},{title:"Roommate Cleaning Issues? How To Split Up Chores Without Splitting Up Friends",thumbnail:"http://localtalk.mynewplace.com/wp-content/uploads/2011/08/angry-roommates-150x150.jpg",permalink:"http://localtalk.mynewplace.com/2011/08/26/roommate-cleaning-issues-how-to-split-up-chores-without-splitting-up-friends/"},{title:"DIY Pet Projects",thumbnail:"http://localtalk.mynewplace.com/wp-content/uploads/2013/04/dresser-pet-bed-night-stand-150x150.jpg",permalink:"http://localtalk.mynewplace.com/2013/04/25/diy-pet-projects/"},{title:"Downton Maybe",thumbnail:"http://localtalk.mynewplace.com/wp-content/uploads/2013/02/downton-abbey-e1361557732944-150x150.jpg",permalink:"http://localtalk.mynewplace.com/2013/02/22/8237/"},{title:"How to Make a Small carseller Seem Bigger",thumbnail:"http://localtalk.mynewplace.com/wp-content/uploads/2013/09/Philips_LED_bulbs-150x150.jpg",permalink:"http://localtalk.mynewplace.com/2013/09/02/how-to-make-a-small-carseller-seem-bigger/"}],BlogCollection.prototype.url="http://localtalk.mynewplace.com/feed/json",BlogCollection.prototype.jsonpFetch=function(){return this.fetch({dataType:"jsonp",success:this.blogSuccess,error:this.blogError,timeout:2e3})},BlogCollection.prototype.blogError=function(){return this.reset(this.DEFAULT_DATA),this.trigger("jsonp:parsed")},BlogCollection.prototype.blogSuccess=function(){return this.trigger("jsonp:parsed")},BlogCollection}(Backbone.Collection),BlogHeaderView=function(_super){function BlogHeaderView(){return this.render=__bind(this.render,this),this.templateReceived=__bind(this.templateReceived,this),this.collectionReady=__bind(this.collectionReady,this),_ref6=BlogHeaderView.__super__.constructor.apply(this,arguments)}return __extends(BlogHeaderView,_super),BlogHeaderView.prototype.initialize=function(opts){return this.$=opts.jqueryRef,this.devServer=opts.devServer||"",this.collection.on("jsonp:parsed",this.collectionReady)},BlogHeaderView.prototype.collectionReady=function(){return null!=this.template?this.render:this.$.ajax({dataType:"jsonp",success:this.templateReceived,url:this.devServer+"/pm/header_blog"})},BlogHeaderView.prototype.templateReceived=function(tmpl){return this.template=tmpl.cb,this.render()},BlogHeaderView.prototype.render=function(){var blogHtml,_this=this;return blogHtml="",_.each(this.collection.models,function(item,index){return 5>index?blogHtml+=Mustache.to_html(_this.template,{url:item.get("permalink"),title:item.get("title"),imageSrc:item.get("thumbnail")}):void 0}),this.$el.find("tr").html(blogHtml)},BlogHeaderView}(Backbone.View),SearchValidationView=function(_super){function SearchValidationView(){return this.validationSuggestionClicked=__bind(this.validationSuggestionClicked,this),this.locationValidationMessage=__bind(this.locationValidationMessage,this),this.hideSearchErrorMsg=__bind(this.hideSearchErrorMsg,this),this.searchValidationSuccess=__bind(this.searchValidationSuccess,this),this.error=__bind(this.error,this),this.validate=__bind(this.validate,this),_ref7=SearchValidationView.__super__.constructor.apply(this,arguments)}return __extends(SearchValidationView,_super),SearchValidationView.MESSAGE_BOX="<div id='location-mb' class='suggested-container'>{{>message}}</div>",SearchValidationView.prototype.events={keydown:"hideSearchErrorMsg"},SearchValidationView.prototype.initialize=function(opts){return this.directMatchCallback=opts.directMatchCallback,this.isLegacyApp=opts.isLegacyApp,this.headerModel=opts.headerModel,this.headerView=opts.headerView,this.searchDomain=opts.searchDomain,this.typeAheadUrl=MnpUtil.getSuggestAPIUrl(location.hostname)},SearchValidationView.prototype.validate=function(clickedView){var currentQuery,spinnerHTML;return this.clickedView=clickedView,jQuery("#location-mb").remove(),currentQuery=this.$el.val(),spinnerHTML=MnpUtil.getSmallSpinner(this.isLegacyApp),this.$el.parent().append(spinnerHTML),jQuery.support.cors=!0,jQuery.ajax({url:this.typeAheadUrl+"?data=true&q="+currentQuery,dataType:"json",success:this.searchValidationSuccess,error:this.error})},SearchValidationView.prototype.error=function(){},SearchValidationView.prototype.searchValidationSuccess=function(data){var listOfPlaces;return jQuery("#location-spinner").remove(),data.r&&1===data.r.length?(this.headerModel.set("q",data.r[0]),null!=this.clickedView?this.headerView.getSearchViewLocation(this.clickedView):this.directMatchCallback()):data.r.length>1?(listOfPlaces="",_.each(data.r,function(item){return listOfPlaces+=Mustache.to_html("<li><a href='#'>{{placeName}}</a></li>",{placeName:item})}),this.locationValidationMessage("did you mean one of these?<ul class='suggested-ul'>"+listOfPlaces+"</ul>"),this.$el.parent().find("#location-mb li a").on({click:this.validationSuggestionClicked})):this.locationValidationMessage("Please enter a valid ZIP Code or City/State")},SearchValidationView.prototype.hideSearchErrorMsg=function(){return jQuery("#location-mb").remove()},SearchValidationView.prototype.locationValidationMessage=function(partial){return this.$el.parent().append(Mustache.to_html(SearchValidationView.MESSAGE_BOX,{message:""},{message:partial}))},SearchValidationView.prototype.validationSuggestionClicked=function(eObj){var validPlace;return validPlace=jQuery(eObj.currentTarget).text(),this.headerModel.set("q",validPlace),this.$el.val(validPlace),null!=this.clickedView?this.headerView.getSearchViewLocation(this.clickedView):this.directMatchCallback()},SearchValidationView}(Backbone.View);var FooterView,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FooterView=function(_super){function FooterView(){return _ref=FooterView.__super__.constructor.apply(this,arguments)}var initCollapseMenus;return __extends(FooterView,_super),initCollapseMenus=function(){var winWidth;return winWidth=jQuery(window).width(),700>winWidth&&(jQuery(".mnp-footer h3").attr("data-toggle","collapse"),jQuery(".mnp-footer .collapse").removeClass("in").css("height","auto"),jQuery(".mnp-footer h3").addClass("collapsed"),jQuery(".mnp-footer h3").off().on("click",function(){var clicks,target;return target=jQuery(this).attr("data-target"),clicks=jQuery(this).data("clicks"),clicks?(jQuery(target).collapse("hide"),jQuery(this).addClass("collapsed")):(jQuery(target).collapse("show"),jQuery(this).removeClass("collapsed")),jQuery(this).data("clicks",!clicks)})),winWidth>=700?(jQuery(".mnp-footer h3").attr("data-toggle",""),jQuery(".mnp-footer h3").off()):void 0},FooterView.prototype.initialize=function(){return initCollapseMenus(),jQuery(window).on("resize",initCollapseMenus)},FooterView}(Backbone.View);var SearchBarView,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchBarView=function(_super){function SearchBarView(){return this.initMobileFeatureMenu=__bind(this.initMobileFeatureMenu,this),this.setPlaceholderText=__bind(this.setPlaceholderText,this),_ref=SearchBarView.__super__.constructor.apply(this,arguments)}return __extends(SearchBarView,_super),SearchBarView.prototype.initialize=function(){return this.initMobileFeatureMenu(),jQuery(window).on("resize",this.initMobileFeatureMenu)},SearchBarView.prototype.setPlaceholderText=function(){return"android"!==mnpPageData.userData.deviceType?MnpUtil.setSearchPlaceholders({node:this.el}):void 0},SearchBarView.prototype.initMobileFeatureMenu=function(){var winWidth;return this.setPlaceholderText(),winWidth=jQuery(window).width(),700>winWidth&&(jQuery(".amenity-list, .prop-type-list").hide(),jQuery(".amenity-heading, .property-heading").removeData("clicks"),jQuery(".amenity-heading, .property-heading").off().on("click",function(){var clicks,target;return clicks=jQuery(this).data("clicks"),target="."+jQuery(this).attr("data-target"),clicks?(jQuery(".glyphicon",this).addClass("glyphicon-plus").removeClass("glyphicon-minus"),jQuery(target).hide()):(jQuery(".glyphicon",this).addClass("glyphicon-minus").removeClass("glyphicon-plus"),jQuery(target).show()),jQuery(this).data("clicks",!clicks)})),winWidth>=700?(jQuery(".amenity-heading, .property-heading").off(),jQuery(".amenity-list, .prop-type-list").show()):void 0},SearchBarView}(Backbone.View);var GA,mnpGA,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GA=function(_super){function GA(){return this.analyticsEvent=__bind(this.analyticsEvent,this),this.gaSplit=__bind(this.gaSplit,this),this.gaTrack=__bind(this.gaTrack,this),_ref=GA.__super__.constructor.apply(this,arguments)}return __extends(GA,_super),GA.prototype.TEMPLATE="{{category}}|{{action}}|{{label}}",GA.prototype.events={"click [data-ga]":"gaTrack","mousedown select[data-ga]":"gaTrack","mousedown #resident-ratings-helpful-yes":"gaTrack","mousedown #resident-ratings-helpful-no":"gaTrack"},GA.prototype.initialize=function(){return this.$=$&&"undefined"==typeof $.attr?$j:$},GA.prototype.gaTrack=function(eObj){var gaLink,gaStr;return gaLink=this.$(eObj.currentTarget),gaStr=gaLink.attr("data-ga"),this.gaSplit(gaStr),!0},GA.prototype.gaSplit=function(gaStr){var gaArray;return null!=gaStr&&(gaArray=gaStr.split("|"),3===gaArray.length?this.analyticsEvent(gaArray[0],gaArray[1],gaArray[2]):2===gaArray.length?this.analyticsEvent(gaArray[0],gaArray[1]):1===gaArray.length&&this.analyticsEvent(gaArray[0])),!0},GA.prototype.analyticsEvent=function(category,action,label){var gaEventObj;return gaEventObj={event:"analyticsEvent"},null!=category&&(gaEventObj.eventCategory=category),null!=action&&(gaEventObj.eventAction=action),null!=label&&(gaEventObj.eventLabel=label),dataLayer.push(gaEventObj),!0},GA}(Backbone.View),mnpGA=new GA({el:"body"});var GeoLocator,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GeoLocator=function(_super){function GeoLocator(){return this.parseLocation=__bind(this.parseLocation,this),this.getCurrentLocation=__bind(this.getCurrentLocation,this),_ref=GeoLocator.__super__.constructor.apply(this,arguments)}return __extends(GeoLocator,_super),GeoLocator.prototype.events={"click .get-location-btn":"getCurrentLocation"},GeoLocator.prototype.initialize=function(){return this.geolocation=navigator.geolocation,this.inProgress=!1,this.geolocation?void 0:jQuery(".get-location-btn").hide()},GeoLocator.prototype.getCurrentLocation=function(){return this.geolocation&&!this.inProgress&&(this.setInput("Getting your location..."),this.inProgress=!0,this.geolocation.getCurrentPosition(this.parseLocation,this.error,{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!0})),!1},GeoLocator.prototype.parseLocation=function(position){var lat,lon,self,url,xdr;return lat=position.coords.latitude,lon=position.coords.longitude,url="http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false",self=this,void 0!==window.XDomainRequest&&null!==window.XDomainRequest?(xdr=new XDomainRequest,xdr.open("get",url),xdr.onload=function(){var data,jsonResponse;return jsonResponse="json = "+xdr.responseText,data=eval(jsonResponse),self.parseLocationHelper(data)},xdr.onerror=function(){return self.error()},xdr.send()):jQuery.ajax({url:url,success:function(data){return self.parseLocationHelper(data),jQuery("body").trigger("geolocation:success")},error:function(){return self.error()}})},GeoLocator.prototype.error=function(){return this.setInput(""),alert("Sorry, we could not find your location.")},GeoLocator.prototype.setInput=function(str){return jQuery(".geolocation").each(function(){return jQuery(this).val(str)})},GeoLocator.prototype.parseLocationHelper=function(data){var $elem,city,json,locationString,obj,state,type,zip,_i,_len,_ref1;if(json=data.results[0].address_components,_ref1=["","",""],city=_ref1[0],state=_ref1[1],zip=_ref1[2],json.length){for(_i=0,_len=json.length;_len>_i;_i++)obj=json[_i],type=obj.types,type.indexOf("locality")>-1&&(city=obj.long_name),type.indexOf("administrative_area_level_1")>-1&&(state=obj.short_name),type.indexOf("postal_code")>-1&&(zip=obj.long_name);return locationString=""+city+", "+state+" "+zip,this.setInput(locationString),$elem=jQuery(".search-submit-btn"),$elem.each(function(){var dataGAValue;return dataGAValue=jQuery(this).attr("data-ga").split("|"),dataGAValue.pop(),jQuery(this).attr("data-ga",dataGAValue.join("|")+"|"+locationString)})}return this.error()},GeoLocator}(Backbone.View);var SearchGATag,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child
}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchGATag=function(_super){function SearchGATag(){return this.setSearchGATag=__bind(this.setSearchGATag,this),this.checkForQuerystringLocation=__bind(this.checkForQuerystringLocation,this),_ref=SearchGATag.__super__.constructor.apply(this,arguments)}return __extends(SearchGATag,_super),SearchGATag.prototype.events={"keyup .location-field":"setSearchGATag"},SearchGATag.prototype.initialize=function(){return this.setSearchGATag(null,this.checkForQuerystringLocation())},SearchGATag.prototype.checkForQuerystringLocation=function(){var mapA,qa,qsObj;return qa=location.search.substring(1).split("&"),mapA=_.map(qa,function(item){return item.split("=")}),qsObj=_.object(mapA),qsObj.q?decodeURIComponent(qsObj.q):void 0},SearchGATag.prototype.setSearchGATag=function(e,qStringLocation){var $elem,loc,self;return loc=qStringLocation||"",e&&(loc=this.$(e.currentTarget).val()),$elem=this.$(".search-submit-btn"),self=this,$elem.each(function(){var dataGAValue;return dataGAValue=self.$(this).attr("data-ga").split("|"),dataGAValue.pop(),self.$(this).attr("data-ga",dataGAValue.join("|")+"|"+loc)}),this.$el.find(".location-field").val(loc)},SearchGATag}(Backbone.View);var PlaceholderFix,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};PlaceholderFix=function(_super){function PlaceholderFix(){return _ref=PlaceholderFix.__super__.constructor.apply(this,arguments)}return __extends(PlaceholderFix,_super),PlaceholderFix.prototype.initialize=function(){var isInputSupported;return isInputSupported=this.placeholderSupport(),isInputSupported?void 0:jQuery("[placeholder]").focus(function(){var input;return input=jQuery(this),input.val()===input.attr("placeholder")?(input.val(""),input.removeClass("placeholder")):void 0}).blur(function(){var input;return input=jQuery(this),""===input.val()||input.val()===input.attr("placeholder")?(input.addClass("placeholder"),input.val(input.attr("placeholder"))):void 0}).blur().parents("form").submit(function(){return jQuery(this).find("[placeholder]").each(function(){var input;return input=jQuery(this),input.val()===input.attr("placeholder")?input.val(""):void 0})})},PlaceholderFix.prototype.placeholderSupport=function(){var ph,test;return ph=!1,test=document.createElement("input"),"placeholder"in test?ph=!0:void 0},PlaceholderFix}(Backbone.View);var FBLogin,MnpUserModel,_ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};MnpUserModel=function(_super){function MnpUserModel(){return this.jsonpSuccess=__bind(this.jsonpSuccess,this),this.jsonpFetch=__bind(this.jsonpFetch,this),this.url=__bind(this.url,this),_ref=MnpUserModel.__super__.constructor.apply(this,arguments)}return __extends(MnpUserModel,_super),MnpUserModel.prototype.ACCOUNT_CREATED=3,MnpUserModel.prototype.ACCOUNT_MERGED=2,MnpUserModel.prototype.ACCOUNT_LOGIN=1,MnpUserModel.prototype.initialize=function(opts){return this.env=opts.env},MnpUserModel.prototype.url=function(){var domain;return domain="","dev"===this.env&&(domain="http://www.dev.mynewplace.com:8080"),domain+"/facebook/login"},MnpUserModel.prototype.jsonpFetch=function(responseObj){return this.fetch({data:responseObj,dataType:"jsonp",success:this.jsonpSuccess})},MnpUserModel.prototype.jsonpSuccess=function(){return this.trigger("fbJsonpSuccess")},MnpUserModel}(Backbone.Model),FBLogin=function(_super){function FBLogin(){return this.isLoggedOutPage=__bind(this.isLoggedOutPage,this),this.accountLogIn=__bind(this.accountLogIn,this),this.accountMerged=__bind(this.accountMerged,this),this.accountCreated=__bind(this.accountCreated,this),this.fireGAEvent=__bind(this.fireGAEvent,this),this.mnpUserFound=__bind(this.mnpUserFound,this),this.goToCookiedUrlTarget=__bind(this.goToCookiedUrlTarget,this),this.closeBSModal=__bind(this.closeBSModal,this),this.cleanupModal=__bind(this.cleanupModal,this),this.loginHandler=__bind(this.loginHandler,this),this.loginFB=__bind(this.loginFB,this),this.setFBToken=__bind(this.setFBToken,this),this.getLoginStatusCallback=__bind(this.getLoginStatusCallback,this),this.fbLoginSuccessCallback=__bind(this.fbLoginSuccessCallback,this),this.fbAddSdk=__bind(this.fbAddSdk,this),_ref1=FBLogin.__super__.constructor.apply(this,arguments)}return __extends(FBLogin,_super),FBLogin.prototype.API_CALL="/me?fields=id,first_name,last_name,email,picture,location,friends,username",FBLogin.prototype.APP_ID=428598347227775,FBLogin.prototype.SUCCESS_TMPL='<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">{{title}}</h4></div><div class="modal-body">{{message}}</div>',FBLogin.prototype.IE_WARNING="<div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h4 class='modal-title' id='myModalLabel'>{{title}}</h4></div><div class='modal-body'>We noticed you're using a version of Internet Explorer.  In order to use Facebook Connect on MyNewPlace, first you will need to enable your Security Settings and <a href='http://windows.microsoft.com/en-us/windows-vista/what-does-internet-explorer-protected-mode-do'>Enable Protected Mode</a><br /><img style='margin-right:10px;' src='/assets-pl/images/header/protected_mode_screen.png' /><button class='fbIELink signUpButton' type='submit' tabindex='0'><span>OK, I'm ready to proceed</span></button></div>",FBLogin.prototype.el="body",FBLogin.prototype.events={"click a[rel='fb-login']":"loginHandler","click .fbIELink":"loginFB"},FBLogin.prototype.initialize=function(options){var appId,channelUrl,getLoginStatusCallbackDelegate;return this.cookie=options.cookie,this.env=options.env,appId=this.APP_ID,this.devServer="","dev"===options.env&&(this.devServer="http://www.dev.mynewplace.com:9000"),this.mnpUserModel=new MnpUserModel({env:this.env}),this.mnpUserModel.bind("fbJsonpSuccess",this.mnpUserFound,this),jQuery("#bs-modal.js-account").on("hidden.bs.modal",this.closeBSModal),jQuery(".fbLink").on("click",this.loginHandler),this.alreadyLoggedIntoMNP=options.signedIn,this.fbLogOut=options.fbLogOut,getLoginStatusCallbackDelegate=this.getLoginStatusCallback,channelUrl="dev"===this.env?"http://www.dev.mynewplace.com:9000/facebook/channel.html":window.location.protocol+"//"+window.location.hostname+"/facebook/channel.html",window.fbAsyncInit=function(){return FB.init({appId:appId,status:!0,cookie:!0,xfbml:!0,channelUrl:channelUrl}),FB.Event.subscribe("edge.create",function(targetUrl){var gaObj;return gaObj={event:"socialEvent",socialNetwork:"facebook",socialAction:"like",target:targetUrl},dataLayer.push(gaObj)}),FB.Event.subscribe("edge.remove",function(targetUrl){var gaObj;return gaObj={event:"socialEvent",socialNetwork:"facebook",socialAction:"unlike",target:targetUrl},dataLayer.push(gaObj)}),this.alreadyLoggedIntoMNP===!1?FB.getLoginStatus(getLoginStatusCallbackDelegate):void 0},this.fbAddSdk(document,"script","facebook-jssdk")},FBLogin.prototype.fbAddSdk=function(d,s,id){var fjs,js;return fjs=d.getElementsByTagName(s)[0],d.getElementById(id)?void 0:(js=d.createElement(s),js.id=id,js.src="https://connect.facebook.net/en_US/all.js",fjs.parentNode.insertBefore(js,fjs))},FBLogin.prototype.fbLoginSuccessCallback=function(response){var city,responseObj,state;return response&&!response.error&&(city="",state=""),response.location&&(city=response.location.name.substring(0,response.location.name.indexOf(",")),state=response.location.name.substr(response.location.name.indexOf(",")+2)),responseObj={id:response.id,email:response.email,first_name:response.first_name,last_name:response.last_name,fbPic:response.picture.data.url,location_city:city,location_state:state,username:response.username,fbToken:this.mnpUserModel.get("fbToken")},this.mnpUserModel.set(responseObj),this.mnpUserModel.jsonpFetch(responseObj)},FBLogin.prototype.getLoginStatusCallback=function(response){return this.fbLogOut?this.logoutFB():"connected"!==response.status||this.isLoggedOutPage(window)?void 0:(this.setFBToken(response),this.isAutoLoad=!0,FB.api(this.API_CALL,this.fbLoginSuccessCallback))},FBLogin.prototype.setFBToken=function(response){return this.mnpUserModel.set("fbToken",response.authResponse.accessToken)},FBLogin.prototype.loginFB=function(){var thisRef;return thisRef=this,FB.login(function(response){return response.authResponse?(thisRef.setFBToken(response),FB.api(thisRef.API_CALL,thisRef.fbLoginSuccessCallback)):void 0},{scope:"email, user_location"})},FBLogin.prototype.logoutFB=function(){return FB.logout()},FBLogin.prototype.loginHandler=function(){return jQuery("#signup-menu, #login-menu").hide(),jQuery.browser.msie?this.ieWarningMessage():this.loginFB()},FBLogin.prototype.cleanupModal=function(){return $("#bs-modal .modal-content").html(""),jQuery("#bs-modal").removeClass("js-account")},FBLogin.prototype.closeBSModal=function(){return this.cleanupModal(),jQuery.browser.msie?this.loginFB():this.isLoggedOutPage(window)?this.doRedirect("/"):this.goToCookiedUrlTarget()},FBLogin.prototype.goToCookiedUrlTarget=function(){var cookieHash,_this=this;return cookieHash=MnpUtil.getJsonFromCookieStr(jQuery.cookie(this.cookie)),cookieHash.urlTarget?jQuery.ajax({dataType:"jsonp",success:function(template){var signInHtml;return signInHtml="",signInHtml+=Mustache.render(template.cb,{msg:"Thanks for logging in! As a reminder, you can check your credit score here if you have not already done so.",fname:_this.mnpUserModel.attributes.first_name,lname:_this.mnpUserModel.attributes.last_name,email:_this.mnpUserModel.attributes.email,cid:_this.mnpUserModel.attributes.id}),jQuery("body").prepend(signInHtml),jQuery("#myModal").modal(),jQuery("#myModal").on("hidden, hidden.bs.modal",function(){return window.location=cookieHash.urlTarget})},url:this.devServer+"/pm/signInModal"}):jQuery.ajax({dataType:"jsonp",success:function(template){var signInHtml;return signInHtml="",signInHtml+=Mustache.render(template.cb,{msg:"Thanks for logging in! As a reminder, you can check your credit score here if you have not already done so.",fname:_this.mnpUserModel.attributes.first_name,lname:_this.mnpUserModel.attributes.last_name,email:_this.mnpUserModel.attributes.email,cid:_this.mnpUserModel.attributes.id}),jQuery("body").prepend(signInHtml),jQuery("#myModal").modal(),jQuery("#myModal").on("hidden, hidden.bs.modal",function(){return location.reload()})},url:this.devServer+"/pm/signInModal"})},FBLogin.prototype.mnpUserFound=function(){switch(this.mnpUserModel.get("status")){case this.mnpUserModel.ACCOUNT_CREATED:this.accountCreated();break;case this.mnpUserModel.ACCOUNT_MERGED:this.accountMerged();break;case this.mnpUserModel.ACCOUNT_LOGIN:this.accountLogIn()}return this.fireGAEvent({isMember:"yes",loggedIn:"yes"})},FBLogin.prototype.fireGAEvent=function(gaObj){return dataLayer.push(gaObj)},FBLogin.prototype.accountCreated=function(){var content;return content=Mustache.to_html(this.SUCCESS_TMPL,{title:"Thanks for logging in "+this.mnpUserModel.get("first_name")+"!",message:"We've used your Facebook account information to create an account on MyNewPlace",bsHeader:!0}),jQuery("#bs-modal .modal-content").html(content),jQuery("#bs-modal").addClass("js-account").modal()},FBLogin.prototype.accountMerged=function(){var content;return content=Mustache.to_html(this.SUCCESS_TMPL,{title:"Success!",message:"Your Facebook account information has been merged with your account on MyNewPlace",bsHeader:!0}),jQuery("#bs-modal .modal-content").html(content),jQuery("#bs-modal").addClass("js-account").modal()},FBLogin.prototype.accountLogIn=function(){return this.isAutoLoad&&this.fireGAEvent({event:"analyticsEvent",eventCategory:"engagement:account",eventAction:"fb-autologin",eventLabel:"fbId:"+this.mnpUserModel.get("id")}),this.isLoggedOutPage(window)?location.href="/":this.goToCookiedUrlTarget()},FBLogin.prototype.ieWarningMessage=function(){var content;return content=Mustache.to_html(this.IE_WARNING,{bsHeader:!0}),jQuery("#bs-modal .modal-content").html(content),jQuery("#bs-modal").modal()},FBLogin.prototype.doRedirect=function(href){return window.location=href},FBLogin.prototype.isLoggedOutPage=function(windowRef){return"/action/signOutAction"===windowRef.location.pathname||"/action/signInAuthenticationAction"===windowRef.location.pathname||"/register"===windowRef.location.pathname||"/signin"===windowRef.location.pathname||"/action/registerAction"===windowRef.location.pathname||"/myaccount"===windowRef.location.pathname},FBLogin}(Backbone.View),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function($){if(!$.support.cors&&$.ajaxTransport&&window.XDomainRequest){var n=/^https?:\/\//i,o=/^get|post$/i,p=new RegExp("^"+location.protocol,"i");$.ajaxTransport("* text html xml json",function(j,k){if(j.crossDomain&&j.async&&o.test(j.type)&&n.test(j.url)&&p.test(j.url)){var m=null;return{send:function(f,g){var h="",i=(k.dataType||"").toLowerCase();m=new XDomainRequest,/^\d+$/.test(k.timeout)&&(m.timeout=k.timeout),m.ontimeout=function(){g(500,"timeout")},m.onload=function(){var a="Content-Length: "+m.responseText.length+"\r\nContent-Type: "+m.contentType,b={code:200,message:"success"},c={text:m.responseText};try{if("html"===i||/text\/html/i.test(m.contentType))c.html=m.responseText;else if("json"===i||"text"!==i&&/\/json/i.test(m.contentType))try{c.json=$.parseJSON(m.responseText)}catch(e){b.code=500,b.message="parseerror"}else if("xml"===i||"text"!==i&&/\/xml/i.test(m.contentType)){var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;try{d.loadXML(m.responseText)}catch(e){d=void 0}if(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)throw b.code=500,b.message="parseerror","Invalid XML: "+m.responseText;c.xml=d}}catch(parseMessage){throw parseMessage}finally{g(b.code,b.message,c,a)}},m.onprogress=function(){},m.onerror=function(){g(500,"error",{text:m.responseText})},k.data&&(h="string"===$.type(k.data)?k.data:$.param(k.data)),m.open(j.type,j.url),m.send(h)},abort:function(){m&&m.abort()}}}})}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{s=decodeURIComponent(s.replace(pluses," "))}catch(e){return}try{return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;l>i;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0===$.cookie(key)?!1:($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),function(jQuery,window,undefined){function migrateWarn(msg){var console=window.console;warnedAbout[msg]||(warnedAbout[msg]=!0,jQuery.migrateWarnings.push(msg),console&&console.warn&&!jQuery.migrateMute&&(console.warn("JQMIGRATE: "+msg),jQuery.migrateTrace&&console.trace&&console.trace()))}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{return Object.defineProperty(obj,prop,{configurable:!0,enumerable:!0,get:function(){return migrateWarn(msg),value},set:function(newValue){migrateWarn(msg),value=newValue}}),void 0}catch(err){}jQuery._definePropertyBroken=!0,obj[prop]=value}var warnedAbout={};jQuery.migrateWarnings=[],!jQuery.migrateMute&&window.console&&window.console.log&&window.console.log("JQMIGRATE: Logging is active"),jQuery.migrateTrace===undefined&&(jQuery.migrateTrace=!0),jQuery.migrateReset=function(){warnedAbout={},jQuery.migrateWarnings.length=0},"BackCompat"===document.compatMode&&migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn=jQuery("<input/>",{size:1}).attr("size")&&jQuery.attrFn,oldAttr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){return undefined},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn||{},"jQuery.attrFn is deprecated"),jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;return pass&&(oldAttr.length<4&&migrateWarn("jQuery.fn.attr( props, pass ) is deprecated"),elem&&!rnoAttrNodeType.test(nType)&&(attrFn?name in attrFn:jQuery.isFunction(jQuery.fn[name])))?jQuery(elem)[name](value):("type"===name&&value!==undefined&&rnoType.test(elem.nodeName)&&elem.parentNode&&migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8"),!jQuery.attrHooks[lowerName]&&rboolean.test(lowerName)&&(jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},ruseDefault.test(lowerName)&&migrateWarn("jQuery.fn.attr('"+lowerName+"') may use property instead of attribute")),oldAttr.call(jQuery,elem,name,value))},jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrGet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value') no longer gets properties"),name in elem?elem.value:null)},set:function(elem,value){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrSet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value', val) no longer sets properties"),elem.value=value,void 0)}};var matched,browser,oldInit=jQuery.fn.init,oldParseJSON=jQuery.parseJSON,rquickExpr=/^([^<]*)(<[\w\W]+>)([^>]*)$/;jQuery.fn.init=function(selector,context,rootjQuery){var match;return selector&&"string"==typeof selector&&!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(jQuery.trim(selector)))&&match[0]&&("<"!==selector.charAt(0)&&migrateWarn("$(html) HTML strings must start with '<' character"),match[3]&&migrateWarn("$(html) HTML text after last tag is ignored"),"#"===match[0].charAt(0)&&(migrateWarn("HTML string cannot start with a '#' character"),jQuery.error("JQMIGRATE: Invalid selector string (XSS)")),context&&context.context&&(context=context.context),jQuery.parseHTML)?oldInit.call(this,jQuery.parseHTML(match[2],context,!0),context,rootjQuery):oldInit.apply(this,arguments)},jQuery.fn.init.prototype=jQuery.fn,jQuery.parseJSON=function(json){return json||null===json?oldParseJSON.apply(this,arguments):(migrateWarn("jQuery.parseJSON requires a valid JSON string"),null)},jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},jQuery.browser||(matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),migrateWarnProp(jQuery,"browser",jQuery.browser,"jQuery.browser is deprecated"),jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return migrateWarn("jQuery.sub() is deprecated"),jQuerySub},jQuery.ajaxSetup({converters:{"text json":jQuery.parseJSON}});var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];return!elem||"events"!==name||1!==arguments.length||(ret=jQuery.data(elem,name),evt=jQuery._data(elem,name),ret!==undefined&&ret!==evt||evt===undefined)?oldFnData.apply(this,arguments):(migrateWarn("Use of jQuery.fn.data('events') is deprecated"),evt)};var rscriptType=/\/(java|ecma)script/i,oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack;jQuery.fn.andSelf=function(){return migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),oldSelf.apply(this,arguments)},jQuery.clean||(jQuery.clean=function(elems,context,fragment,scripts){context=context||document,context=!context.nodeType&&context[0]||context,context=context.ownerDocument||context,migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];if(jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes),fragment)for(handleScript=function(elem){return!elem.type||rscriptType.test(elem.type)?scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem):void 0},i=0;null!=(elem=ret[i]);i++)jQuery.nodeName(elem,"script")&&handleScript(elem)||(fragment.appendChild(elem),"undefined"!=typeof elem.getElementsByTagName&&(jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript),ret.splice.apply(ret,[i+1,0].concat(jsTags)),i+=jsTags.length));return ret});var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,oldDie=jQuery.fn.die,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){return"string"!=typeof events||jQuery.event.special.hover?events:(rhoverHack.test(events)&&migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1"))};jQuery.event.props&&"attrChange"!==jQuery.event.props[0]&&jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),jQuery.event.dispatch&&migrateWarnProp(jQuery.event,"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),jQuery.event.add=function(elem,types,handler,data,selector){elem!==document&&rajaxEvent.test(types)&&migrateWarn("AJAX events should be attached to document: "+types),eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)},jQuery.event.remove=function(elem,types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)},jQuery.fn.error=function(){var args=Array.prototype.slice.call(arguments,0);return migrateWarn("jQuery.fn.error() is deprecated"),args.splice(0,0,"error"),arguments.length?this.bind.apply(this,args):(this.triggerHandler.apply(this,args),this)},jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},jQuery.fn.live=function(types,data,fn){return migrateWarn("jQuery.fn.live() is deprecated"),oldLive?oldLive.apply(this,arguments):(jQuery(this.context).on(types,this.selector,data,fn),this)},jQuery.fn.die=function(types,fn){return migrateWarn("jQuery.fn.die() is deprecated"),oldDie?oldDie.apply(this,arguments):(jQuery(this.context).off(types,this.selector||"**",fn),this)},jQuery.event.trigger=function(event,data,elem,onlyHandlers){return elem||rajaxEvent.test(event)||migrateWarn("Global events are undocumented and deprecated"),eventTrigger.call(this,event,data,elem||document,onlyHandlers)},jQuery.each(ajaxEvents.split("|"),function(_,name){jQuery.event.special[name]={setup:function(){var elem=this;return elem!==document&&(jQuery.event.add(document,name+"."+jQuery.guid,function(){jQuery.event.trigger(name,null,elem,!0)}),jQuery._data(this,name,jQuery.guid++)),!1},teardown:function(){return this!==document&&jQuery.event.remove(document,name+"."+jQuery._data(this,name)),!1}}})}(jQuery,window),function($){$.extend($.fn,{validate:function(options){if(!this.length)return options&&options.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var validator=$.data(this[0],"validator");return validator?validator:(this.attr("novalidate","novalidate"),validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit&&(this.validateDelegate(":submit","click",function(event){validator.settings.submitHandler&&(validator.submitButton=event.target),$(event.target).hasClass("cancel")&&(validator.cancelSubmit=!0),void 0!==$(event.target).attr("formnovalidate")&&(validator.cancelSubmit=!0)}),this.submit(function(event){function handle(){var hidden;return validator.settings.submitHandler?(validator.submitButton&&(hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)),validator.settings.submitHandler.call(validator,validator.currentForm,event),validator.submitButton&&hidden.remove(),!1):!0}return validator.settings.debug&&event.preventDefault(),validator.cancelSubmit?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?(validator.formSubmitted=!0,!1):handle():(validator.focusInvalid(),!1)})),validator)},valid:function(){if($(this[0]).is("form"))return this.validate().form();var valid=!0,validator=$(this[0].form).validate();return this.each(function(){valid=valid&&validator.element(this)}),valid},removeAttrs:function(attributes){var result={},$element=this;return $.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value),$element.removeAttr(value)}),result},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),delete existingRules.messages,staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":if(!argument)return delete staticRules[element.name],existingRules;var filtered={};return $.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method],delete existingRules[method]}),filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required,data=$.extend({required:param},data)}return data}}),$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}}),$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form,this.init()},$.validator.format=function(source,params){return 1===arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!==Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!==Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})}),source)},$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(element)).hide())},onfocusout:function(element){this.checkable(element)||!(element.name in this.submitted)&&this.optional(element)||this.element(element)},onkeyup:function(element,event){(9!==event.which||""!==this.elementValue(element))&&(element.name in this.submitted||element===this.lastElement)&&this.element(element)},onclick:function(element){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).addClass(errorClass).removeClass(validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).removeClass(errorClass).addClass(validClass):$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");
validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0],event)}this.labelContainer=$(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm),this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var groups=this.groups={};$.each(this.settings.groups,function(key,value){"string"==typeof value&&(value=value.split(/\s/)),$.each(value,function(index,name){groups[name]=key})});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)}),$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate),this.settings.invalidHandler&&$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){element=this.validationTargetFor(this.clean(element)),this.lastElement=element,this.prepareElement(element),this.currentElements=$(element);var result=this.check(element)!==!1;return result?delete this.invalid[element.name]:this.invalid[element.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors),this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0;for(var i in obj)count++;return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1===$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in rulesCache||!validator.objectLength($(this).rules())?!1:(rulesCache[this.name]=!0,!0)})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset(),this.toHide=this.errorsFor(element)},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();return"radio"===type||"checkbox"===type?$("input[name='"+$(element).attr("name")+"']:checked").val():"string"==typeof val?val.replace(/\r/g,""):val},check:function(element){element=this.validationTargetFor(this.clean(element));var result,rules=$(element).rules(),dependencyMismatch=!1,val=this.elementValue(element);for(var method in rules){var rule={method:method,parameters:rules[method]};try{if(result=$.validator.methods[method].call(this,val,element,rule.parameters),"dependency-mismatch"===result){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"===result)return this.toHide=this.toHide.not(this.errorsFor(element)),void 0;if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e),e}}return dependencyMismatch?void 0:(this.objectLength(rules)&&this.successList.push(element),!0)},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||element.attributes&&$(element).attr("data-msg-"+method.toLowerCase())},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i];return void 0},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)),this.errorList.push({message:message,element:element}),this.errorMap[element.name]=message,this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var label=this.errorsFor(element);label.length?(label.removeClass(this.settings.validClass).addClass(this.settings.errorClass),label.html(message)):(label=$("<"+this.settings.errorElement+">").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||""),this.settings.wrapper&&(label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(label).length||(this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element))),!message&&this.settings.success&&(label.text(""),"string"==typeof this.settings.success?label.addClass(this.settings.success):this.settings.success(label,element)),this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name})},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){return this.checkable(element)&&(element=this.findByName(element.name).not(this.settings.ignore)[0]),element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[element.name],valid&&0===this.pendingRequest&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!valid&&0===this.pendingRequest&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor===String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])}),rules},attributeRules:function(element){var rules={},$element=$(element),type=$element[0].getAttribute("type");for(var method in $.validator.methods){var value;"required"===method?(value=$element.get(0).getAttribute(method),""===value&&(value=!0),value=!!value):value=$element.attr(method),/min|max/.test(method)&&(null===type||/number|range|text/.test(type))&&(value=Number(value)),value?rules[method]=value:type===method&&"range"!==type&&(rules[method]=!0)}return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods)value=$element.data("rule-"+method.toLowerCase()),void 0!==value&&(rules[method]=value);return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(val===!1)return delete rules[prop],void 0;if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0!==val.param?val.param:!0:delete rules[prop]}}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter}),$.each(["minlength","maxlength"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){var parts;rules[this]&&($.isArray(rules[this])?rules[this]=[Number(rules[this][0]),Number(rules[this][1])]:"string"==typeof rules[this]&&(parts=rules[this].split(/[\s,]+/),rules[this]=[Number(parts[0]),Number(parts[1])]))}),$.validator.autoCreateRanges&&(rules.min&&rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength&&rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0}),data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!==message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if("select"===element.nodeName.toLowerCase()){var val=$(element).val();return val&&val.length>0}return this.checkable(element)?this.getLength(value,element)>0:$.trim(value).length>0},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9 \-]+/.test(value))return!1;var nCheck=0,nDigit=0,bEven=!1;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return 0===nCheck%10},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||param>=length},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||param>=value},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()}),value===target.val()},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param="string"==typeof param&&{url:param}||param,previous.old===value)return previous.valid;previous.old=value;var validator=this;this.startRequest(element);var data={};return data[element.name]=value,$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===!0||"true"===response;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),delete validator.invalid[element.name],validator.showErrors()}else{var errors={},message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message,validator.invalid[element.name]=!0,validator.showErrors(errors)}previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending"}}}),$.format=$.validator.format}(jQuery),function($){var pendingRequests={};if($.ajaxPrefilter)$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;"abort"===settings.mode&&(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=xhr)});else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;return"abort"===mode?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments),pendingRequests[port]):ajax.apply(this,arguments)}}}(jQuery),function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);return target.is(delegate)?handler.apply(target,arguments):void 0})}})}(jQuery),Backbone.Validation=function(_){"use strict";var defaultOptions={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},formatFunctions={formatLabel:function(attrName,model){return defaultLabelFormatters[defaultOptions.labelFormatter](attrName,model)},format:function(){var args=Array.prototype.slice.call(arguments),text=args.shift();return text.replace(/\{(\d+)\}/g,function(match,number){return"undefined"!=typeof args[number]?args[number]:match})}},flatten=function(obj,into,prefix){return into=into||{},prefix=prefix||"",_.each(obj,function(val,key){obj.hasOwnProperty(key)&&(!val||"object"!=typeof val||val instanceof Array||val instanceof Date||val instanceof RegExp||val instanceof Backbone.Model||val instanceof Backbone.Collection?into[prefix+key]=val:flatten(val,into,prefix+key+"."))}),into},Validation=function(){var getValidatedAttrs=function(model){return _.reduce(_.keys(_.result(model,"validation")||{}),function(memo,key){return memo[key]=void 0,memo},{})},getValidators=function(model,attr){var attrValidationSet=model.validation?_.result(model,"validation")[attr]||{}:{};return(_.isFunction(attrValidationSet)||_.isString(attrValidationSet))&&(attrValidationSet={fn:attrValidationSet}),_.isArray(attrValidationSet)||(attrValidationSet=[attrValidationSet]),_.reduce(attrValidationSet,function(memo,attrValidation){return _.each(_.without(_.keys(attrValidation),"msg"),function(validator){memo.push({fn:defaultValidators[validator],val:attrValidation[validator],msg:attrValidation.msg})}),memo},[])},validateAttr=function(model,attr,value,computed){return _.reduce(getValidators(model,attr),function(memo,validator){var ctx=_.extend({},formatFunctions,defaultValidators),result=validator.fn.call(ctx,value,attr,validator.val,model,computed);return result===!1||memo===!1?!1:result&&!memo?_.result(validator,"msg")||result:memo},"")},validateModel=function(model,attrs){var error,invalidAttrs={},isValid=!0,computed=_.clone(attrs),flattened=flatten(attrs);return _.each(flattened,function(val,attr){error=validateAttr(model,attr,val,computed),error&&(invalidAttrs[attr]=error,isValid=!1)}),{invalidAttrs:invalidAttrs,isValid:isValid}},mixin=function(view,options){return{preValidate:function(attr,value){var error,self=this,result={};return _.isObject(attr)?(_.each(attr,function(value,key){error=self.preValidate(key,value),error&&(result[key]=error)}),_.isEmpty(result)?void 0:result):validateAttr(this,attr,value,_.extend({},this.attributes))},isValid:function(option){var flattened=flatten(this.attributes);return _.isString(option)?!validateAttr(this,option,flattened[option],_.extend({},this.attributes)):_.isArray(option)?_.reduce(option,function(memo,attr){return memo&&!validateAttr(this,attr,flattened[attr],_.extend({},this.attributes))},!0,this):(option===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(attrs,setOptions){var model=this,validateAll=!attrs,opt=_.extend({},options,setOptions),validatedAttrs=getValidatedAttrs(model),allAttrs=_.extend({},validatedAttrs,model.attributes,attrs),changedAttrs=flatten(attrs||allAttrs),result=validateModel(model,allAttrs);return model._isValid=result.isValid,_.each(validatedAttrs,function(val,attr){var invalid=result.invalidAttrs.hasOwnProperty(attr);invalid||opt.valid(view,attr,opt.selector)}),_.each(validatedAttrs,function(val,attr){var invalid=result.invalidAttrs.hasOwnProperty(attr),changed=changedAttrs.hasOwnProperty(attr);invalid&&(changed||validateAll)&&opt.invalid(view,attr,result.invalidAttrs[attr],opt.selector)}),_.defer(function(){model.trigger("validated",model._isValid,model,result.invalidAttrs),model.trigger("validated:"+(model._isValid?"valid":"invalid"),model,result.invalidAttrs)}),!opt.forceUpdate&&_.intersection(_.keys(result.invalidAttrs),_.keys(changedAttrs)).length>0?result.invalidAttrs:void 0}}},bindModel=function(view,model,options){_.extend(model,mixin(view,options))},unbindModel=function(model){delete model.validate,delete model.preValidate,delete model.isValid},collectionAdd=function(model){bindModel(this.view,model,this.options)},collectionRemove=function(model){unbindModel(model)};return{version:"0.9.0",configure:function(options){_.extend(defaultOptions,options)},bind:function(view,options){options=_.extend({},defaultOptions,defaultCallbacks,options);var model=options.model||view.model,collection=options.collection||view.collection;if("undefined"==typeof model&&"undefined"==typeof collection)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";model?bindModel(view,model,options):collection&&(collection.each(function(model){bindModel(view,model,options)}),collection.bind("add",collectionAdd,{view:view,options:options}),collection.bind("remove",collectionRemove))},unbind:function(view,options){options=_.extend({},options);var model=options.model||view.model,collection=options.collection||view.collection;model&&unbindModel(model),collection&&(collection.each(function(model){unbindModel(model)}),collection.unbind("add",collectionAdd),collection.unbind("remove",collectionRemove))},mixin:mixin(null,defaultOptions)}}(),defaultCallbacks=Validation.callbacks={valid:function(view,attr,selector){view.$("["+selector+'~="'+attr+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(view,attr,error,selector){view.$("["+selector+'~="'+attr+'"]').addClass("invalid").attr("data-error",error)}},defaultPatterns=Validation.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},defaultMessages=Validation.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},defaultLabelFormatters=Validation.labelFormatters={none:function(attrName){return attrName},sentenceCase:function(attrName){return attrName.replace(/(?:^\w|[A-Z]|\b\w)/g,function(match,index){return 0===index?match.toUpperCase():" "+match.toLowerCase()}).replace(/_/g," ")},label:function(attrName,model){return model.labels&&model.labels[attrName]||defaultLabelFormatters.sentenceCase(attrName,model)}},defaultValidators=Validation.validators=function(){var trim=String.prototype.trim?function(text){return null===text?"":String.prototype.trim.call(text)}:function(text){var trimLeft=/^\s+/,trimRight=/\s+$/;return null===text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},isNumber=function(value){return _.isNumber(value)||_.isString(value)&&value.match(defaultPatterns.number)},hasValue=function(value){return!(_.isNull(value)||_.isUndefined(value)||_.isString(value)&&""===trim(value)||_.isArray(value)&&_.isEmpty(value))};return{fn:function(value,attr,fn,model,computed){return _.isString(fn)&&(fn=model[fn]),fn.call(model,value,attr,computed)},required:function(value,attr,required,model,computed){var isRequired=_.isFunction(required)?required.call(model,value,attr,computed):required;return isRequired||hasValue(value)?isRequired&&!hasValue(value)?this.format(defaultMessages.required,this.formatLabel(attr,model)):void 0:!1},acceptance:function(value,attr,accept,model){return"true"===value||_.isBoolean(value)&&value!==!1?void 0:this.format(defaultMessages.acceptance,this.formatLabel(attr,model))},min:function(value,attr,minValue,model){return!isNumber(value)||minValue>value?this.format(defaultMessages.min,this.formatLabel(attr,model),minValue):void 0},max:function(value,attr,maxValue,model){return!isNumber(value)||value>maxValue?this.format(defaultMessages.max,this.formatLabel(attr,model),maxValue):void 0},range:function(value,attr,range,model){return!isNumber(value)||value<range[0]||value>range[1]?this.format(defaultMessages.range,this.formatLabel(attr,model),range[0],range[1]):void 0},length:function(value,attr,length,model){return _.isString(value)&&value.length===length?void 0:this.format(defaultMessages.length,this.formatLabel(attr,model),length)},minLength:function(value,attr,minLength,model){return!_.isString(value)||value.length<minLength?this.format(defaultMessages.minLength,this.formatLabel(attr,model),minLength):void 0},maxLength:function(value,attr,maxLength,model){return!_.isString(value)||value.length>maxLength?this.format(defaultMessages.maxLength,this.formatLabel(attr,model),maxLength):void 0},rangeLength:function(value,attr,range,model){return!_.isString(value)||value.length<range[0]||value.length>range[1]?this.format(defaultMessages.rangeLength,this.formatLabel(attr,model),range[0],range[1]):void 0},oneOf:function(value,attr,values,model){return _.include(values,value)?void 0:this.format(defaultMessages.oneOf,this.formatLabel(attr,model),values.join(", "))},equalTo:function(value,attr,equalTo,model,computed){return value!==computed[equalTo]?this.format(defaultMessages.equalTo,this.formatLabel(attr,model),this.formatLabel(equalTo,model)):void 0},pattern:function(value,attr,pattern,model){return hasValue(value)&&value.toString().match(defaultPatterns[pattern]||pattern)?void 0:this.format(defaultMessages[pattern]||defaultMessages.inlinePattern,this.formatLabel(attr,model),pattern)}}}();return _.each(defaultValidators,function(validator,key){defaultValidators[key]=_.bind(defaultValidators[key],_.extend({},formatFunctions,defaultValidators))}),Validation}(_),_.extend(Backbone.Model.prototype,Backbone.Validation.mixin),window.Modernizr=function(a,b,c){function w(a){j.cssText=a}function y(a,b){return typeof a===b}var k,s,v,d="2.7.1",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,m=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),n={},q=[],r=q.slice,t=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);
return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},u={}.hasOwnProperty;v=y(u,"undefined")||y(u.call,"undefined")?function(a,b){return b in a&&y(a.constructor.prototype[b],"undefined")}:function(a,b){return u.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=r.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(r.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(r.call(arguments)))};return e}),n.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:t(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c};for(var B in n)v(n,B)&&(s=B.toLowerCase(),e[s]=n[B](),q.push((e[s]?"":"no-")+s));return e.addTest=function(a,b){if("object"==typeof a)for(var d in a)v(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof f&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},w(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=n(c));var g;return g=d.cache[a]?d.cache[a].cloneNode():f.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!g.canHaveChildren||e.test(a)||g.tagUrn?g:d.frag.appendChild(g)}function p(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||n(a);for(var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;g>e;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var g,k,c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",i=0,j={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){g=!0,k=!0}}();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=m,e.testStyles=t,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+q.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};B=function(a){function b(a){var e,f,g,a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a};for(f=0;d>f;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;b>f;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script"),e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var FavoriteView,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FavoriteView=function(_super){function FavoriteView(){return this.successRemoveFavHandler=__bind(this.successRemoveFavHandler,this),this.removeFromFavorite=__bind(this.removeFromFavorite,this),this.successHandler=__bind(this.successHandler,this),this.saveAsFavorite=__bind(this.saveAsFavorite,this),this.changeHeartCount=__bind(this.changeHeartCount,this),this.checkToSaveAsFavorite=__bind(this.checkToSaveAsFavorite,this),this.checkCookieForFav=__bind(this.checkCookieForFav,this),this.initialize=__bind(this.initialize,this),_ref=FavoriteView.__super__.constructor.apply(this,arguments)}return __extends(FavoriteView,_super),FavoriteView.prototype.events={"click .js-heart-off":"saveAsFavorite","click .js-heart-on":"removeFromFavorite"},FavoriteView.prototype.initialize=function(options){return this.isLoggedIn=options.isLoggedIn,this.env=options.env,this.headerView=options.headerView,this.vent=options.vent,this.vent.on("favorites:received",this.checkToSaveAsFavorite),this.isLoggedIn?void 0:MnpUtil.removeAttrFromCookie(MnpUtil.cookieName(this.env),"fav",this.env)},FavoriteView.prototype.checkCookieForFav=function(){var cookieHash;return cookieHash=MnpUtil.getJsonFromCookieStr(MnpUtil.getCookie(MnpUtil.cookieName(this.env))),null!==cookieHash&&"undefined"!=typeof cookieHash.fav?cookieHash:-1},FavoriteView.prototype.checkToSaveAsFavorite=function(){return-1!==this.checkCookieForFav()?(this.model.propertyId=this.checkCookieForFav().fav,this.changeHeartCount("decrement"),this.saveAsFavorite()):void 0},FavoriteView.prototype.changeHeartCount=function(action){var count,newCount;return count=parseInt($(".fav-num").html()),isNaN(count)&&(count=0),"increment"===action?newCount=count+1:(newCount=count-1,0===newCount&&(newCount="")),$(".fav-num").html(newCount)},FavoriteView.prototype.saveAsFavorite=function(){return this.isLoggedIn?(this.$el.find(".js-heart-off").toggleClass("js-heart-off js-heart-on"),this.changeHeartCount("increment"),MnpUtil.removeAttrFromCookie(MnpUtil.cookieName(this.env),"fav",this.env),this.model.save(this.model.getFavoriteData("add"),{type:"post",error:this.errorHandler,success:this.successHandler})):(MnpUtil.saveAttrToCookie(MnpUtil.cookieName(this.env),"fav",this.model.propertyId,this.env),this.headerView.toggleLoginSignupMenu("signup"),jQuery("#signup-header").html("<h2>Please Sign-in or Register</h2>"),!1)},FavoriteView.prototype.successHandler=function(){return this.headerView.favoriteCollection.jsonpFetch()},FavoriteView.prototype.removeFromFavorite=function(){return this.$el.find(".js-heart-on").toggleClass("js-heart-on js-heart-off"),this.changeHeartCount("decrement"),this.model.save(this.model.getFavoriteData("remove"),{type:"post",error:this.errorHandler,success:this.successRemoveFavHandler})},FavoriteView.prototype.successRemoveFavHandler=function(){return this.headerView.favoriteCollection.jsonpFetch()},FavoriteView}(Backbone.View);var FavoriteCollection,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FavoriteCollection=function(_super){function FavoriteCollection(){return this.getFavoritedProperties=__bind(this.getFavoritedProperties,this),this.parse=__bind(this.parse,this),this.favoritesError=__bind(this.favoritesError,this),this.jsonpFetch=__bind(this.jsonpFetch,this),this.url=__bind(this.url,this),_ref=FavoriteCollection.__super__.constructor.apply(this,arguments)}return __extends(FavoriteCollection,_super),FavoriteCollection.prototype.url=function(){return this.devServer+"/favorite/"+this.consumerId},FavoriteCollection.prototype.initialize=function(opts){var cookieJson,cookieStr;return this.$=opts.jqueryRef,this.devServer=opts.devServer||"",this.env=opts.env||"dev",this.consumerId=-1,cookieStr=this.$.cookie(MnpUtil.cookieName(this.env)),null!=cookieStr&&(cookieJson=MnpUtil.getJsonFromCookieStr(cookieStr),null!=cookieJson?cookieJson.u:void 0)?this.consumerId=cookieJson.u:void 0},FavoriteCollection.prototype.jsonpFetch=function(){return-1!==this.consumerId?(this.trigger("favorites:fetching"),this.fetch({dataType:"jsonp",error:this.favoritesError})):void 0},FavoriteCollection.prototype.favoritesError=function(){return this.trigger("favorites:error")},FavoriteCollection.prototype.parse=function(resp){return resp=_.map(resp,function(item){var address,imageName,imageSrc,match,propertyAddress,propertyName;return imageSrc="/images/common/nophoto.jpg",imageName=null!=item?item.imageName:void 0,null!=imageName&&(match=/(\d*)\.(\w{3})/i.exec(imageName),match.length>2&&(imageSrc="http://capi.myleasestar.com/v2/dimg-crop/"+match[1]+"/285x178/"+imageName)),propertyName=null!=item?item.propertyName:void 0,null!=propertyName&&(propertyName=MnpUtil.trimString(propertyName,29)),propertyAddress=null!=item?item.address:void 0,null!=propertyAddress&&(address=MnpUtil.trimString(propertyAddress,29)),item=new Backbone.Model(item),item.set("imageSrc",imageSrc),item.set("propertyName",propertyName),item.set("address",address),item})},FavoriteCollection.prototype.getFavoritedProperties=function(){var pids;return pids=[],_.each(this.models,function(item){return"undefined"!=typeof item.attributes.propertyId?pids.push(item.attributes.propertyId):void 0}),pids},FavoriteCollection}(Backbone.Collection);var FavoriteModel,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FavoriteModel=function(_super){function FavoriteModel(){return this.getFavoriteData=__bind(this.getFavoriteData,this),this.createFavoriteArray=__bind(this.createFavoriteArray,this),this.url=__bind(this.url,this),this.defaults=__bind(this.defaults,this),this.initialize=__bind(this.initialize,this),_ref=FavoriteModel.__super__.constructor.apply(this,arguments)}return __extends(FavoriteModel,_super),FavoriteModel.prototype.initialize=function(options){return this.propertyId=options.propertyId||"-1",this.consumerId=options.consumerId,this.env=options.env},FavoriteModel.prototype.defaults=function(){var consumerId,propertyId;return consumerId=this.consumerId,propertyId=this.propertyId},FavoriteModel.prototype.url=function(){return"/favorite"},FavoriteModel.prototype.createFavoriteArray=function(apiAction){var pids;return pids=headerView.favoriteCollection.getFavoritedProperties(),"add"===apiAction?isNaN(this.propertyId)||-1===this.propertyId||pids.push(Number(this.propertyId)):pids=_.without(pids,Number(this.propertyId)),_.uniq(pids)},FavoriteModel.prototype.getFavoriteData=function(apiAction){var execute,self;return self=this,execute=function(){var data;return data={},data.propertyId=self.createFavoriteArray(apiAction),data.fpid=Array(),data},execute()},FavoriteModel}(Backbone.Model);var FavoriteHeaderView,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FavoriteHeaderView=function(_super){function FavoriteHeaderView(){return this.unfavorite=__bind(this.unfavorite,this),this.closeRemoveOverlay=__bind(this.closeRemoveOverlay,this),this.heartClicked=__bind(this.heartClicked,this),this.adjustFavoriteTitle=__bind(this.adjustFavoriteTitle,this),this.render=__bind(this.render,this),this.renderNoFavorites=__bind(this.renderNoFavorites,this),this.templateReceived=__bind(this.templateReceived,this),this.favoritesReady=__bind(this.favoritesReady,this),this.fetching=__bind(this.fetching,this),_ref=FavoriteHeaderView.__super__.constructor.apply(this,arguments)}return __extends(FavoriteHeaderView,_super),FavoriteHeaderView.prototype.events={"click .js-heart-on":"heartClicked","click .js-unfavorite":"unfavorite"},FavoriteHeaderView.prototype.initialize=function(opts){return this.vent=opts.vent,this.$=opts.jqueryRef,this.collection.on("reset",this.favoritesReady),this.collection.on("favorites:fetching",this.fetching),this.collection.on("favorites:error",this.renderNoFavorites),-1===this.collection.consumerId?this.$el.find(".no-favorites").show():void 0},FavoriteHeaderView.prototype.fetching=function(){return this.$el.find(".no-favorites").hide(),this.$el.find("#favorite-spinner").show()},FavoriteHeaderView.prototype.favoritesReady=function(){return this.vent.trigger("favorites:received",this.collection.getFavoritedProperties()),0===this.collection.models.length?this.renderNoFavorites():null!=this.template?this.render():this.$.ajax({dataType:"jsonp",success:this.templateReceived,url:this.collection.devServer+"/pm/header_favorite"})},FavoriteHeaderView.prototype.templateReceived=function(tmpl){return this.template=tmpl.cb,this.render()},FavoriteHeaderView.prototype.renderNoFavorites=function(){return this.vent.trigger("favorites:received"),this.$el.find("table").addClass("no-favorites-table"),this.$el.find("tr").html("<td class='no-favorites-td'><img src='/assets-pl/images/clear.gif' class='no-favorites' /></td>")},FavoriteHeaderView.prototype.render=function(){var adjustedWidth,favPropertyTitles,favoritesHtml,thisRef;return this.$el.find("table").removeClass("no-favorites-table"),favoritesHtml="",thisRef=this,_.each(this.collection.models,function(item){return favoritesHtml+=Mustache.to_html(thisRef.template,item.toJSON())}),this.$el.find(".no-favorites").hide(),this.$el.find("#favorite-spinner").hide(),this.$el.find("#signed-in-fav-instruction").show(),this.$el.find("tr").html(favoritesHtml),adjustedWidth=300*this.collection.models.length,this.$el.find("table").css({width:""+adjustedWidth+"px"}),this.$el.width()<1100&&(favPropertyTitles=this.$el.find(".property-name"),_.each(favPropertyTitles,this.adjustFavoriteTitle)),this.$el.find("button.close-overlay").on("click",this.closeRemoveOverlay)},FavoriteHeaderView.prototype.adjustFavoriteTitle=function(item){var curTitle,titleText;return curTitle=this.$(item),titleText=curTitle.text(),curTitle.text(MnpUtil.ellip(titleText,15))},FavoriteHeaderView.prototype.heartClicked=function(e){var favCard;return favCard=jQuery(e.currentTarget).parents(".js-fav-card"),jQuery(favCard).find(".remove-fav-overlay").show(),e.preventDefault()},FavoriteHeaderView.prototype.closeRemoveOverlay=function(e){return jQuery(e.currentTarget).parents(".remove-fav-overlay").hide()},FavoriteHeaderView.prototype.unfavorite=function(eObj){var $heart,$parentTD,favoriteModel,favoriteRemoveHeaderView,heartId;return $heart=jQuery(eObj.currentTarget),heartId=$heart.data("id"),$heart.parent().append(MnpUtil.getSmallSpinner(mnpPageData.isLegacyApp)),$heart.remove(),favoriteModel=new FavoriteModel({consumerId:mnpPageData.userData.cid,propertyId:heartId,env:mnpPageData.env}),$parentTD=$heart.parents("td"),favoriteRemoveHeaderView=new FavoriteRemoveHeaderView({el:$parentTD,model:favoriteModel}),favoriteRemoveHeaderView.removeFromFavorites(),!1},FavoriteHeaderView}(Backbone.View);var FavoriteRemoveHeaderView,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};FavoriteRemoveHeaderView=function(_super){function FavoriteRemoveHeaderView(){return this.successRemoveFavHandler=__bind(this.successRemoveFavHandler,this),this.errorHandler=__bind(this.errorHandler,this),this.removeFromFavorites=__bind(this.removeFromFavorites,this),_ref=FavoriteRemoveHeaderView.__super__.constructor.apply(this,arguments)}return __extends(FavoriteRemoveHeaderView,_super),FavoriteRemoveHeaderView.prototype.removeFromFavorites=function(){return this.model.save(this.model.getFavoriteData("remove"),{type:"post",error:this.errorHandler,success:this.successRemoveFavHandler})},FavoriteRemoveHeaderView.prototype.errorHandler=function(){},FavoriteRemoveHeaderView.prototype.successRemoveFavHandler=function(){return headerView.favoriteCollection.jsonpFetch()},FavoriteRemoveHeaderView}(Backbone.View),!function($){var SmartBanner=function(options){this.origHtmlMargin=parseFloat($("html").css("margin-top")),this.options=$.extend({},$.smartbanner.defaults,options);var standalone=navigator.standalone,UA=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=UA.match(/iPad|iPhone|iPod/i)?null!=UA.match(/Safari/i)&&(null!=UA.match(/CriOS/i)||window.Number(navigator.userAgent.substr(navigator.userAgent.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):null!=UA.match(/Android/i)?this.type="android":null!=UA.match(/Windows NT 6.2/i)&&null!==UA.match(/Touch/i)&&(this.type="windows"),this.type&&!standalone&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?$(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var meta=$("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':'meta[name="msApplication-ID"]');0!=meta.length&&("windows"==this.type?(this.pfn=$('meta[name="msApplication-PackageFamilyName"]').attr("content"),this.appId=meta.attr("content")[1]):this.appId=/app-id=([^\s,]+)/.exec(meta.attr("content"))[1],this.title=this.options.title?this.options.title:$("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:$('meta[name="author"]').length?$('meta[name="author"]').attr("content"):window.location.hostname,this.create(),this.show(),this.listen())}};SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL,link=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:PDP?PFN="+this.pfn:"android"==this.type?"market://details?id=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,inStore=this.options.price?this.options.price+" - "+("android"==this.type?this.options.inGooglePlay:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",gloss=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;$("body").append('<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+inStore+'</span></div><a href="'+link+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>"),this.options.icon?iconURL=this.options.icon:$('link[rel="apple-touch-icon-precomposed"]').length>0?(iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(gloss=!1)):$('link[rel="apple-touch-icon"]').length>0?iconURL=$('link[rel="apple-touch-icon"]').attr("href"):$('meta[name="msApplication-TileImage"]').length>0?iconURL=$('meta[name="msApplication-TileImage"]').attr("content"):$('meta[name="msapplication-TileImage"]').length>0&&(iconURL=$('meta[name="msapplication-TileImage"]').attr("content")),iconURL?($("#smartbanner .sb-icon").css("background-image","url("+iconURL+")"),gloss&&$("#smartbanner .sb-icon").addClass("gloss")):$("#smartbanner").addClass("no-icon"),this.bannerHeight=$("#smartbanner").outerHeight()+2,this.scale>1&&($("#smartbanner").css("top",parseFloat($("#smartbanner").css("top"))*this.scale).css("height",parseFloat($("#smartbanner").css("height"))*this.scale),$("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",$(window).width()/this.scale))},listen:function(){$("#smartbanner .sb-close").on("click",$.proxy(this.close,this)),$("#smartbanner .sb-button").on("click",$.proxy(this.install,this))},show:function(callback){$("#smartbanner").stop().animate({top:0},this.options.speedIn).addClass("shown"),$("html").animate({marginTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",callback)},hide:function(callback){$("#smartbanner").stop().animate({top:-1*this.bannerHeight*this.scale},this.options.speedOut).removeClass("shown"),$("html").animate({marginTop:this.origHtmlMargin},this.options.speedOut,"swing",callback)},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(){this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(name,value,exdays){var exdate=new Date;exdate.setDate(exdate.getDate()+exdays),value=escape(value)+(null==exdays?"":"; expires="+exdate.toUTCString()),document.cookie=name+"="+value+"; path=/;"},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++)if(x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")),y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1),x=x.replace(/^\s+|\s+$/g,""),x==name)return unescape(y);return null},switchType:function(){var that=this;this.hide(function(){that.type="android"==that.type?"ios":"android";var meta=$("android"==that.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");that.appId=/app-id=([^\s,]+)/.exec(meta)[1],$("#smartbanner").detach(),that.create(),that.show()})}},$.smartbanner=function(option){var $window=$(window),data=$window.data("typeahead"),options="object"==typeof option&&option;data||$window.data("typeahead",data=new SmartBanner(options)),"string"==typeof option&&data[option]()},$.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inWindowsStore:"In the Windows Store",icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null},$.smartbanner.Constructor=SmartBanner}(window.jQuery);